{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","skillCollection","warrior","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","rogue","mage","Math","floor","random","shakeAnimation","queryElement","direction","element","document","querySelector","classList","remove","setTimeout","add","createCardAnimation","amount","elementAnim","i","contains","playSoundEffect","discardCardAnimation","attackInDirectionAnimation","container","blockAnimation","className","src","parentElement","image","createElement","appendChild","removeChild","attackAnimation","navigator","vibrate","webkitVibrate","mozVibrate","msVibrate","style","transform","standardAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","notEnoughStaminaAnimation","player","activePlayerUI","divEl","fistBubble","secondBubble","thirdBubble","innerHTML","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","playersInfo","dragCard","tempCard","selectionEnd","selectionContinue","choosePlayerInfo","updatePlayersNames","updatePlayersModels","endTurnAnimation","init","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","object","temp","localStorage","getItem","JSON","parse","notify","playerOneName","playerTwoName","player1","player2","cards","querySelectorAll","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","datainfo","search","j","setTextTurnInfo","eventTarget","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","console","log","setItem","stringify","activePlayerHand","tempData","Board","model","gameModel","deckWrapper","playersTurnInfo","playersDeck","onCreateCards","removeCards","removeActionCard","createAnimation","playerClassInfo","removeExtraCards","createCards","card","appendPlace","draggable","elDiv","setAttribute","backgroundImage","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","forbidSaveConcede","addEventListener","forbidClick","hideInterfaceElements","boardView","pause","removeItem","proposePlayAgain","textContent","choiceYes","choiceNo","window","removeEventListener","warningUnload","location","reload","title","hash","decodeURIComponent","event","preventDefault","returnValue","stopPropagation","BoardView","board","game","selector","boardSelector","acceptChoiceBtn","cardsChooseCounter","cardInHandField","battleField","endTurnBtn","cardsPlayField","soundOffOnIcon","playersOverlay","playersDeckClose","menu","menuIcon","touchEvent","self","coordinateY","touches","pageY","target","touchCardStart","touchEnd","comparison","parseFloat","changedTouches","dropEvent","doCardAction","onLoadCreate","onDefineCards","submitCardCheckChoose","grabCardStart","endTurn","onClosePileCards","showPlayerDeck","soundOffOn","saveGameProgres","onRestoreGameData","onConcede","cardChooseAnim","cardChooseAnimInHandAdd","cardChooseAnimInHandRemove","dragCardStartAnimation","dragCardEndAnimation","dragCardEnterAnimation","deletePlayfieldAnimation","openCloseOverlay","showMenu","navigateGame","getElementsByTagName","button","attach","drawCards","selectionEndUpdate","extraCardsToRemove","text","playerChooseInfoUpdate","name1","name2","playerNameUpdate","modelPlayer1","modelPlayer2","playerModelsUpdate","deleteActionCard","btnSide","textInfo","checkRestoreGame","number","color","display","player1Model","player2Model","data","side","turnAnnouncer","removeProperty","left","right","menuList","split","doConcede","substr","doContinueDecision","toggle","counterInfo","counterUpdate","GameController","view","defineCards","doCardCheckChoose","actionCard","doEndTurn","onSaveGameData","startRestoreData","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","playerViewUpdate","cardDraw","cardDiscard","actionAnimation","initialHP","initialDP","updateView","state","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","test","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","PlayersView","playerOneModel","playerTwoModel","playerContainer","updateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","updateViewHP","updateViewStamina","doAnimation","updateViewDef","width","passivePlayerUI","content","calcDP","updateDamageNumbers","amountEffect","effectStorage","elem","multipleAttackAnimation","PlayersController","playerView","playersView","priority","playCard","onSavePlayerData","doAction","updateInitialValues","BoardController","playerModel1","playerModel2","createCard","createCardsInHand","showPlayersDeck","deleteOverlayCards","restoredCards","addCardInHand","deleteRandomCard","turnOnOfSound","createCardsForChoose","pullRandomCardsInHand","deletePlayedCard","showCardsForPlayers","backAudio","paused","winConditionObserver","MutationObserver","mutations","childNodes","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\n\n//#TODO refactor \"backflip\"\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, './images/cards/warrior/strike.png', 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, './images/cards/warrior/bash.png', 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, './images/cards/warrior/anger.png', 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 40) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, './images/cards/warrior/bodySlam.png', 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfecedStrike = new Cards(4, 'attackAddEffect', 1, 6, './images/cards/warrior/perfectedStrike.png', 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, './images/cards/warrior/bludgeon.png', 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, './images/cards/warrior/defend_R.png', 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, './images/cards/warrior/armaments.png', 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, './images/cards/warrior/ironWave.png', 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, './images/cards/warrior/warcry.png', 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, './images/cards/warrior/bloodletting.png', 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, './images/cards/warrior/entrench.png', 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, './images/cards/rogue/strike_G.png', 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, './images/cards/rogue/r_dagger-throw.png', 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, './images/cards/rogue/flechettes.png', 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, './images/cards/rogue/riddleWithHoles.png', 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, './images/cards/rogue/slice.png', 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, './images/cards/rogue/quickSlash.png', 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, './images/cards/rogue/survivor.png', 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, './images/cards/rogue/deflect.png', 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 1, './images/cards/rogue/backflip.png', 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, './images/cards/rogue/prepared.png', 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, './images/cards/rogue/expertise.png', 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, './images/cards/rogue/dash.png', 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, './images/cards/mage/strike_P.png', 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, './images/cards/mage/cutThroughFate.png', 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, './images/cards/mage/reachHeaven.png', 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, './images/cards/mage/signatureMove.png', 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, './images/cards/mage/tantrum.png', 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judjment = new Cards(5, 'attackAddEffect', 2, 0, './images/cards/mage/judgment.png', 'judjment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, './images/cards/mage/masterReality.png', 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, './images/cards/mage/defend_P.png', 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, './images/cards/mage/meditate.png', 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, './images/cards/mage/thirdEye.png', 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, './images/cards/mage/nirvana.png', 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, './images/cards/mage/alpha.png', 'alpha');\n\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfecedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judjment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n","// animation through all menu loading black screen\nconst loadingScreenAnimation = target => {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n};\n\n// starting play backgorundMusic\nconst playPauseBackgroundAudio = () => {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.sound-icon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t}\n};\n\n\nconst checkBackgroundAudio = (querySelector) => {\n\tconst currentHash = decodeURIComponent(window.location.hash.substr(1));\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\tconst soundOffOn = document.querySelector(querySelector);\n\n\tswitch (currentHash) {\n\t\tcase 'battle-field':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'restoredGame':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'main-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'choose-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tif ([...allAudio].every(element => element.paused)) {\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t} else {\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t}\n\n};\n\n// shake display when character choosed\nconst shakeAnimation = (queryElement, direction = 'horizontal') => {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shake-x');\n\t\t\tsetTimeout(() => element.classList.add('shake-x'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-x'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shake-y');\n\t\t\tsetTimeout(() => element.classList.add('shake-y'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-y'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shake-mix');\n\t\t\tsetTimeout(() => element.classList.add('shake-mix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-mix'), 400);\n\t\t\tbreak;\n\t}\n};\n\nconst createCardAnimation = (querySelector, amount) => {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('card-draw-animation')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('card-draw-animation');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('card-draw-animation');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('card-draw-animation'));\n\t}\n};\n\nconst discardCardAnimation = querySelector => {\n\tquerySelector.classList.add('card-discard-animation');\n};\n\nconst endTurnAnimation = side => {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('end-turn-animation'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('end-turn-animation'), 1000);\n};\n\nconst attackInDirectionAnimation = (querySelector, direction) => {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attack-right-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-right-animation'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attack-left-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-left-animation'), 1000);\n\t\t\tbreak;\n\t}\n};\n\nconst blockAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n};\n\n//#TODO кроссбраузерность вибрации\nconst attackAnimation = (querySelector, className, src) => {\n\tnavigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tnavigator.vibrate([400]);\n\n\n\tsetTimeout(() => container.removeChild(image), 600);\n};\n\nconst standardAttackAnimation = (querySelector, className, src) => {\n\tnavigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tnavigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n};\n\nconst multipleAttackAnimation = (querySelector, className, src, amountEffect) => {\n\tnavigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tlet effectStorage = [];\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tconst image = document.createElement('img');\n\t\teffectStorage.push(image);\n\t}\n\n\teffectStorage.forEach((elem, index) => {\n\t\telem.src = src;\n\n\t\tif (index === 1) {\n\t\t\telem.style.transform = 'rotate(30deg)';\n\t\t} else if (index === 2) {\n\t\t\telem.style.transform = 'rotate(315deg)';\n\t\t}\n\n\t\telem.className = className;\n\n\t\tsetTimeout(() => {\n\t\t\tcontainer.appendChild(elem);\n\n\t\t\tnavigator.vibrate([200]);\n\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\n\t\t\tsetTimeout(() => container.removeChild(elem), 400);\n\t\t}, index * 300);\n\t});\n};\n\nconst ultimateSkillAnimation = (querySelector, className, src, audio) => {\n\tnavigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in-animation');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\tnavigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector);\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out-animation');\n\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in-animation');\n\t\toverlay.classList.remove('fade-out-animation');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1850);\n};\n\nconst playSoundEffect = querySelector => {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n};\n\nconst damageNumbersAnimation = (querySelector, className, content) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n};\n\nconst notEnoughStaminaAnimation = (player) => {\n\tlet activePlayerUI;\n\tconst divEl = document.createElement('div');\n\tconst fistBubble = document.createElement('div');\n\tconst secondBubble = document.createElement('div');\n\tconst thirdBubble = document.createElement('div');\n\n\tif (player === 'player1') {\n\t\tactivePlayerUI = document.querySelector('.player-1__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-1 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-1__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-1__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-1__third-bubble';\n\t} else {\n\t\tactivePlayerUI = document.querySelector('.player-2__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-2 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-2__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-2__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-2__third-bubble';\n\t}\n\n\tthirdBubble.innerHTML = 'Not enough <span style = \"color: brown;\"> Energy</span>';\n\tdivEl.appendChild(fistBubble);\n\tdivEl.appendChild(secondBubble);\n\tdivEl.appendChild(thirdBubble);\n\n\tactivePlayerUI.appendChild(divEl);\n\n\tsetTimeout(() => {\n\t\tdivEl.classList.add('fade-out-animation')\n\t}, 1500);\n\n\tsetTimeout(() => {\n\t\tactivePlayerUI.removeChild(divEl)\n\t}, 2000);\n}\nexport {\n\tloadingScreenAnimation, playPauseBackgroundAudio, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnimation, discardCardAnimation, endTurnAnimation, attackInDirectionAnimation,\n\tblockAnimation, attackAnimation, standardAttackAnimation, multipleAttackAnimation,\n\tultimateSkillAnimation, playSoundEffect, damageNumbersAnimation, notEnoughStaminaAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.selectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.selectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.choosePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.updatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.updatePlayersModels = new Events();\n\n\t\t// анимация конца хода\n\t\tthis.endTurnAnimation = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.updatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.updatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\tsetTextTurnInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.endTurnAnimation.notify('left', `${this.playersInfo.playerOneName}'s Turn`);\n\t\t} else {\n\t\t\tthis.endTurnAnimation.notify('right', `${this.playersInfo.playerTwoName}'s Turn`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.selectionEnd.notify();\n\t\t\tthis.setTextTurnInfo();\n\t\t} else {\n\t\t\tthis.selectionContinue.notify();\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tthis.setTextTurnInfo();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.selectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation.js';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\n\t\tthis.deckWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.playersTurnInfo = document.querySelector('.players-action');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\n\t\tthis.onCreateCards = new Events();\n\n\t\tthis.removeCards = new Events();\n\t\tthis.removeActionCard = new Events();\n\t\tthis.createAnimation = new Events();\n\t\t// this.endTurnAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tif (eventTarget.classList.contains('player-1__pile-of-card')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (eventTarget.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = document.createElement('div');\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\t\telDiv.style.backgroundImage = `url(${card.icon})`;\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.deckWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.removeCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.removeActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.removeActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {gameObserver, boardView} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\n\nconst endGame = mutations => {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n}\n\nconst allowSaveConcede = () => {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nconst forbidSaveConcede = () => {\n\tdocument.querySelector('.save-progress').addEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').addEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.remove('save-progress-allow');\n\tdocument.querySelector('.concede').classList.remove('concede-allow');\n}\n\nconst hideInterfaceElements = () => {\n\tboardView.cardInHandField.classList.add('hidden');\n\n\tboardView.endTurnBtn.classList.add('hidden')\n\n\tdocument.querySelector('.background-music-battlefield').pause();\n\n\tplaySoundEffect('.victory-audio');\n\n\tlocalStorage.removeItem('gameData');\n}\n\nconst proposePlayAgain = () => {\n\tconst divEl = document.createElement('div');\n\n\tdivEl.className = 'play-again';\n\tdivEl.textContent = 'Do you want to play one more battle?';\n\n\tconst choiceYes = document.createElement('button');\n\n\tchoiceYes.className = 'play-again__accept';\n\tchoiceYes.textContent = 'Yes';\n\n\tconst choiceNo = document.createElement('button');\n\n\tchoiceNo.className = 'play-again__reject';\n\tchoiceNo.textContent = 'No';\n\n\tdivEl.appendChild(choiceYes);\n\tdivEl.appendChild(choiceNo);\n\n\tboardView.boardSelector.appendChild(divEl);\n\n\tchoiceYes.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\twindow.location.reload();\n\t});\n\n\tchoiceNo.addEventListener('click', () => {\n\t\tdocument.title = 'Main menu';\n\t\tlocation.hash = decodeURIComponent('main-menu');\n\t});\n}\n\nconst warningUnload = event => {\n\tevent.preventDefault();\n\tevent.returnValue = '';\n}\n\nconst forbidClick = event => event.stopPropagation();\n\nexport {endGame, allowSaveConcede, warningUnload, forbidClick}","import Events from './eventsModel';\nimport {player1, player2} from '../game';\nimport {warningUnload, forbidClick} from './observerModel';\nimport {createCardAnimation, endTurnAnimation, playSoundEffect} from '../animation_and_sound_effects/animation';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.deckWrapper = this.boardSelector.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.acceptChoiceBtn = this.boardSelector.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = this.boardSelector.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHandField = this.boardSelector.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = this.boardSelector.querySelector('.battle-field');            // play field\n\t\tthis.endTurnBtn = this.boardSelector.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = this.boardSelector.querySelector('.players-action');\n\t\tthis.cardsPlayField = this.boardSelector.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOnIcon = this.boardSelector.querySelector('.sound-icon');\n\t\tthis.playersOverlay = this.boardSelector.querySelector('.players-overlay');\n\t\tthis.playersDeck = this.boardSelector.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = this.boardSelector.querySelector('.players-overlay__close');\n\t\tthis.menu = this.boardSelector.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\n\t\tthis.touchEvent = event => {\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif(event.target.classList.contains('cards')) {\n\t\t\t\tthis.touchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touch-start-animation');\n\n\t\t\t\tplaySoundEffect('.drag-audio')\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend',  function touchEnd (event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY)  - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touch-start-animation');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tif(comparison > 170) {\n\t\t\t\t\t\t\tself.dropEvent.notify()\n\t\t\t\t\t\t\tself.doCardAction.notify(self.gameModel.playerOneTurn)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.submitCardCheckChoose = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.grabCardStart = new Events();\n\n\t\tthis.touchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.dropEvent = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.doCardAction = new Events();\n\n\t\tthis.endTurn = new Events();\n\n\t\tthis.onClosePileCards = new Events();\n\n\t\tthis.showPlayerDeck = new Events();\n\n\t\tthis.soundOffOn = new Events();\n\n\t\tthis.saveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tif(\"ontouchstart\" in window) {\n\t\t\tthis.cardInHandField.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('touchstart', (event) => this.cardChooseAnim(event.target));\n\t\t} else {\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('click', (event) => this.cardChooseAnim(event.target));\n\n\t\t\t// анимация карт в руке при наведении\n\t\t\tthis.cardInHandField.addEventListener('mouseover', (event) => this.cardChooseAnimInHandAdd(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseout', (event) => this.cardChooseAnimInHandRemove(event.target));\n\n\t\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.dragCardStartAnimation(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.grabCardStart.notify(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragend', (event) => this.dragCardEndAnimation(event.target));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragenter', (event) => this.dragCardEnterAnimation(event));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragover', (event) => event.preventDefault());\n\n\t\t\t// играем карты\n\t\t\tthis.cardsPlayField.addEventListener('drop', () => {\n\t\t\t\tthis.dropEvent.notify();\n\t\t\t\tthis.doCardAction.notify(this.gameModel.playerOneTurn);\n\t\t\t\tthis.deletePlayfieldAnimation();\n\t\t\t})\n\t\t}\n\n\t\tthis.acceptChoiceBtn.addEventListener('click', () => {\n\t\t\tthis.onDefineCards.notify()\n\n\t\t\tthis.submitCardCheckChoose.notify();\n\t\t});\n\n\t\tthis.battleField.addEventListener('click', (event) => {\n\t\t\tthis.showPlayerDeck.notify(event.target);\n\n\t\t\tthis.openCloseOverlay(event.target)\n\t\t});\n\n\t\tthis.playersDeckClose.addEventListener('click', (event) => {\n\t\t\tthis.onClosePileCards.notify();\n\n\t\t\tthis.openCloseOverlay(event.target);\n\t\t});\n\n\t\tthis.endTurnBtn.addEventListener('click', () => this.endTurn.notify());\n\n\t\tthis.soundOffOnIcon.addEventListener('click', () => this.soundOffOn.notify());\n\n\t\tthis.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\n\t\t\tthis.showMenu()\n\t\t});\n\n\t\tthis.menu.addEventListener('click', (event) => this.navigateGame(event.target));\n\n\t\t[...this.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', forbidClick);\n\n\t\twindow.addEventListener('beforeunload', warningUnload);\n\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.drawCards(card, place));\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.selectionEnd.attach(() => this.selectionEndUpdate());\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.removeCards.attach((cards, place) => this.extraCardsToRemove(cards, place));\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.choosePlayerInfo.attach((text) => this.playerChooseInfoUpdate(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.updatePlayersNames.attach((name1, name2) => this.playerNameUpdate(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.updatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.playerModelsUpdate(modelPlayer1, modelPlayer2));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.removeActionCard.attach((card) => this.deleteActionCard(card));\n\n\t\tthis.boardModel.createAnimation.attach((querySelector, amount) => this.createAnimation(querySelector, amount));\n\n\t\tthis.gameModel.endTurnAnimation.attach((btnSide, textInfo) => this.endTurnAnimation(btnSide, textInfo));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tif (localStorage.getItem('gameData')) {\n\t\t\tthis.checkRestoreGame();\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.onLoadCreate.notify();\n\t\t}\n\t};\n\n\tdrawCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.deckWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.cardInHandField.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.cardsChooseCounter.textContent = '0';\n\n\t\tthis.cardsChooseCounter.style = 'color: white';\n\t};\n\n\textraCardsToRemove(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.deckWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.cardInHandField.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteActionCard(card) {\n\t\tthis.cardInHandField.removeChild(card);\n\t}\n\n\tcounterUpdate(info) {\n\t\tthis.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\tselectionEndUpdate() {\n\t\tthis.deckWrapper.style.display = 'none';\n\n\t\tthis.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\tplayerChooseInfoUpdate(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\tplayerNameUpdate(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\tplayerModelsUpdate(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif(this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\tcreateAnimation(querySelector, amount) {\n\t\tcreateCardAnimation(querySelector, amount);\n\t}\n\n\tendTurnAnimation(btnSide, textInfo) {\n\t\tendTurnAnimation(btnSide);\n\n\t\tthis.playersTurnInfo.textContent = textInfo;\n\t}\n\n\tshowMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateGame(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tthis.saveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckRestoreGame() {\n\t\tconst hash = window.location.hash;\n\t\tconst state = decodeURIComponent(hash.substr(1));\n\n\t\tif (state === 'restoredGame') {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-animation');\n\t\t\tthis.playersDeckClose.classList.add('hidden');\n\n\t\t\tconst divEl = document.createElement('div');\n\n\t\t\tdivEl.className = 'confirm-continue';\n\t\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\t\tconst choiceYes = document.createElement('button');\n\n\t\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\t\tchoiceYes.textContent = 'Yes';\n\n\t\t\tconst choiceNo = document.createElement('button');\n\n\t\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\t\tchoiceNo.textContent = 'No';\n\n\t\t\tdivEl.appendChild(choiceYes);\n\t\t\tdivEl.appendChild(choiceNo);\n\n\t\t\tthis.playersOverlay.appendChild(divEl);\n\n\t\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.doContinueDecision(event.target));\n\t\t}\n\t}\n\n\tdoContinueDecision(eventTarget) {\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\tthis.playersOverlay.removeChild(divEl);\n\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\t\t\t\tthis.playersDeckClose.classList.remove('hidden');\n\n\t\t\t\tthis.onLoadCreate.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-animation');\n\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\tdragCardStartAnimation(eventTarget) {\n\t\tplaySoundEffect('.drag-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\tsetTimeout(() => eventTarget.classList.add('invisible'), 0);\n\n\t\t\tthis.cardsPlayField.classList.add('pulse-animation');\n\t\t}\n\t}\n\n\tdragCardEndAnimation(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\teventTarget.classList.remove('invisible');\n\t\t}\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\tdragCardEnterAnimation(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.cardsPlayField.classList.add('pulse-animation-enter');\n\t}\n\n\tdeletePlayfieldAnimation() {\n\t\tthis.cardsPlayField.classList.remove('pulse-animation-enter');\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\t// подсветка выбранных карт\n\tcardChooseAnim(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.deckWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio')\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.counterUpdate(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandAdd(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandRemove(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\topenCloseOverlay(target) {\n\t\tif(target.classList.contains('player-1__pile-of-card') || target.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-pile-animation');\n\n\t\t\tplaySoundEffect('.overlay-open-audio');\n\t\t}\n\n\t\tif(target.classList.contains('players-overlay__close')) {\n\t\t\tthis.playersOverlay.classList.remove('fade-in-pile-animation');\n\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\tplaySoundEffect('.overlay-close-audio');\n\t\t}\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.defineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('submitCardCheckChoose')) {\n\t\t\tthis.boardView.submitCardCheckChoose.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('touchCardStart')) {\n\t\t\tthis.boardView.touchCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.startRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tactionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\n\t\tthis.gameModel.setTextTurnInfo();\n\t}\n\n\tonSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tstartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tplaySoundEffect,\n\tcreateCardAnimation,\n\tdiscardCardAnimation,\n\tnotEnoughStaminaAnimation\n} from '../animation_and_sound_effects/animation.js';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.playerViewUpdate = new Events();\n\t\tthis.cardDraw = new Events();\n\t\tthis.cardDiscard = new Events();\n\t\tthis.actionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.playerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.playerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t(this.gameModel.playerOneTurn) ? notEnoughStaminaAnimation('player1') : notEnoughStaminaAnimation()\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.cardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tthis.cardDiscard.notify(element)\n\t\t}\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judjment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.actionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tattackAnimation, attackInDirectionAnimation, blockAnimation,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standardAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\n\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tconst playerContainer = container;\n\n\t\tthis.updateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.actionAnimation.attach(() => this.doAnimation());\n\t\tthis.playerTwoModel.actionAnimation.attach(() => this.doAnimation());\n\n\t\tthis.gameModel.selectionEnd.attach(() => {\n\t\t\tthis.updateViewHP();\n\t\t\tthis.updateViewDef();\n\t\t\tthis.updateViewStamina();\n\t\t})\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\tupdateViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\tupdateViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-positive-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-positive-animation');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-positive-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-positive-animation', 0);\n\t\t}\n\t};\n\n\tupdateViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damage-number-animation', resultContent);\n\t};\n\n\tdoAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack-animation', './images/attack-effects/warrior-attack.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', './images/icons/icon_Block.png');\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', './images/attack-effects/smash.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', './images/attack-effects/smash.png');\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', './images/attack-effects/smash.png');\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', './images/attack-effects/anger.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', './images/attack-effects/reach-heaven.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', './images/icons/icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', './images/attack-effects/anger.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateViewStamina();\n\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandardAttackAnimation(activePlayerUI, 'shield-animation', './images/attack-effects/bloodletting.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\n\t\t\t\tthis.updateViewHP();\n\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', './images/attack-effects/refresh-stamina.svg');\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', './images/icons/icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', './images/attack-effects/mageEffect.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack-animation', './images/attack-effects/warrior-attack.png', 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', './images/attack-effects/serpent_ring.png');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warrior-ultimate-animation', './images/attack-effects/flash.png', '.flash-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', './images/attack-effects/daggers.svg', '.backstab-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mage-ultimate-animation', './images/attack-effects/mage-attack.png', '.mage-ultimate-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judjment':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', './images/attack-effects/judjment.svg', '.judj-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('doCardAction')) {\n\t\t\tthis.boardView.doCardAction.attach((priority) => this.playCard(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('updateInitialValue')) {\n\t\t\tthis.playersView.updateInitialValue.attach(() => this.updateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tplayCard(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tupdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tonSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {playPauseBackgroundAudio} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.createCard(card, place));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('dropEvent')) {\n\t\t\tthis.boardView.dropEvent.attach(() => this.deleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.createCardsInHand());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.showPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onClosePileCards')) {\n\t\t\tthis.boardView.onClosePileCards.attach(() => this.deleteOverlayCards());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionContinue')) {\n\t\t\tthis.gameModel.selectionContinue.attach(() => this.createCard());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionEnd')) {\n\t\t\tthis.gameModel.selectionEnd.attach((restoredCards) => this.createCardsInHand(restoredCards));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player1.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player2.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player1.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player2.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('soundOffOn')) {\n\t\t\tthis.boardView.soundOffOn.attach(() => this.turnOnOfSound());\n\t\t}\n\t}\n\n\tcreateCard() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tcreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tdeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\tdeleteOverlayCards() {\n\t\tthis.boardModel.removeExtraCards('overlay');\n\t}\n\n\taddCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tshowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tturnOnOfSound() {\n\t\tplayPauseBackgroundAudio();\n\t}\n}\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, endGame} from './modules/observerModel';\n\nconst gameObserver = new Game();\n\nconst boardModel = new Board(gameObserver);\n\nconst boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nconst player1 = new Players(gameObserver, boardModel);\n\nconst player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(playersView.playerOneHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(playersView.playerTwoHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(boardView.battleField, {\n\tattributes: true\n});\n\nexport {gameObserver, boardModel, boardView, player1, player2};\n"],"sourceRoot":""}
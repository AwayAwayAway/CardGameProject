{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/preloadedMediaContent.js","webpack://cardgameproject/./js/modules/preloadMediaModel.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","media","skillCollectionLinks","warrior","strike_w","bash","anger","bodySlam","perfectedStrike","bludgeon","defend_w","armaments","ironWave","warcry","bloodletting","entrench","rogue","strike_r","daggerThrow","flechettes","riddleWithHoles","slice","quickSlash","survivor","deflect","backFlip","prepared","expertise","dash","mage","strike_m","cutThroughFate","reachHeaven","signatureMove","tantrum","judgment","masterReality","defend_m","meditate","thirdEye","nirvana","alpha","animationCollectionLinks","daggersSvg","flash","judgmentSvg","mageAttack","mageEffect","refreshStamina","serpentRing","smash","warriorAttack","warriorSmash","defend","warriorSlash","audioCollectionLinks","backStab","bashAttack","battleMainTheme","btnClick","btnHover","cardRelease","cardGrab","cardSelected","confirmSucces","confirmFailed","discardCard","endTurn","judj","magePunch","mageSelected","mageStrong","mageUltimate","mainMenuTheme","overlayClose","overlayOpen","pushCard","rogueAttack","rogueSelected","strikeAttack","victory","warriorSelected","cards","animation","audio","init","preloadSkillImages","preloadAudio","object","tempObeject","test","temp","document","createElement","data","img","Image","src","Audio","skillCollection","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","Math","floor","random","shakeAnimation","queryElement","direction","element","querySelector","classList","remove","setTimeout","add","createCardAnimation","amount","elementAnim","i","contains","playSoundEffect","discardCardAnimation","attackInDirectionAnimation","container","blockAnimation","className","block","parentElement","removeChild","image","appendChild","attackAnimation","style","transform","window","navigator","vibrate","standardAttackAnimation","ultimateSkillAnimation","overlay","soundEffect","currentTime","play","notEnoughStaminaAnimation","player","activePlayerUI","divEl","fistBubble","secondBubble","thirdBubble","innerHTML","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","restoredGameData","playersInfo","dragCard","tempCard","onSelectionEnd","onSelectionContinue","onChangePlayerInfo","onUpdatePlayersNames","onUpdatePlayersModels","onEndTurnAnimation","onGameStart","onRestoredGameFailed","onSaveGameData","location","hash","substr","readGameDataFromServer","notify","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","localStorage","getItem","JSON","parse","playerOneName","playerTwoName","player1","player2","counter","getElementsByClassName","pushCardsIntoCollection","setTurnPriority","checkCardsSelectionEnd","querySelectorAll","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","dataInfo","search","j","setTextTurnInfo","eventTarget","find","savedInfo","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","player1Name","player2Name","player1Class","player2Class","saveGameDataToServer","activePlayerHand","savedGameData","fetch","method","headers","body","stringify","gameSaved","then","res","ok","console","log","self","json","results","Board","model","gameModel","currentHand","deckWrapper","playersDeck","onCreateCards","onRemoveCards","onRemoveActionCard","onCreateCardAnimation","playerClassInfo","removeExtraCards","createCards","card","appendPlace","draggable","elDiv","setAttribute","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","forbidSaveConcede","addEventListener","forbidClick","hideInterfaceElements","boardView","pause","proposePlayAgain","textContent","choiceYes","choiceNo","removeEventListener","warningUnload","reload","display","title","decodeURIComponent","event","preventDefault","returnValue","stopPropagation","deleteSave","gameFinished","BoardView","board","game","selector","boardSelector","acceptChoiceBtn","cardsChooseCounter","cardInHandField","battleField","endTurnBtn","playersTurnInfo","cardsPlayField","soundOffOnIcon","playersOverlay","playersDeckClose","menu","menuIcon","playerOneCollection","playerTwoCollection","touchEvent","coordinateY","touches","pageY","target","onTouchCardStart","touchEnd","comparison","parseFloat","changedTouches","onDropCard","onDropCardAction","onLoadCreate","onDefineCards","onCheckChosenCards","onGrabCardStart","onEndTurn","onClosePileCards","onShowPlayerDeck","onSoundSwitch","onSaveGameProgress","onRestoreGameData","onRestoreGameDataRejected","onConcede","renderCardSelected","renderCardSelectedInHand","renderCardSelectedOutHand","renderDragCardStart","renderDragCardEnd","renderDragCardEnterDrop","removeDropFieldAnimation","renderPlayerCardCollection","renderBattleMenu","navigateOnBattlefield","getElementsByTagName","button","attach","renderBattlefield","text","renderPlayerChooseInfo","name1","name2","renderPlayerName","modelPlayer1","modelPlayer2","renderPlayerModels","renderCards","renderDeletedCards","renderDeletedActionCard","renderCreateCardAnimation","btnSide","textInfo","renderEndTurnAnimation","restoreRequest","renderRestoreError","state","renderSaveGameResult","renderRestoreNotification","toggle","counterInfo","number","color","renderCardCounterInfo","player1Model","player2Model","side","turnAnnouncer","removeProperty","left","right","endTurnAnimation","menuList","split","doConcede","renderRestoreGameDecision","iEl","GameController","view","doDefineCards","doCardCheckChoose","doInitActionCard","doEndTurn","doSaveGameData","doStartRestoreData","doStartGame","definePlayersCardSet","initActionCard","saveGameData","doRestoreGameData","Players","onPlayerViewUpdate","onCardDraw","onCardDiscard","onCardActionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","newTemp","parseInt","pull","onDrawArray","randomDiscard","attackThroughDefendPoints","undefined","abs","randomCardDiscard","massiveRandomDraw","cardRemove","savedData","PlayersView","playerOneModel","playerTwoModel","playerContainer","onUpdateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","renderViewHP","renderViewStamina","renderAnimation","renderWholeUI","width","passivePlayerUI","content","calcDP","damage","renderViewDef","updateDamageNumbers","animationPromise","timer","Promise","resolve","reject","amountEffect","multipleAttackAnimation","PlayersController","playerView","playersView","priority","doPlayCardAction","doUpdateInitialValue","doSavePlayerData","doAction","updateInitialValues","BoardController","playerModel1","playerModel2","doCreateCardsForChoose","restoredCards","doCreateCardsInHand","doDeleteActionCard","doShowPlayersDeck","doDeleteOverlayCards","doSkillCreateCardInHand","doDeleteRandomCard","doTurnOnOfSound","createCardsForChoose","pullRandomCardsInHand","deletePlayedCard","restoreHand","showCardsForPlayers","backAudio","soundOffOn","paused","winConditionObserver","MutationObserver","mutations","mutation","childNodes","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","import Media from './modules/preloadMediaModel';\r\n\r\nexport const media = new Media();","export default class Media {\r\n\tconstructor() {\r\n\t\tthis.skillCollectionLinks = {\r\n\t\t\twarrior: {\r\n\t\t\t\tstrike_w: './images/cards/warrior/strike.png',\r\n\t\t\t\tbash: './images/cards/warrior/bash.png',\r\n\t\t\t\tanger: './images/cards/warrior/anger.png',\r\n\t\t\t\tbodySlam: './images/cards/warrior/bodySlam.png',\r\n\t\t\t\tperfectedStrike: './images/cards/warrior/perfectedStrike.png',\r\n\t\t\t\tbludgeon: './images/cards/warrior/bludgeon.png',\r\n\t\t\t\tdefend_w: './images/cards/warrior/defend_w.png',\r\n\t\t\t\tarmaments: './images/cards/warrior/armaments.png',\r\n\t\t\t\tironWave: './images/cards/warrior/ironWave.png',\r\n\t\t\t\twarcry: './images/cards/warrior/warcry.png',\r\n\t\t\t\tbloodletting: './images/cards/warrior/bloodletting.png',\r\n\t\t\t\tentrench: './images/cards/warrior/entrench.png'\r\n\t\t\t},\r\n\t\t\trogue: {\r\n\t\t\t\tstrike_r: './images/cards/rogue/strike_G.png',\r\n\t\t\t\tdaggerThrow: './images/cards/rogue/r_dagger-throw.png',\r\n\t\t\t\tflechettes: './images/cards/rogue/flechettes.png',\r\n\t\t\t\triddleWithHoles: './images/cards/rogue/riddleWithHoles.png',\r\n\t\t\t\tslice: './images/cards/rogue/slice.png',\r\n\t\t\t\tquickSlash: './images/cards/rogue/quickSlash.png',\r\n\t\t\t\tsurvivor: './images/cards/rogue/survivor.png',\r\n\t\t\t\tdeflect: './images/cards/rogue/deflect.png',\r\n\t\t\t\tbackFlip: './images/cards/rogue/backflip.png',\r\n\t\t\t\tprepared: './images/cards/rogue/prepared.png',\r\n\t\t\t\texpertise: './images/cards/rogue/expertise.png',\r\n\t\t\t\tdash: './images/cards/rogue/dash.png'\r\n\t\t\t},\r\n\t\t\tmage: {\r\n\t\t\t\tstrike_m: './images/cards/mage/strike_P.png',\r\n\t\t\t\tcutThroughFate: './images/cards/mage/cutThroughFate.png',\r\n\t\t\t\treachHeaven: './images/cards/mage/reachHeaven.png',\r\n\t\t\t\tsignatureMove: './images/cards/mage/signatureMove.png',\r\n\t\t\t\ttantrum: './images/cards/mage/tantrum.png',\r\n\t\t\t\tjudgment: './images/cards/mage/judgment.png',\r\n\t\t\t\tmasterReality: './images/cards/mage/masterReality.png',\r\n\t\t\t\tdefend_m: './images/cards/mage/defend_P.png',\r\n\t\t\t\tmeditate: './images/cards/mage/meditate.png',\r\n\t\t\t\tthirdEye: './images/cards/mage/thirdEye.png',\r\n\t\t\t\tnirvana: './images/cards/mage/nirvana.png',\r\n\t\t\t\talpha: './images/cards/mage/alpha.png',\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.animationCollectionLinks = {\r\n\t\t\tanger: './images/attack-effects/anger.png',\r\n\t\t\tbloodletting: './images/attack-effects/bloodletting.png',\r\n\t\t\tdaggersSvg: './images/attack-effects/daggers.svg',\r\n\t\t\tflash: './images/attack-effects/flash.png',\r\n\t\t\tjudgmentSvg: './images/attack-effects/judgment.svg',\r\n\t\t\tmageAttack: './images/attack-effects/mage-attack.png',\r\n\t\t\tmageEffect: './images/attack-effects/mage-effect.png',\r\n\t\t\treachHeaven: './images/attack-effects/reach-heaven.png',\r\n\t\t\trefreshStamina: './images/attack-effects/refresh-stamina.svg',\r\n\t\t\tserpentRing: './images/attack-effects/serpent-ring.png',\r\n\t\t\tsmash: './images/attack-effects/smash.png',\r\n\t\t\twarriorAttack: './images/attack-effects/warrior-attack.png',\r\n\t\t\twarriorSmash: './images/attack-effects/warrior-smash.png',\r\n\t\t\tdefend: './images/icons/icon_Block.png',\r\n\t\t\twarriorSlash: './images/attack-effects/warrior-second-attack.png'\r\n\t\t};\r\n\r\n\t\tthis.audioCollectionLinks = {\r\n\t\t\tanger: './sounds/anger.ogg',\r\n\t\t\tbackStab: './sounds/backstab.ogg',\r\n\t\t\tbashAttack: './sounds/bash-attack.ogg',\r\n\t\t\tbattleMainTheme: './sounds/battle-main-theme.ogg',\r\n\t\t\tbloodletting: './sounds/bloodletting.ogg',\r\n\t\t\tbtnClick: './sounds/btn-click.ogg',\r\n\t\t\tbtnHover: './sounds/btn-hover.ogg',\r\n\t\t\tcardRelease: './sounds/card-grab-cancel.ogg',\r\n\t\t\tcardGrab: './sounds/card-grabbed.ogg',\r\n\t\t\tcardSelected: './sounds/card-selected.ogg',\r\n\t\t\tconfirmSucces: './sounds/confirm.ogg',\r\n\t\t\tconfirmFailed: './sounds/confirm-failed.ogg',\r\n\t\t\tdefend: './sounds/defend.ogg',\r\n\t\t\tdiscardCard: './sounds/discard-card.ogg',\r\n\t\t\tendTurn: './sounds/end-turn.ogg',\r\n\t\t\texpertise: './sounds/expertice.ogg',\r\n\t\t\tflash: './sounds/flash.ogg',\r\n\t\t\tironWave: './sounds/ironwave.ogg',\r\n\t\t\tjudj: './sounds/judj.ogg',\r\n\t\t\tmageAttack: './sounds/mage-attack.ogg',\r\n\t\t\tmagePunch: './sounds/mage-punch.ogg',\r\n\t\t\tmageSelected: './sounds/mage-selected.ogg',\r\n\t\t\tmageStrong: './sounds/mage-strong.ogg',\r\n\t\t\tmageUltimate: './sounds/mage-ultimate.ogg',\r\n\t\t\tmainMenuTheme: './sounds/main-menu-theme.ogg',\r\n\t\t\tmeditate: './sounds/meditate.ogg',\r\n\t\t\toverlayClose: './sounds/overlay-close.ogg',\r\n\t\t\toverlayOpen: './sounds/overlay-open.ogg',\r\n\t\t\tpushCard: './sounds/push-card.ogg',\r\n\t\t\trogueAttack: './sounds/rogue-attack.ogg',\r\n\t\t\trogueSelected: './sounds/rogue-selected.ogg',\r\n\t\t\tstrikeAttack: './sounds/strike-attack.ogg',\r\n\t\t\tvictory: './sounds/victory.ogg',\r\n\t\t\twarcry: './sounds/warcry.ogg',\r\n\t\t\twarriorSelected: './sounds/warrior-selected.ogg'\r\n\t\t};\r\n\r\n\t\tthis.cards = null;\r\n\r\n\t\tthis.animation = null;\r\n\r\n\t\tthis.audio = null;\r\n\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.cards = {\r\n\t\t\twarrior: this.preloadSkillImages(this.skillCollectionLinks.warrior),\r\n\t\t\trogue: this.preloadSkillImages(this.skillCollectionLinks.rogue),\r\n\t\t\tmage: this.preloadSkillImages(this.skillCollectionLinks.mage),\r\n\t\t};\r\n\r\n\t\tthis.animation = this.preloadSkillImages(this.animationCollectionLinks);\r\n\r\n\t\tthis.audio = this.preloadAudio(this.audioCollectionLinks);\r\n\t}\r\n\r\n\tpreloadSkillImages(object) {\r\n\t\tlet tempObeject = {};\r\n\r\n\t\tfor (let key in object) {\r\n\t\t\tlet regex = /(svg)$/ig;\r\n\r\n\t\t\tif (regex.test(key)) {\r\n\t\t\t\tlet temp = document.createElement('object');\r\n\r\n\t\t\t\ttemp.data = object[key];\r\n\r\n\t\t\t\ttempObeject[key] = temp;\r\n\t\t\t} else {\r\n\t\t\t\tlet img = new Image();\r\n\r\n\t\t\t\timg.src = object[key];\r\n\r\n\t\t\t\ttempObeject[key] = img;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn tempObeject;\r\n\t};\r\n\r\n\tpreloadAudio(object) {\r\n\t\tlet tempObeject = {};\r\n\r\n\t\tfor (let key in object) {\r\n\t\t\tlet audio = new Audio();\r\n\r\n\t\t\taudio.src = object[key];\r\n\r\n\t\t\ttempObeject[key] = audio;\r\n\r\n\t\t}\r\n\r\n\t\treturn tempObeject;\r\n\t};\r\n}","import Cards from './modules/cardsModel';\nimport {gameObserver, boardModel} from './game';\nimport {media} from './preloadedMediaContent';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, media.cards.warrior.strike_w, 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, media.cards.warrior.bash, 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, media.cards.warrior.anger, 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 40) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, media.cards.warrior.bodySlam, 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfectedStrike = new Cards(4, 'attackAddEffect', 1, 6, media.cards.warrior.perfectedStrike, 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, media.cards.warrior.bludgeon, 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, media.cards.warrior.defend_w, 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, media.cards.warrior.armaments, 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, media.cards.warrior.ironWave, 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, media.cards.warrior.warcry, 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, media.cards.warrior.bloodletting, 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, media.cards.warrior.entrench, 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, media.cards.rogue.strike_r, 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, media.cards.rogue.daggerThrow, 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, media.cards.rogue.flechettes, 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, media.cards.rogue.riddleWithHoles, 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, media.cards.rogue.slice, 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, media.cards.rogue.quickSlash, 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, media.cards.rogue.survivor, 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, media.cards.rogue.deflect, 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 1, media.cards.rogue.backFlip, 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, media.cards.rogue.prepared, 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, media.cards.rogue.expertise, 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, media.cards.rogue.dash, 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, media.cards.mage.strike_m, 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, media.cards.mage.cutThroughFate, 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, media.cards.mage.reachHeaven, 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, media.cards.mage.signatureMove, 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, media.cards.mage.tantrum, 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judgment = new Cards(5, 'attackAddEffect', 2, 0, media.cards.mage.judgment, 'judgment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, media.cards.mage.masterReality, 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, media.cards.mage.defend_m, 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, media.cards.mage.meditate, 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, media.cards.mage.thirdEye, 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, media.cards.mage.nirvana, 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, media.cards.mage.alpha, 'alpha');\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfectedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judgment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n\n","import {media} from '../preloadedMediaContent';\n\nconst loadingScreenAnimation = target => {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\n\t\t\tbreak;\n\t}\n};\n\nconst playPauseBackgroundAudio = () => {\n\t// const hash = window.location.hash;\n\tconst state = decodeURIComponent(window.location.hash.substr(1));\n\tconst soundOffOn = document.querySelector('.sound-icon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t} else {\n\t\tbackAudio.pause();\n\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t}\n};\n\nconst checkBackgroundAudio = querySelector => {\n\tconst currentHash = decodeURIComponent(window.location.hash.substr(1));\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\tconst soundOffOn = document.querySelector(querySelector);\n\n\tswitch (currentHash) {\n\t\tcase 'battle-field':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'restoredGame':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'main-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'choose-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tif ([...allAudio].every(element => element.paused)) {\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t} else {\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t}\n};\n\nconst shakeAnimation = (queryElement, direction = 'horizontal') => {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shake-x');\n\n\t\t\tsetTimeout(() => element.classList.add('shake-x'), 0);\n\n\t\t\tsetTimeout(() => element.classList.remove('shake-x'), 400);\n\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shake-y');\n\n\t\t\tsetTimeout(() => element.classList.add('shake-y'), 0);\n\n\t\t\tsetTimeout(() => element.classList.remove('shake-y'), 400);\n\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shake-mix');\n\n\t\t\tsetTimeout(() => element.classList.add('shake-mix'), 0);\n\n\t\t\tsetTimeout(() => element.classList.remove('shake-mix'), 400);\n\n\t\t\tbreak;\n\t}\n};\n\nconst createCardAnimation = (querySelector, amount) => {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('card-draw-animation')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('card-draw-animation');\n\n\t\t\t\t\tplaySoundEffect(media.audio.pushCard);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('card-draw-animation');\n\n\t\t\t\tplaySoundEffect(media.audio.pushCard);\n\t\t\t}, 250 * index));\n\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('card-draw-animation'));\n\n\t\t\tbreak;\n\t}\n};\n\nconst discardCardAnimation = querySelector => {\n\tquerySelector.classList.add('card-discard-animation');\n};\n\nconst endTurnAnimation = side => {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tbutton.style.removeProperty('right');\n\t\t\tbutton.style.left = '2%';\n\n\t\t\tbreak;\n\t\tcase 'right':\n\n\t\t\tbutton.style.removeProperty('left');\n\t\t\tbutton.style.right = '2%';\n\n\t\t\tbreak;\n\t}\n\n\tbutton.style.display = 'flex';\n\n\tbutton.classList.add('end-turn-animation');\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 1600);\n\n\tsetTimeout(() => button.classList.remove('end-turn-animation'), 1900);\n};\n\nconst attackInDirectionAnimation = (querySelector, direction) => {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attack-right-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-right-animation'), 1000);\n\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attack-left-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-left-animation'), 1000);\n\n\t\t\tbreak;\n\t}\n};\n\nconst blockAnimation = (querySelector, className, src) => {\n\tconst block = document.querySelector(`.${className}`);\n\n\tif (block) {\n\t\tblock.parentElement.removeChild(block);\n\t}\n\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n};\n\nconst attackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => (image) ? container.removeChild(image) : '', 600);\n};\n\nconst standardAttackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => (image) ? container.removeChild(image) : '', 400);\n};\n\nconst multipleAttackAnimation = (querySelector, className, src, amountEffect) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tsetTimeout(() => {\n\t\t\tif (i === 1) {\n\t\t\t\timage.style.transform = 'rotate(30deg)';\n\t\t\t} else if (i === 2) {\n\t\t\t\timage.style.transform = 'rotate(315deg)';\n\t\t\t}\n\n\t\t\timage.className = className;\n\n\t\t\tcontainer.appendChild(image);\n\n\t\t\twindow.navigator.vibrate([200]);\n\n\t\t\tplaySoundEffect(media.audio.strikeAttack);\n\t\t}, i * 300);\n\t}\n\n\tsetTimeout(() => (image) ? container.removeChild(image) : '', 1300);\n};\n\nconst ultimateSkillAnimation = (querySelector, className, src, audio) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = src;\n\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in-animation');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\twindow.navigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector);\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\n\t\toverlay.classList.add('fade-out-animation');\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in-animation');\n\t\toverlay.classList.remove('fade-out-animation');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1850);\n};\n\nconst playSoundEffect = audio => {\n\tconst soundEffect = audio;\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n};\n\nconst damageNumbersAnimation = (querySelector, className, content) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst divEl = document.createElement('div');\n\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n};\n\nconst notEnoughStaminaAnimation = (player) => {\n\tlet activePlayerUI;\n\tconst divEl = document.createElement('div');\n\tconst fistBubble = document.createElement('div');\n\tconst secondBubble = document.createElement('div');\n\tconst thirdBubble = document.createElement('div');\n\n\tif (player === 'player1') {\n\t\tactivePlayerUI = document.querySelector('.player-1__model').parentElement;\n\n\t\tdivEl.className = 'not-enough-stamina-player-1 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-1__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-1__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-1__third-bubble';\n\t} else {\n\t\tactivePlayerUI = document.querySelector('.player-2__model').parentElement;\n\n\t\tdivEl.className = 'not-enough-stamina-player-2 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-2__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-2__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-2__third-bubble';\n\t}\n\n\tthirdBubble.innerHTML = 'Not enough <span style = \"color: brown;\"> Energy</span>';\n\n\tdivEl.appendChild(fistBubble);\n\tdivEl.appendChild(secondBubble);\n\tdivEl.appendChild(thirdBubble);\n\n\tactivePlayerUI.appendChild(divEl);\n\n\tsetTimeout(() => divEl.classList.add('fade-out-animation'), 1500);\n\n\tsetTimeout(() => activePlayerUI.removeChild(divEl), 2000);\n};\n\nexport {\n\tloadingScreenAnimation, playPauseBackgroundAudio, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnimation, discardCardAnimation, endTurnAnimation, attackInDirectionAnimation,\n\tblockAnimation, attackAnimation, standardAttackAnimation, multipleAttackAnimation,\n\tultimateSkillAnimation, playSoundEffect, damageNumbersAnimation, notEnoughStaminaAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\nimport {media} from '../preloadedMediaContent';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;\n\t\tthis.passivePlayer = null;\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.restoredGameData = null;\n\n\t\tthis.playersInfo = {};\n\n\t\tthis.dragCard = null;\n\n\t\tthis.tempCard = null;\n\n\t\t// событие выбор карт завершен\n\t\tthis.onSelectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.onSelectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.onChangePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.onUpdatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.onUpdatePlayersModels = new Events();\n\n\t\t// анимация конца хода\n\t\tthis.onEndTurnAnimation = new Events();\n\n\t\tthis.onGameStart = new Events();\n\n\t\tthis.onRestoredGameFailed = new Events();\n\n\t\tthis.onSaveGameData = new Events();\n\t}\n\n\tstart() {\n\t\tif (window.location.hash.substr(1) === 'restoredGame') {\n\t\t\tthis.readGameDataFromServer();\n\t\t} else {\n\t\t\tthis.init();\n\t\t}\n\t};\n\n\tinit() {\n\t\tthis.onGameStart.notify();\n\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\n\t\tthis.setPlayersClasses();\n\n\t\tthis.setPlayersNames();\n\n\t\tthis.setPlayersModels();\n\n\t\tthis.setTextChooseInfo();\n\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\tsetPlayersNames() {\n\t\tthis.onUpdatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\tsetPlayersModels() {\n\t\tthis.onUpdatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\tsetTextTurnInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onEndTurnAnimation.notify('left', `${this.playersInfo.playerOneName}'s Turn`);\n\t\t} else {\n\t\t\tthis.onEndTurnAnimation.notify('right', `${this.playersInfo.playerTwoName}'s Turn`);\n\t\t}\n\t};\n\n\tsetActivePassivePlayer() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\tdefinePlayersCardSet() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect(media.audio.confirmFailed);\n\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.pushCardsIntoCollection()\n\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\tpushCardsIntoCollection() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\t\tlet tempCardChoosePlayer = [];\n\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t} else {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect(media.audio.confirmSucces);\n\t}\n\n\tcheckOnSelectedCards(dataInfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < dataInfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == dataInfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn temp;\n\t};\n\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.onSelectionEnd.notify();\n\n\t\t\tthis.setTextTurnInfo();\n\t\t} else {\n\t\t\tthis.onSelectionContinue.notify();\n\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst savedInfo = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData(),\n\t\t\tplayer1Name: this.playersInfo.playerOneName,\n\t\t\tplayer2Name: this.playersInfo.playerTwoName,\n\t\t\tplayer1Class: this.playersInfo.playerOneClass,\n\t\t\tplayer2Class: this.playersInfo.playerTwoClass,\n\t\t};\n\n\t\tthis.saveGameDataToServer(savedInfo);\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info);\n\n\t\treturn cardID;\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = this.restoredGameData.playerOneTurn;\n\t\tthis.playerTwoTurn = this.restoredGameData.playerTwoTurn;\n\t\tthis.playersInfo.playerOneClass = this.restoredGameData.player1Class;\n\t\tthis.playersInfo.playerTwoClass = this.restoredGameData.player2Class;\n\t\tthis.playersInfo.playerOneName = this.restoredGameData.player1Name;\n\t\tthis.playersInfo.playerTwoName = this.restoredGameData.player2Name;\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(this.restoredGameData.playerOnePullOfCards, this.restoredGameData.player1Class);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(this.restoredGameData.playerTwoPullOfCards, this.restoredGameData.player2Class);\n\n\t\tif (this.playerOneTurn) {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand, this.restoredGameData.player1Class);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand, this.restoredGameData.player2Class);\n\t\t}\n\n\t\tplayer1.doRestorePlayerData(this.restoredGameData, 'player1');\n\t\tplayer2.doRestorePlayerData(this.restoredGameData, 'player2');\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tthis.setTextTurnInfo();\n\n\t\tthis.setPlayersClasses();\n\n\t\tthis.setPlayersNames();\n\n\t\tthis.setPlayersModels();\n\n\t\tthis.onSelectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n\n\tsaveGameDataToServer(savedGameData) {\n\t\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2', {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tgameSaved: savedGameData\n\t\t\t})\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\tconsole.log('OK');\n\n\t\t\t\t\tthis.onSaveGameData.notify(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Not OK, save error');\n\t\t\t\t\tthis.onSaveGameData.notify(false);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\treadGameDataFromServer() {\n\t\tlet self = this;\n\n\t\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/', {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\treturn res.json();\n\t\t\t\t} else {\n\t\t\t\t\tthis.onRestoredGameFailed.notify();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\tif (data.results[0].gameSaved.hasOwnProperty('gameFinished')) {\n\t\t\t\t\tself.init();\n\t\t\t\t} else {\n\t\t\t\t\tself.restoredGameData = data.results[0].gameSaved;\n\n\t\t\t\t\tself.onGameStart.notify(true);\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\t\tthis.currentHand = null;\n\n\t\tthis.deckWrapper = document.querySelector('.cards-choose-field');\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onRemoveCards = new Events();\n\t\tthis.onRemoveActionCard = new Events();\n\t\tthis.onCreateCardAnimation = new Events();\n\t}\n\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.currentHand = [...this.cardInHand.children];\n\n\t\tif (eventTarget.classList.contains('player-1__pile-of-card')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (eventTarget.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = card.icon;\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t} else {\n\t\t\telDiv.setAttribute('draggable', 'false');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t// check on repeated cards\n\t\t// amount cards in hand\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t// total amount chosen cards\n\t\t\tlet n = Math.floor(Math.random() * 8);\n\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// create cards in players hand depends which turn\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\trestoreHand() {\n\t\tif([...this.cardInHand.children].length === 0) {\n\t\t\tthis.currentHand.forEach((element) => {\n\t\t\t\telement.className = 'cards cards-restored';\n\t\t\t\telement.setAttribute('draggable', 'true')\n\t\t\t});\n\n\t\t\tthis.currentHand.forEach((element) => this.cardInHand.appendChild(element));\n\t\t}\n\t}\n\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.deckWrapper.children];\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.onRemoveCards.notify(orderToRemove, place);\n\t}\n\n\t// delete played card if it pass check\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) { return; }\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.onRemoveActionCard.notify(this.gameModel.dragCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.onRemoveActionCard.notify(card);\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {gameObserver, boardView} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {media} from '../preloadedMediaContent';\n\nconst endGame = mutations => {\n\tlet mutation;\n\n\t(mutations[1]) ? mutation = mutations[1] : mutation = mutations[0]\n\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\n\t\tdeleteSave();\n\t}\n\n\tif (mutation['target'].classList.contains('player-2__hp-value')  && mutation.target.childNodes[0].data <= 0)  {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\n\t\tdeleteSave();\n\t}\n}\n\nconst allowSaveConcede = () => {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nconst forbidSaveConcede = () => {\n\tdocument.querySelector('.save-progress').addEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').addEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.remove('save-progress-allow');\n\tdocument.querySelector('.concede').classList.remove('concede-allow');\n}\n\nconst hideInterfaceElements = () => {\n\tboardView.cardInHandField.classList.add('hidden');\n\n\tboardView.endTurnBtn.classList.add('hidden');\n\n\tboardView.playerOneCollection.classList.add('hidden');\n\n\tboardView.playerTwoCollection.classList.add('hidden');\n\n\tdocument.querySelector('.background-music-battlefield').pause();\n\n\tplaySoundEffect(media.audio.victory);\n}\n\nconst proposePlayAgain = () => {\n\tconst divEl = document.createElement('div');\n\n\tdivEl.className = 'play-again';\n\tdivEl.textContent = 'Do you want to play one more battle?';\n\n\tconst choiceYes = document.createElement('button');\n\n\tchoiceYes.className = 'play-again__accept';\n\tchoiceYes.textContent = 'Yes';\n\n\tconst choiceNo = document.createElement('button');\n\n\tchoiceNo.className = 'play-again__reject';\n\tchoiceNo.textContent = 'No';\n\n\tdivEl.appendChild(choiceYes);\n\tdivEl.appendChild(choiceNo);\n\n\tboardView.boardSelector.appendChild(divEl);\n\n\tchoiceYes.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\twindow.location.reload();\n\t});\n\n\tchoiceNo.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\tboardView.playersTurnInfo.display= 'none';\n\n\t\tdivEl.style.display = 'none';\n\n\t\tdocument.title = 'Main menu';\n\n\t\tlocation.hash = decodeURIComponent('main-menu');\n\t});\n}\n\nconst warningUnload = event => {\n\tevent.preventDefault();\n\n\tevent.returnValue = '';\n}\n\nconst forbidClick = event => event.stopPropagation();\n\nconst deleteSave = () => {\n\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2', {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tgameSaved: {\n\t\t\t\tgameFinished: true\n\t\t\t}\n\t\t})\n\t})\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\tconsole.log('OK, deleted')\n\t\t\t} else {\n\t\t\t\tconsole.log('Not OK, error')\n\t\t\t}\n\t\t});\n}\n\nexport {endGame, allowSaveConcede, warningUnload, forbidClick}","import Events from './eventsModel';\nimport {player1, player2} from '../game';\nimport {media} from '../preloadedMediaContent';\nimport {warningUnload, forbidClick} from './observerModel';\nimport {\n\tcreateCardAnimation,\n\tendTurnAnimation,\n\tplaySoundEffect,\n\tshakeAnimation\n} from '../animation_and_sound_effects/animation';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\t\tthis.gameModel = game;\n\t\tthis.boardSelector = selector;\n\n\t\tthis.deckWrapper = this.boardSelector.querySelector('.cards-choose-field');\n\t\tthis.acceptChoiceBtn = this.boardSelector.querySelector('.players-draw-info__accept');\n\t\tthis.cardsChooseCounter = this.boardSelector.querySelector('.players-draw-info__count');\n\t\tthis.cardInHandField = this.boardSelector.querySelector('.card-in-hand-field');\n\t\tthis.battleField = this.boardSelector.querySelector('.battle-field');\n\t\tthis.endTurnBtn = this.boardSelector.querySelector('.end-of-turn-btn');\n\t\tthis.playersTurnInfo = this.boardSelector.querySelector('.players-action');\n\t\tthis.cardsPlayField = this.boardSelector.querySelector('.play-field');\n\t\tthis.soundOffOnIcon = this.boardSelector.querySelector('.sound-icon');\n\t\tthis.playersOverlay = this.boardSelector.querySelector('.players-overlay');\n\t\tthis.playersDeck = this.boardSelector.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = this.boardSelector.querySelector('.players-overlay__close');\n\t\tthis.menu = this.boardSelector.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tthis.playerOneCollection =this.boardSelector.querySelector('.player-1__pile-of-card');\n\t\tthis.playerTwoCollection =this.boardSelector.querySelector('.player-2__pile-of-card');\n\n\t\tthis.touchEvent = event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif (event.target.classList.contains('cards')) {\n\t\t\t\tthis.onTouchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touch-start-animation');\n\n\t\t\t\tplaySoundEffect(media.audio.cardGrab);\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend', function touchEnd(event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY) - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touch-start-animation');\n\n\t\t\t\t\t\tplaySoundEffect(media.audio.cardRelease);\n\n\t\t\t\t\t\tif (comparison > 170) {\n\t\t\t\t\t\t\tself.onDropCard.notify();\n\t\t\t\t\t\t\tself.onDropCardAction.notify(self.gameModel.playerOneTurn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.onCheckChosenCards = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.onGrabCardStart = new Events();\n\n\t\tthis.onTouchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.onDropCard = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.onDropCardAction = new Events();\n\n\t\tthis.onEndTurn = new Events();\n\n\t\tthis.onClosePileCards = new Events();\n\n\t\tthis.onShowPlayerDeck = new Events();\n\n\t\tthis.onSoundSwitch = new Events();\n\n\t\tthis.onSaveGameProgress = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onRestoreGameDataRejected = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tif ('ontouchstart' in window) {\n\t\t\tthis.cardInHandField.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\t\tthis.deckWrapper.addEventListener('touchstart', (event) => this.renderCardSelected(event));\n\t\t} else {\n\t\t\tthis.deckWrapper.addEventListener('click', (event) => this.renderCardSelected(event));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseover', (event) => this.renderCardSelectedInHand(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseout', (event) => this.renderCardSelectedOutHand(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.renderDragCardStart(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.onGrabCardStart.notify(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragend', (event) => this.renderDragCardEnd(event.target));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragenter', (event) => this.renderDragCardEnterDrop(event));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragover', (event) => event.preventDefault());\n\n\t\t\tthis.cardsPlayField.addEventListener('drop', (event) => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tthis.onDropCard.notify();\n\n\t\t\t\tthis.onDropCardAction.notify(this.gameModel.playerOneTurn);\n\n\t\t\t\tthis.removeDropFieldAnimation();\n\t\t\t});\n\t\t}\n\n\t\tthis.acceptChoiceBtn.addEventListener('click', () => {\n\t\t\tthis.onDefineCards.notify();\n\n\t\t\tthis.onCheckChosenCards.notify();\n\t\t});\n\n\t\tthis.battleField.addEventListener('click', (event) => {\n\t\t\tthis.onShowPlayerDeck.notify(event.target);\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.playersDeckClose.addEventListener('click', (event) => {\n\t\t\tthis.onClosePileCards.notify();\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.endTurnBtn.addEventListener('click', () => this.onEndTurn.notify());\n\n\t\tthis.soundOffOnIcon.addEventListener('click', () => this.onSoundSwitch.notify());\n\n\t\tthis.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect(media.audio.btnClick);\n\n\t\t\tthis.renderBattleMenu();\n\t\t});\n\n\t\tthis.menu.addEventListener('click', (event) => this.navigateOnBattlefield(event.target));\n\n\t\t[...this.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect(media.audio.btnHover));\n\t\t\tbutton.addEventListener('click', () => playSoundEffect(media.audio.btnClick));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', forbidClick);\n\n\t\twindow.addEventListener('beforeunload', warningUnload);\n\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderBattlefield());\n\n\t\tthis.gameModel.onChangePlayerInfo.attach((text) => this.renderPlayerChooseInfo(text));\n\n\t\tthis.gameModel.onUpdatePlayersNames.attach((name1, name2) => this.renderPlayerName(name1, name2));\n\n\t\tthis.gameModel.onUpdatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.renderPlayerModels(modelPlayer1, modelPlayer2));\n\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.renderCards(card, place));\n\n\t\tthis.boardModel.onRemoveCards.attach((cards, place) => this.renderDeletedCards(cards, place));\n\n\t\tthis.boardModel.onRemoveActionCard.attach((card) => this.renderDeletedActionCard(card));\n\n\t\tthis.boardModel.onCreateCardAnimation.attach((querySelector, amount) => this.renderCreateCardAnimation(querySelector, amount));\n\n\t\tthis.gameModel.onEndTurnAnimation.attach((btnSide, textInfo) => this.renderEndTurnAnimation(btnSide, textInfo));\n\n\t\tthis.gameModel.onGameStart.attach((restoreRequest) => this.init(restoreRequest));\n\n\t\tthis.gameModel.onRestoredGameFailed.attach(() => this.renderRestoreError());\n\n\t\tthis.gameModel.onSaveGameData.attach((state) => this.renderSaveGameResult(state));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit(restoreRequest) {\n\t\tif (restoreRequest) {\n\t\t\tthis.renderRestoreNotification();\n\t\t} else {\n\t\t\tthis.onLoadCreate.notify();\n\t\t}\n\t};\n\n\trenderCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.deckWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.cardInHandField.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.cardsChooseCounter.textContent = '0';\n\n\t\tthis.cardsChooseCounter.style = 'color: white';\n\t};\n\n\trenderCreateCardAnimation(querySelector, amount) {\n\t\tcreateCardAnimation(querySelector, amount);\n\t}\n\n\trenderCardSelected(event) {\n\t\tevent.preventDefault();\n\n\t\tlet target = event.target;\n\n\t\tif (target !== this.deckWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect(media.audio.cardSelected);\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.renderCardCounterInfo(counterInfo);\n\t}\n\n\trenderCardSelectedInHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\trenderCardSelectedOutHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\trenderDeletedCards(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.deckWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.cardInHandField.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\trenderDeletedActionCard(card) {\n\t\tthis.cardInHandField.removeChild(card);\n\t}\n\n\trenderBattlefield() {\n\t\tthis.deckWrapper.style.display = 'none';\n\n\t\tthis.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\trenderCardCounterInfo(info) {\n\t\tthis.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\trenderPlayerChooseInfo(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\trenderPlayerName(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\trenderPlayerModels(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\trenderEndTurnAnimation(btnSide, textInfo) {\n\t\tendTurnAnimation(btnSide);\n\n\t\tplaySoundEffect(media.audio.endTurn);\n\n\t\tthis.playersTurnInfo.textContent = textInfo;\n\t}\n\n\trenderBattleMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateOnBattlefield(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.onSaveGameProgress.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trenderRestoreNotification() {\n\t\tthis.playersOverlay.classList.remove('hidden');\n\t\tthis.playersOverlay.classList.add('fade-in-animation');\n\t\tthis.playersDeckClose.classList.add('hidden');\n\n\t\tconst divEl = document.createElement('div');\n\n\t\tdivEl.className = 'confirm-continue';\n\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\tconst choiceYes = document.createElement('button');\n\n\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\tchoiceYes.textContent = 'Yes';\n\n\t\tconst choiceNo = document.createElement('button');\n\n\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\tchoiceNo.textContent = 'No';\n\n\t\tdivEl.appendChild(choiceYes);\n\t\tdivEl.appendChild(choiceNo);\n\n\t\tthis.playersOverlay.appendChild(divEl);\n\n\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.renderRestoreGameDecision(event.target));\n\t}\n\n\trenderRestoreGameDecision(eventTarget) {\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\tthis.playersOverlay.removeChild(divEl);\n\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\t\tthis.playersDeckClose.classList.remove('hidden');\n\n\t\t\t\tthis.onRestoreGameDataRejected.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-animation');\n\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trenderDragCardStart(eventTarget) {\n\t\tplaySoundEffect(media.audio.cardGrab);\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\tsetTimeout(() => eventTarget.classList.add('invisible'), 0);\n\n\t\t\tthis.cardsPlayField.classList.add('pulse-animation');\n\t\t}\n\t}\n\n\trenderDragCardEnd(eventTarget) {\n\t\tplaySoundEffect(media.audio.cardRelease);\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\teventTarget.classList.remove('invisible');\n\t\t}\n\n\t\tthis.removeDropFieldAnimation();\n\t}\n\n\trenderDragCardEnterDrop(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.cardsPlayField.classList.add('pulse-animation-enter');\n\t}\n\n\tremoveDropFieldAnimation() {\n\t\tthis.cardsPlayField.classList.remove('pulse-animation-enter');\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\trenderPlayerCardCollection(target) {\n\t\tif (target.classList.contains('player-1__pile-of-card') || target.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-pile-animation');\n\n\t\t\tplaySoundEffect(media.audio.overlayOpen);\n\t\t}\n\n\t\tif (target.classList.contains('players-overlay__close')) {\n\t\t\tthis.playersOverlay.classList.remove('fade-in-pile-animation');\n\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\tplaySoundEffect(media.audio.overlayClose);\n\t\t}\n\t}\n\n\trenderRestoreError() {\n\t\tthis.deckWrapper.textContent = 'Game restoration failed, please reload page or go back to choose menu and start new Game'\n\t}\n\n\trenderSaveGameResult(state) {\n\t\tconst iEl = document.createElement('i');\n\n\t\tif(state) {\n\t\t\tiEl.className = \"fas fa-check save-progress-success\";\n\n\t\t\tsetTimeout(() => this.renderBattleMenu(), 800);\n\t\t} else {\n\t\t\tiEl.className = \"fas fa-times save-progress-failed\";\n\n\t\t\tshakeAnimation('.save-progress');\n\t\t}\n\n\t\tthis.boardSelector.querySelector('.save-progress').appendChild(iEl);\n\n\t\tsetTimeout(() => this.boardSelector.querySelector('.save-progress').removeChild(iEl), 1500);\n\t}\n\n\tdoConcede() {\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.doDefineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onCheckChosenCards')) {\n\t\t\tthis.boardView.onCheckChosenCards.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onGrabCardStart')) {\n\t\t\tthis.boardView.onGrabCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onTouchCardStart')) {\n\t\t\tthis.boardView.onTouchCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgress')) {\n\t\t\tthis.boardView.onSaveGameProgress.attach(() => this.doSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.doStartRestoreData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameDataRejected')) {\n\t\t\tthis.boardView.onRestoreGameDataRejected.attach(() => this.doStartGame());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdoDefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tdoInitActionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.setTurnPriority();\n\n\t\tthis.gameModel.setTextTurnInfo();\n\t}\n\n\tdoSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tdoStartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n\n\tdoStartGame() {\n\t\tthis.gameModel.init();\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tplaySoundEffect,\n\tcreateCardAnimation,\n\tdiscardCardAnimation,\n\tnotEnoughStaminaAnimation\n} from '../animation_and_sound_effects/animation.js';\nimport {media} from '../preloadedMediaContent';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.onPlayerViewUpdate = new Events();\n\t\tthis.onCardDraw = new Events();\n\t\tthis.onCardDiscard = new Events();\n\t\tthis.onCardActionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif (state) {\n\t\t\tthis.onPlayerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.onPlayerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect(media.audio.cardRelease);\n\n\t\t\t(this.gameModel.playerOneTurn) ? notEnoughStaminaAnimation('player1') : notEnoughStaminaAnimation();\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [...this.boardModel.cardInHand.children].map((element) => element.dataset.info);\n\n\t\tconst newTemp = tempIndex.map(element => parseInt(element, 10));\n\n\t\tlet pull = [...this.gameModel.playerOnePullOfCards].map((element) => element.id);\n\n\t\tlet onDrawArray = [];\n\n\t\t// check on repeated cards\n\t\tfor (let i = 0; i < card.effect - condition; i++) {\n\t\t\t// amount cards in hand\n\t\t\tlet n = Math.floor(Math.random() * pull.length);\n\n\t\t\tif (newTemp.indexOf(pull[n]) === -1 && onDrawArray.indexOf(pull[n]) === -1) {\n\t\t\t\tonDrawArray.push(pull[n]);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tonDrawArray = this.gameModel.checkOnSelectedCards(onDrawArray, this.gameModel.playerOneClass);\n\n\t\t\tfor (let i = 0; i < onDrawArray.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(onDrawArray[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tonDrawArray = this.gameModel.checkOnSelectedCards(onDrawArray, this.gameModel.playerTwoClass);\n\n\t\t\tfor (let i = 0; i < onDrawArray.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(onDrawArray[i]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect(media.audio.discardCard);\n\n\t\t\tsetTimeout(() => this.onCardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300);\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(element);\n\n\t\t\tplaySoundEffect(media.audio.discardCard);\n\n\t\t\tthis.onCardDiscard.notify(element);\n\t\t}\n\t}\n\n\tstandartAttack(card) {\n\t\tthis.attackThroughDefendPoints(card);\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judgment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards have common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\tthis.attackThroughDefendPoints(card);\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300);\n\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800);\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(), 600);\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tthis.attackThroughDefendPoints(card)\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() => this.randomCardDraw(), 300);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300);\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300);\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tattackThroughDefendPoints(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\t}\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t};\n\t}\n\n\tdoRestorePlayerData(savedData, player) {\n\t\tthis.healthPoints = savedData[player].healthPoints;\n\t\tthis.staminaPoints = savedData[player].staminaPoints;\n\t\tthis.defendPoints = savedData[player].defendPoints;\n\t\tthis.initialHP = savedData[player].initialHP;\n\t\tthis.initialDP = savedData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede');\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tattackAnimation, attackInDirectionAnimation, blockAnimation,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standardAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport {media} from '../preloadedMediaContent';\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tthis.playerContainer = container;\n\n\t\tthis.onUpdateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = this.playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = this.playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = this.playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = this.playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = this.playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = this.playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = this.playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = this.playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\t\tthis.playerTwoModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderWholeUI(false));\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\trenderViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\trenderViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-positive-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-positive-animation');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-positive-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-positive-animation', 0);\n\t\t}\n\t};\n\n\trenderViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damage-number-animation', resultContent);\n\t};\n\n\trenderWholeUI(damage, passivePlayerUI) {\n\t\tthis.renderViewHP();\n\t\tthis.renderViewDef();\n\t\tthis.renderViewStamina();\n\n\t\tif (damage) {\n\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t}\n\t}\n\n\trenderAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\t\tconst animationPromise = timer => {\n\t\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\t\tsetTimeout(() => resolve(), timer);\n\t\t\t})\n\n\t\t\treturn promise;\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack-animation', media.animation.warriorSlash);\n\n\t\t\t\tanimationPromise(200).then(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.strikeAttack);\n\n\t\t\t\t\treturn 'true';\n\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', media.animation.defend);\n\n\t\t\t\tplaySoundEffect(media.audio.defend);\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', media.animation.smash);\n\n\t\t\t\tanimationPromise(200).then(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.bashAttack);\n\n\t\t\t\t\treturn 'true';\n\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', media.animation.smash);\n\n\t\t\t\tplaySoundEffect(media.audio.magePunch);\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tanimationPromise(200).then(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', media.animation.smash);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.bashAttack);\n\n\t\t\t\t\treturn 'true';\n\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', media.animation.anger);\n\n\t\t\t\tanimationPromise(200).then(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.anger);\n\n\t\t\t\t\treturn 'true';\n\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', media.animation.reachHeaven);\n\n\t\t\t\tanimationPromise(200).then(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.mageStrong);\n\n\t\t\t\t\treturn 'true';\n\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', media.animation.defend);\n\n\t\t\t\tplaySoundEffect(media.audio.defend);\n\n\t\t\t\tanimationPromise(400).then(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', media.animation.anger);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.bashAttack);\n\n\t\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandardAttackAnimation(activePlayerUI, 'shield-animation', media.animation.bloodletting);\n\n\t\t\t\tanimationPromise(200).then(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.bloodletting);\n\n\t\t\t\t\treturn 'true';\n\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.renderViewHP();\n\n\t\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect(media.audio.warcry);\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', media.animation.refreshStamina);\n\n\t\t\t\tplaySoundEffect(media.audio.meditate);\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', media.animation.defend);\n\n\t\t\t\tplaySoundEffect(media.audio.defend);\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tanimationPromise(400).then(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', media.animation.mageEffect);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect(media.audio.mageAttack);\n\n\t\t\t\t\tthis.renderViewHP();\n\n\t\t\t\t\tthis.renderViewDef();\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t})\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack-animation', media.animation.warriorAttack, 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', media.animation.serpentRing);\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect(media.audio.warcry);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warrior-ultimate-animation', media.animation.flash, media.audio.flash);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', media.animation.daggersSvg, media.audio.backStab);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mage-ultimate-animation', media.animation.mageAttack, media.audio.mageUltimate);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judgment':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', media.animation.judgmentSvg, media.audio.judj);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('onDropCardAction')) {\n\t\t\tthis.boardView.onDropCardAction.attach((priority) => this.doPlayCardAction(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('onUpdateInitialValue')) {\n\t\t\tthis.playersView.onUpdateInitialValue.attach(() => this.doUpdateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgress')) {\n\t\t\tthis.boardView.onSaveGameProgress.attach(() => this.doSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tdoPlayCardAction(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\n\t\tthis.playerOneModel.updateInitialValues();\n\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoUpdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {playPauseBackgroundAudio} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.boardView = view;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.doCreateCardsForChoose(card, place));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionContinue')) {\n\t\t\tthis.gameModel.onSelectionContinue.attach(() => this.doCreateCardsForChoose());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionEnd')) {\n\t\t\tthis.gameModel.onSelectionEnd.attach((restoredCards) => this.doCreateCardsInHand(restoredCards));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onDropCard')) {\n\t\t\tthis.boardView.onDropCard.attach(() => this.doDeleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doCreateCardsInHand());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onShowPlayerDeck')) {\n\t\t\tthis.boardView.onShowPlayerDeck.attach((event) => this.doShowPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onClosePileCards')) {\n\t\t\tthis.boardView.onClosePileCards.attach(() => this.doDeleteOverlayCards());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player1.onCardDraw.attach((card) => this.doSkillCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player2.onCardDraw.attach((card) => this.doSkillCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player1.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player2.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSoundSwitch')) {\n\t\t\tthis.boardView.onSoundSwitch.attach(() => this.doTurnOnOfSound());\n\t\t}\n\t}\n\n\tdoCreateCardsForChoose() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tdoCreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tdoDeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdoDeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\tdoDeleteOverlayCards() {\n\t\tthis.boardModel.removeExtraCards('overlay');\n\n\t\tthis.boardModel.restoreHand();\n\t}\n\n\tdoSkillCreateCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tdoShowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tdoTurnOnOfSound() {\n\t\tplayPauseBackgroundAudio();\n\t}\n}\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, endGame} from './modules/observerModel';\n\nconst gameObserver = new Game();\n\nconst boardModel = new Board(gameObserver);\n\nconst boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nconst player1 = new Players(gameObserver, boardModel);\n\nconst player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nwinConditionObserver.observe(playersView.playerOneHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(playersView.playerTwoHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(boardView.battleField, {\n\tattributes: true\n});\n\nexport {gameObserver, boardModel, boardView, player1, player2};\n"],"sourceRoot":""}
{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/modules/preloadImages.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","preloadSkillImages","object","tempObeject","test","temp","document","createElement","data","img","Image","src","skillCollectionImages","warrior","strike_w","bash","anger","bodySlam","perfectedStrike","bludgeon","defend_w","armaments","ironWave","warcry","bloodletting","entrench","rogue","strike_r","daggerThrow","flechettes","riddleWithHoles","slice","quickSlash","survivor","deflect","backFlip","prepared","expertise","dash","mage","strike_m","cutThroughFate","reachHeaven","signatureMove","tantrum","judgment","masterReality","defend_m","meditate","thirdEye","nirvana","alpha","animationCollectionImages","daggersSvg","flash","judgmentSvg","mageAttack","mageEffect","refreshStamina","serpentRing","smash","warriorAttack","warriorSmash","defend","skillCollection","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","Math","floor","random","shakeAnimation","queryElement","direction","element","querySelector","classList","remove","setTimeout","add","createCardAnimation","amount","elementAnim","i","contains","playSoundEffect","discardCardAnimation","attackInDirectionAnimation","container","blockAnimation","className","parentElement","image","appendChild","removeChild","attackAnimation","style","transform","window","navigator","vibrate","standardAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","notEnoughStaminaAnimation","player","activePlayerUI","divEl","fistBubble","secondBubble","thirdBubble","innerHTML","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","playersInfo","dragCard","tempCard","onSelectionEnd","onSelectionContinue","onChangePlayerInfo","onUpdatePlayersNames","onUpdatePlayersModels","onEndTurnAnimation","init","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","localStorage","getItem","JSON","parse","notify","playerOneName","playerTwoName","player1","player2","cards","querySelectorAll","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","datainfo","search","j","setTextTurnInfo","eventTarget","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","console","log","setItem","stringify","activePlayerHand","tempData","Board","model","gameModel","currentHand","deckWrapper","playersDeck","onCreateCards","onRemoveCards","onRemoveActionCard","onCreateCardAnimation","playerClassInfo","removeExtraCards","createCards","card","appendPlace","draggable","elDiv","setAttribute","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","forbidSaveConcede","addEventListener","forbidClick","hideInterfaceElements","boardView","pause","removeItem","proposePlayAgain","textContent","choiceYes","choiceNo","removeEventListener","warningUnload","location","reload","display","title","hash","decodeURIComponent","event","preventDefault","returnValue","stopPropagation","BoardView","board","game","selector","boardSelector","acceptChoiceBtn","cardsChooseCounter","cardInHandField","battleField","endTurnBtn","playersTurnInfo","cardsPlayField","soundOffOnIcon","playersOverlay","playersDeckClose","menu","menuIcon","playerOneCollection","playerTwoCollection","touchEvent","self","coordinateY","touches","pageY","target","onTouchCardStart","touchEnd","comparison","parseFloat","changedTouches","onDropCard","onDropCardAction","onLoadCreate","onDefineCards","onCheckChosenCards","onGrabCardStart","onEndTurn","onClosePileCards","onShowPlayerDeck","onSoundSwitch","onSaveGameProgres","onRestoreGameData","onConcede","renderCardSelected","renderCardSelectedInHand","renderCardSelectedOutHand","renderDragCardStart","renderDragCardEnd","renderDragCardEnterDrop","removeDropFieldAnimation","renderPlayerCardCollection","renderBattleMenu","navigateOnBattlefield","getElementsByTagName","button","attach","renderBattlefield","text","renderPlayerChooseInfo","name1","name2","renderPlayerName","modelPlayer1","modelPlayer2","renderPlayerModels","renderCards","renderDeletedCards","renderDeletedActionCard","renderCreateCardAnimation","btnSide","textInfo","renderEndTurnAnimation","renderRestoreNotification","number","color","player1Model","player2Model","side","turnAnnouncer","removeProperty","left","right","endTurnAnimation","menuList","split","doConcede","renderRestoreGameDecision","toggle","counterInfo","renderCardCounterInfo","GameController","view","doDefineCards","doCardCheckChoose","doInitActionCard","doEndTurn","doSaveGameData","doStartRestoreData","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","onPlayerViewUpdate","onCardDraw","onCardDiscard","onCardActionAnimation","initialHP","initialDP","updateView","state","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","PlayersView","playerOneModel","playerTwoModel","playerContainer","onUpdateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","renderViewHP","renderViewStamina","renderAnimation","renderWholeUI","width","passivePlayerUI","content","calcDP","damage","renderViewDef","updateDamageNumbers","amountEffect","multipleAttackAnimation","PlayersController","playerView","playersView","priority","doPlayCardAction","doUpdateInitialValue","doSavePlayerData","doAction","endTurn","updateInitialValues","BoardController","playerModel1","playerModel2","doCreateCardsForChoose","restoredCards","doCreateCardsInHand","doDeleteActionCard","doShowPlayersDeck","doDeleteOverlayCards","doCreateCardInHand","doDeleteRandomCard","doTurnOnOfSound","createCardsForChoose","pullRandomCardsInHand","deletePlayedCard","restoreHand","showCardsForPlayers","backAudio","soundOffOn","substr","paused","winConditionObserver","MutationObserver","mutations","childNodes","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","const preloadSkillImages = object => {\r\n\tlet tempObeject = {};\r\n\r\n\tfor (let key in object) {\r\n\t\tlet regex = /(svg)$/ig;\r\n\r\n\t\tif(regex.test(key)) {\r\n\t\t\tlet temp = document.createElement('object');\r\n\r\n\t\t\ttemp.data = object[key];\r\n\r\n\t\t\ttempObeject[key] = temp;\r\n\t\t} else  {\r\n\t\t\tlet img = new Image();\r\n\r\n\t\t\timg.src = object[key];\r\n\r\n\t\t\ttempObeject[key] = img;\r\n\t\t}\r\n\t}\r\n\r\n\treturn tempObeject;\r\n};\r\n\r\nconst skillCollectionLinks = {\r\n\twarrior: {\r\n\t\tstrike_w: './images/cards/warrior/strike.png',\r\n\t\tbash: './images/cards/warrior/bash.png',\r\n\t\tanger: './images/cards/warrior/anger.png',\r\n\t\tbodySlam: './images/cards/warrior/bodySlam.png',\r\n\t\tperfectedStrike: './images/cards/warrior/perfectedStrike.png',\r\n\t\tbludgeon: './images/cards/warrior/bludgeon.png',\r\n\t\tdefend_w: './images/cards/warrior/defend_w.png',\r\n\t\tarmaments: './images/cards/warrior/armaments.png',\r\n\t\tironWave: './images/cards/warrior/ironWave.png',\r\n\t\twarcry: './images/cards/warrior/warcry.png',\r\n\t\tbloodletting: './images/cards/warrior/bloodletting.png',\r\n\t\tentrench: './images/cards/warrior/entrench.png'\r\n\t},\r\n\trogue: {\r\n\t\tstrike_r: './images/cards/rogue/strike_G.png',\r\n\t\tdaggerThrow: './images/cards/rogue/r_dagger-throw.png',\r\n\t\tflechettes: './images/cards/rogue/flechettes.png',\r\n\t\triddleWithHoles: './images/cards/rogue/riddleWithHoles.png',\r\n\t\tslice: './images/cards/rogue/slice.png',\r\n\t\tquickSlash: './images/cards/rogue/quickSlash.png',\r\n\t\tsurvivor: './images/cards/rogue/survivor.png',\r\n\t\tdeflect: './images/cards/rogue/deflect.png',\r\n\t\tbackFlip: './images/cards/rogue/backflip.png',\r\n\t\tprepared: './images/cards/rogue/prepared.png',\r\n\t\texpertise: './images/cards/rogue/expertise.png',\r\n\t\tdash: './images/cards/rogue/dash.png'\r\n\t},\r\n\tmage: {\r\n\t\tstrike_m: './images/cards/mage/strike_P.png',\r\n\t\tcutThroughFate: './images/cards/mage/cutThroughFate.png',\r\n\t\treachHeaven: './images/cards/mage/reachHeaven.png',\r\n\t\tsignatureMove: './images/cards/mage/signatureMove.png',\r\n\t\ttantrum: './images/cards/mage/tantrum.png',\r\n\t\tjudgment: './images/cards/mage/judgment.png',\r\n\t\tmasterReality: './images/cards/mage/masterReality.png',\r\n\t\tdefend_m: './images/cards/mage/defend_P.png',\r\n\t\tmeditate: './images/cards/mage/meditate.png',\r\n\t\tthirdEye: './images/cards/mage/thirdEye.png',\r\n\t\tnirvana: './images/cards/mage/nirvana.png',\r\n\t\talpha: './images/cards/mage/alpha.png',\r\n\t}\r\n};\r\n\r\nconst animationCollectionLinks = {\r\n\tanger: './images/attack-effects/anger.png',\r\n\tbloodletting: './images/attack-effects/bloodletting.png',\r\n\tdaggersSvg: './images/attack-effects/daggers.svg',\r\n\tflash: './images/attack-effects/flash.png',\r\n\tjudgmentSvg: './images/attack-effects/judgment.svg',\r\n\tmageAttack: './images/attack-effects/mage-attack.png',\r\n\tmageEffect: './images/attack-effects/mage-effect.png',\r\n\treachHeaven: './images/attack-effects/reach-heaven.png',\r\n\trefreshStamina: './images/attack-effects/refresh-stamina.svg',\r\n\tserpentRing: './images/attack-effects/serpent-ring.png',\r\n\tsmash: './images/attack-effects/smash.png',\r\n\twarriorAttack: './images/attack-effects/warrior-attack.png',\r\n\twarriorSmash: './images/attack-effects/warrior-smash.png',\r\n\tdefend: './images/icons/icon_Block.png'\r\n};\r\n\r\nexport const skillCollectionImages = {\r\n\twarrior: preloadSkillImages(skillCollectionLinks.warrior),\r\n\trogue: preloadSkillImages(skillCollectionLinks.rogue),\r\n\tmage: preloadSkillImages(skillCollectionLinks.mage),\r\n};\r\n\r\nexport const animationCollectionImages = preloadSkillImages(animationCollectionLinks);","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\nimport {skillCollectionImages} from './modules/preloadImages';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, skillCollectionImages.warrior.strike_w, 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, skillCollectionImages.warrior.bash, 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.anger, 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 40) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.warrior.bodySlam, 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfectedStrike = new Cards(4, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.perfectedStrike, 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, skillCollectionImages.warrior.bludgeon, 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, skillCollectionImages.warrior.defend_w, 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, skillCollectionImages.warrior.armaments, 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, skillCollectionImages.warrior.ironWave, 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.warrior.warcry, 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, skillCollectionImages.warrior.bloodletting, 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, skillCollectionImages.warrior.entrench, 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, skillCollectionImages.rogue.strike_r, 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, skillCollectionImages.rogue.daggerThrow, 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, skillCollectionImages.rogue.flechettes, 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, skillCollectionImages.rogue.riddleWithHoles, 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, skillCollectionImages.rogue.slice, 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, skillCollectionImages.rogue.quickSlash, 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, skillCollectionImages.rogue.survivor, 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, skillCollectionImages.rogue.deflect, 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 1, skillCollectionImages.rogue.backFlip, 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.rogue.prepared, 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, skillCollectionImages.rogue.expertise, 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, skillCollectionImages.rogue.dash, 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, skillCollectionImages.mage.strike_m, 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, skillCollectionImages.mage.cutThroughFate, 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, skillCollectionImages.mage.reachHeaven, 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.mage.signatureMove, 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, skillCollectionImages.mage.tantrum, 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judgment = new Cards(5, 'attackAddEffect', 2, 0, skillCollectionImages.mage.judgment, 'judgment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, skillCollectionImages.mage.masterReality, 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, skillCollectionImages.mage.defend_m, 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, skillCollectionImages.mage.meditate, 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, skillCollectionImages.mage.thirdEye, 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, skillCollectionImages.mage.nirvana, 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, skillCollectionImages.mage.alpha, 'alpha');\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfectedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judgment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n\n","// animation through all menu loading black screen\nconst loadingScreenAnimation = target => {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n};\n\n// starting play backgorundMusic\nconst playPauseBackgroundAudio = () => {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.sound-icon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t}\n};\n\n\nconst checkBackgroundAudio = (querySelector) => {\n\tconst currentHash = decodeURIComponent(window.location.hash.substr(1));\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\tconst soundOffOn = document.querySelector(querySelector);\n\n\tswitch (currentHash) {\n\t\tcase 'battle-field':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'restoredGame':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'main-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'choose-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tif ([...allAudio].every(element => element.paused)) {\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t} else {\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t}\n\n};\n\n// shake display when character choosed\nconst shakeAnimation = (queryElement, direction = 'horizontal') => {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shake-x');\n\t\t\tsetTimeout(() => element.classList.add('shake-x'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-x'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shake-y');\n\t\t\tsetTimeout(() => element.classList.add('shake-y'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-y'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shake-mix');\n\t\t\tsetTimeout(() => element.classList.add('shake-mix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-mix'), 400);\n\t\t\tbreak;\n\t}\n};\n\nconst createCardAnimation = (querySelector, amount) => {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('card-draw-animation')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('card-draw-animation');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('card-draw-animation');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('card-draw-animation'));\n\t}\n};\n\nconst discardCardAnimation = querySelector => {\n\tquerySelector.classList.add('card-discard-animation');\n};\n\nconst endTurnAnimation = side => {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('end-turn-animation'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('end-turn-animation'), 1000);\n};\n\nconst attackInDirectionAnimation = (querySelector, direction) => {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attack-right-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-right-animation'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attack-left-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-left-animation'), 1000);\n\t\t\tbreak;\n\t}\n};\n\nconst blockAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n};\n\nconst attackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n};\n\nconst standardAttackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n};\n\nconst multipleAttackAnimation = (querySelector, className, src, amountEffect) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tsetTimeout(() => {\n\t\t\tif (i === 1) {\n\t\t\t\timage.style.transform = 'rotate(30deg)';\n\t\t\t} else if (i === 2) {\n\t\t\t\timage.style.transform = 'rotate(315deg)';\n\t\t\t}\n\n\t\t\timage.className = className;\n\n\t\t\tcontainer.appendChild(image);\n\n\t\t\twindow.navigator.vibrate([200]);\n\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t}, i * 300)\n\t}\n\n\tsetTimeout(() => container.removeChild(image), 1300);\n};\n\nconst ultimateSkillAnimation = (querySelector, className, src, audio) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = src;\n\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in-animation');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\twindow.navigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector);\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out-animation');\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in-animation');\n\t\toverlay.classList.remove('fade-out-animation');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1850);\n};\n\nconst playSoundEffect = querySelector => {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n};\n\nconst damageNumbersAnimation = (querySelector, className, content) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n};\n\nconst notEnoughStaminaAnimation = (player) => {\n\tlet activePlayerUI;\n\tconst divEl = document.createElement('div');\n\tconst fistBubble = document.createElement('div');\n\tconst secondBubble = document.createElement('div');\n\tconst thirdBubble = document.createElement('div');\n\n\tif (player === 'player1') {\n\t\tactivePlayerUI = document.querySelector('.player-1__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-1 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-1__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-1__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-1__third-bubble';\n\t} else {\n\t\tactivePlayerUI = document.querySelector('.player-2__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-2 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-2__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-2__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-2__third-bubble';\n\t}\n\n\tthirdBubble.innerHTML = 'Not enough <span style = \"color: brown;\"> Energy</span>';\n\tdivEl.appendChild(fistBubble);\n\tdivEl.appendChild(secondBubble);\n\tdivEl.appendChild(thirdBubble);\n\n\tactivePlayerUI.appendChild(divEl);\n\n\tsetTimeout(() => {\n\t\tdivEl.classList.add('fade-out-animation')\n\t}, 1500);\n\n\tsetTimeout(() => {\n\t\tactivePlayerUI.removeChild(divEl)\n\t}, 2000);\n}\n\nexport {\n\tloadingScreenAnimation, playPauseBackgroundAudio, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnimation, discardCardAnimation, endTurnAnimation, attackInDirectionAnimation,\n\tblockAnimation, attackAnimation, standardAttackAnimation, multipleAttackAnimation,\n\tultimateSkillAnimation, playSoundEffect, damageNumbersAnimation, notEnoughStaminaAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.onSelectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.onSelectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.onChangePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.onUpdatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.onUpdatePlayersModels = new Events();\n\n\t\t// анимация конца хода\n\t\tthis.onEndTurnAnimation = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.onUpdatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.onUpdatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\tsetTextTurnInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onEndTurnAnimation.notify('left', `${this.playersInfo.playerOneName}'s Turn`);\n\t\t} else {\n\t\t\tthis.onEndTurnAnimation.notify('right', `${this.playersInfo.playerTwoName}'s Turn`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.onSelectionEnd.notify();\n\n\t\t\tthis.setTextTurnInfo();\n\t\t} else {\n\t\t\tthis.onSelectionContinue.notify();\n\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tthis.setTextTurnInfo();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.onSelectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\t\tthis.currentHand = null;\n\n\t\tthis.deckWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onRemoveCards = new Events();\n\t\tthis.onRemoveActionCard = new Events();\n\t\tthis.onCreateCardAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.currentHand = [...this.cardInHand.children];\n\n\t\tif (eventTarget.classList.contains('player-1__pile-of-card')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (eventTarget.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = card.icon;\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t} else {\n\t\t\telDiv.setAttribute('draggable', 'false');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\trestoreHand() {\n\t\tif([...this.cardInHand.children].length === 0) {\n\t\t\tthis.currentHand.forEach((element) => {\n\t\t\t\telement.className = 'cards cards-restored';\n\t\t\t\telement.setAttribute('draggable', 'true')\n\t\t\t});\n\t\t\tthis.currentHand.forEach((element) => this.cardInHand.appendChild(element));\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.deckWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.onRemoveCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.onRemoveActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.onRemoveActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {gameObserver, boardView} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\n\nconst endGame = mutations => {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n}\n\nconst allowSaveConcede = () => {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nconst forbidSaveConcede = () => {\n\tdocument.querySelector('.save-progress').addEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').addEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.remove('save-progress-allow');\n\tdocument.querySelector('.concede').classList.remove('concede-allow');\n}\n\nconst hideInterfaceElements = () => {\n\tboardView.cardInHandField.classList.add('hidden');\n\n\tboardView.endTurnBtn.classList.add('hidden');\n\n\tboardView.playerOneCollection.classList.add('hidden');\n\n\tboardView.playerOneCollection.classList.add('hidden');\n\n\tdocument.querySelector('.background-music-battlefield').pause();\n\n\tplaySoundEffect('.victory-audio');\n\n\tlocalStorage.removeItem('gameData');\n}\n\nconst proposePlayAgain = () => {\n\tconst divEl = document.createElement('div');\n\n\tdivEl.className = 'play-again';\n\tdivEl.textContent = 'Do you want to play one more battle?';\n\n\tconst choiceYes = document.createElement('button');\n\n\tchoiceYes.className = 'play-again__accept';\n\tchoiceYes.textContent = 'Yes';\n\n\tconst choiceNo = document.createElement('button');\n\n\tchoiceNo.className = 'play-again__reject';\n\tchoiceNo.textContent = 'No';\n\n\tdivEl.appendChild(choiceYes);\n\tdivEl.appendChild(choiceNo);\n\n\tboardView.boardSelector.appendChild(divEl);\n\n\tchoiceYes.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\twindow.location.reload();\n\t});\n\n\tchoiceNo.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\t\tboardView.playersTurnInfo.display= 'none';\n\t\tdivEl.style.display = 'none';\n\t\tdocument.title = 'Main menu';\n\t\tlocation.hash = decodeURIComponent('main-menu');\n\t});\n}\n\nconst warningUnload = event => {\n\tevent.preventDefault();\n\tevent.returnValue = '';\n}\n\nconst forbidClick = event => event.stopPropagation();\n\nexport {endGame, allowSaveConcede, warningUnload, forbidClick}","import Events from './eventsModel';\nimport {player1, player2} from '../game';\nimport {warningUnload, forbidClick} from './observerModel';\nimport {createCardAnimation, endTurnAnimation, playSoundEffect} from '../animation_and_sound_effects/animation';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.deckWrapper = this.boardSelector.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.acceptChoiceBtn = this.boardSelector.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = this.boardSelector.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHandField = this.boardSelector.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = this.boardSelector.querySelector('.battle-field');            // play field\n\t\tthis.endTurnBtn = this.boardSelector.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = this.boardSelector.querySelector('.players-action');\n\t\tthis.cardsPlayField = this.boardSelector.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOnIcon = this.boardSelector.querySelector('.sound-icon');\n\t\tthis.playersOverlay = this.boardSelector.querySelector('.players-overlay');\n\t\tthis.playersDeck = this.boardSelector.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = this.boardSelector.querySelector('.players-overlay__close');\n\t\tthis.menu = this.boardSelector.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tthis.playerOneCollection =this.boardSelector.querySelector('.player-1__pile-of-card');\n\t\tthis.playerTwoCollection =this.boardSelector.querySelector('.player-2__pile-of-card');\n\n\t\tthis.touchEvent = event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif (event.target.classList.contains('cards')) {\n\t\t\t\tthis.onTouchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touch-start-animation');\n\n\t\t\t\tplaySoundEffect('.drag-audio');\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend', function touchEnd(event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY) - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touch-start-animation');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tif (comparison > 170) {\n\t\t\t\t\t\t\tself.onDropCard.notify();\n\t\t\t\t\t\t\tself.onDropCardAction.notify(self.gameModel.playerOneTurn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.onCheckChosenCards = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.onGrabCardStart = new Events();\n\n\t\tthis.onTouchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.onDropCard = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.onDropCardAction = new Events();\n\n\t\tthis.onEndTurn = new Events();\n\n\t\tthis.onClosePileCards = new Events();\n\n\t\tthis.onShowPlayerDeck = new Events();\n\n\t\tthis.onSoundSwitch = new Events();\n\n\t\tthis.onSaveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tif ('ontouchstart' in window) {\n\t\t\tthis.cardInHandField.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('touchstart', (event) => this.renderCardSelected(event.target));\n\t\t} else {\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('click', (event) => this.renderCardSelected(event.target));\n\n\t\t\t// анимация карт в руке при наведении\n\t\t\tthis.cardInHandField.addEventListener('mouseover', (event) => this.renderCardSelectedInHand(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseout', (event) => this.renderCardSelectedOutHand(event.target));\n\n\t\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.renderDragCardStart(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.onGrabCardStart.notify(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragend', (event) => this.renderDragCardEnd(event.target));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragenter', (event) => this.renderDragCardEnterDrop(event));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragover', (event) => event.preventDefault());\n\n\t\t\t// играем карты\n\t\t\tthis.cardsPlayField.addEventListener('drop', () => {\n\t\t\t\tthis.onDropCard.notify();\n\n\t\t\t\tthis.onDropCardAction.notify(this.gameModel.playerOneTurn);\n\n\t\t\t\tthis.removeDropFieldAnimation();\n\t\t\t});\n\t\t}\n\n\t\tthis.acceptChoiceBtn.addEventListener('click', () => {\n\t\t\tthis.onDefineCards.notify();\n\n\t\t\tthis.onCheckChosenCards.notify();\n\t\t});\n\n\t\tthis.battleField.addEventListener('click', (event) => {\n\t\t\tthis.onShowPlayerDeck.notify(event.target);\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.playersDeckClose.addEventListener('click', (event) => {\n\t\t\tthis.onClosePileCards.notify();\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.endTurnBtn.addEventListener('click', () => this.onEndTurn.notify());\n\n\t\tthis.soundOffOnIcon.addEventListener('click', () => this.onSoundSwitch.notify());\n\n\t\tthis.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\n\t\t\tthis.renderBattleMenu();\n\t\t});\n\n\t\tthis.menu.addEventListener('click', (event) => this.navigateOnBattlefield(event.target));\n\n\t\t[...this.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', forbidClick);\n\n\t\twindow.addEventListener('beforeunload', warningUnload);\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderBattlefield());\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.onChangePlayerInfo.attach((text) => this.renderPlayerChooseInfo(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.onUpdatePlayersNames.attach((name1, name2) => this.renderPlayerName(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.onUpdatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.renderPlayerModels(modelPlayer1, modelPlayer2));\n\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.renderCards(card, place));\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.onRemoveCards.attach((cards, place) => this.renderDeletedCards(cards, place));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.onRemoveActionCard.attach((card) => this.renderDeletedActionCard(card));\n\n\t\tthis.boardModel.onCreateCardAnimation.attach((querySelector, amount) => this.renderCreateCardAnimation(querySelector, amount));\n\n\t\tthis.gameModel.onEndTurnAnimation.attach((btnSide, textInfo) => this.renderEndTurnAnimation(btnSide, textInfo));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tif (localStorage.getItem('gameData')) {\n\t\t\tthis.renderRestoreNotification();\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.onLoadCreate.notify();\n\t\t}\n\t};\n\n\trenderCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.deckWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.cardInHandField.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.cardsChooseCounter.textContent = '0';\n\n\t\tthis.cardsChooseCounter.style = 'color: white';\n\t};\n\n\trenderDeletedCards(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.deckWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.cardInHandField.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\trenderDeletedActionCard(card) {\n\t\tthis.cardInHandField.removeChild(card);\n\t}\n\n\trenderCardCounterInfo(info) {\n\t\tthis.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\trenderBattlefield() {\n\t\tthis.deckWrapper.style.display = 'none';\n\n\t\tthis.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\trenderPlayerChooseInfo(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\trenderPlayerName(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\trenderPlayerModels(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\trenderCreateCardAnimation(querySelector, amount) {\n\t\tcreateCardAnimation(querySelector, amount);\n\t}\n\n\trenderEndTurnAnimation(btnSide, textInfo) {\n\t\tendTurnAnimation(btnSide);\n\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tthis.playersTurnInfo.textContent = textInfo;\n\t}\n\n\trenderBattleMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateOnBattlefield(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tthis.onSaveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trenderRestoreNotification() {\n\t\tthis.playersOverlay.classList.remove('hidden');\n\t\tthis.playersOverlay.classList.add('fade-in-animation');\n\t\tthis.playersDeckClose.classList.add('hidden');\n\n\t\tconst divEl = document.createElement('div');\n\n\t\tdivEl.className = 'confirm-continue';\n\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\tconst choiceYes = document.createElement('button');\n\n\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\tchoiceYes.textContent = 'Yes';\n\n\t\tconst choiceNo = document.createElement('button');\n\n\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\tchoiceNo.textContent = 'No';\n\n\t\tdivEl.appendChild(choiceYes);\n\t\tdivEl.appendChild(choiceNo);\n\n\t\tthis.playersOverlay.appendChild(divEl);\n\n\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.renderRestoreGameDecision(event.target));\n\t}\n\n\trenderRestoreGameDecision(eventTarget) {\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\tthis.playersOverlay.removeChild(divEl);\n\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\t\t\t\tthis.playersDeckClose.classList.remove('hidden');\n\n\t\t\t\tthis.onLoadCreate.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-animation');\n\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\trenderDragCardStart(eventTarget) {\n\t\tplaySoundEffect('.drag-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\tsetTimeout(() => eventTarget.classList.add('invisible'), 0);\n\n\t\t\tthis.cardsPlayField.classList.add('pulse-animation');\n\t\t}\n\t}\n\n\trenderDragCardEnd(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\teventTarget.classList.remove('invisible');\n\t\t}\n\n\t\tthis.removeDropFieldAnimation();\n\t}\n\n\trenderDragCardEnterDrop(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.cardsPlayField.classList.add('pulse-animation-enter');\n\t}\n\n\tremoveDropFieldAnimation() {\n\t\tthis.cardsPlayField.classList.remove('pulse-animation-enter');\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\t// подсветка выбранных карт\n\trenderCardSelected(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.deckWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio');\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.renderCardCounterInfo(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\trenderCardSelectedInHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\trenderCardSelectedOutHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\trenderPlayerCardCollection(target) {\n\t\tif (target.classList.contains('player-1__pile-of-card') || target.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-pile-animation');\n\n\t\t\tplaySoundEffect('.overlay-open-audio');\n\t\t}\n\n\t\tif (target.classList.contains('players-overlay__close')) {\n\t\t\tthis.playersOverlay.classList.remove('fade-in-pile-animation');\n\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\tplaySoundEffect('.overlay-close-audio');\n\t\t}\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.doDefineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onCheckChosenCards')) {\n\t\t\tthis.boardView.onCheckChosenCards.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onGrabCardStart')) {\n\t\t\tthis.boardView.onGrabCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onTouchCardStart')) {\n\t\t\tthis.boardView.onTouchCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgres')) {\n\t\t\tthis.boardView.onSaveGameProgres.attach(() => this.doSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.doStartRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdoDefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tdoInitActionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\n\t\tthis.gameModel.setTextTurnInfo();\n\t}\n\n\tdoSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tdoStartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tplaySoundEffect,\n\tcreateCardAnimation,\n\tdiscardCardAnimation,\n\tnotEnoughStaminaAnimation\n} from '../animation_and_sound_effects/animation.js';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.onPlayerViewUpdate = new Events();\n\t\tthis.onCardDraw = new Events();\n\t\tthis.onCardDiscard = new Events();\n\t\tthis.onCardActionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.onPlayerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.onPlayerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t(this.gameModel.playerOneTurn) ? notEnoughStaminaAnimation('player1') : notEnoughStaminaAnimation()\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.onCardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tthis.onCardDiscard.notify(element)\n\t\t}\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judgment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tattackAnimation, attackInDirectionAnimation, blockAnimation,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standardAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport {animationCollectionImages} from './preloadImages';\n\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tthis.playerContainer = container;\n\n\t\tthis.onUpdateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = this.playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = this.playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = this.playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = this.playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = this.playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = this.playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = this.playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = this.playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\t\tthis.playerTwoModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderWholeUI(false));\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\trenderViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\trenderViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-positive-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-positive-animation');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-positive-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-positive-animation', 0);\n\t\t}\n\t};\n\n\trenderViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damage-number-animation', resultContent);\n\t};\n\n\trenderWholeUI(damage, passivePlayerUI) {\n\t\tthis.renderViewHP();\n\t\tthis.renderViewDef();\n\t\tthis.renderViewStamina();\n\n\t\tif(damage) {\n\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t}\n\t}\n\n\trenderAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.reachHeaven);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandardAttackAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.bloodletting);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderViewHP();\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.refreshStamina);\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.mageEffect);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.renderViewHP();\n\n\t\t\t\t\tthis.renderViewDef();\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack, 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.serpentRing);\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warrior-ultimate-animation', animationCollectionImages.flash, '.flash-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.daggersSvg, '.backstab-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mage-ultimate-animation', animationCollectionImages.mageAttack, '.mage-ultimate-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judgment':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.judgmentSvg, '.judj-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('onDropCardAction')) {\n\t\t\tthis.boardView.onDropCardAction.attach((priority) => this.doPlayCardAction(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('onUpdateInitialValue')) {\n\t\t\tthis.playersView.onUpdateInitialValue.attach(() => this.doUpdateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgres')) {\n\t\t\tthis.boardView.onSaveGameProgres.attach(() => this.doSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tdoPlayCardAction(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoUpdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {playPauseBackgroundAudio} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.boardView = view;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.doCreateCardsForChoose(card, place));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionContinue')) {\n\t\t\tthis.gameModel.onSelectionContinue.attach(() => this.doCreateCardsForChoose());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionEnd')) {\n\t\t\tthis.gameModel.onSelectionEnd.attach((restoredCards) => this.doCreateCardsInHand(restoredCards));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onDropCard')) {\n\t\t\tthis.boardView.onDropCard.attach(() => this.doDeleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doCreateCardsInHand());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onShowPlayerDeck')) {\n\t\t\tthis.boardView.onShowPlayerDeck.attach((event) => this.doShowPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onClosePileCards')) {\n\t\t\tthis.boardView.onClosePileCards.attach(() => this.doDeleteOverlayCards());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player1.onCardDraw.attach((card) => this.doCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player2.onCardDraw.attach((card) => this.doCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player1.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player2.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSoundSwitch')) {\n\t\t\tthis.boardView.onSoundSwitch.attach(() => this.doTurnOnOfSound());\n\t\t}\n\t}\n\n\tdoCreateCardsForChoose() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tdoCreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tdoDeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdoDeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\tdoDeleteOverlayCards() {\n\t\tthis.boardModel.removeExtraCards('overlay');\n\n\t\tthis.boardModel.restoreHand();\n\t}\n\n\tdoCreateCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tdoShowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tdoTurnOnOfSound() {\n\t\tplayPauseBackgroundAudio();\n\t}\n}\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, endGame} from './modules/observerModel';\n\nconst gameObserver = new Game();\n\nconst boardModel = new Board(gameObserver);\n\nconst boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nconst player1 = new Players(gameObserver, boardModel);\n\nconst player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(playersView.playerOneHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(playersView.playerTwoHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(boardView.battleField, {\n\tattributes: true\n});\n\nexport {gameObserver, boardModel, boardView, player1, player2};\n"],"sourceRoot":""}
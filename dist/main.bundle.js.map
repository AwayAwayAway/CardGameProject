{"version":3,"sources":["webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/game.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/webpack/runtime/make namespace object","webpack://cardgameproject/webpack/startup"],"names":["loading","target","mainEl","document","createElement","className","body","insertBefore","querySelector","setTimeout","removeChild","chooseEl","battleEl","switchPlayPause","hash","window","location","state","decodeURIComponent","substr","soundOffOn","backAudio","paused","play","pause","checkBackgroundAudio","currentHash","mainAudio","audio","allAudio","querySelectorAll","push","length","every","element","some","shakeAnimation","queryElement","direction","classList","remove","add","createCardAnim","amount","elementAnim","i","children","contains","playSoundEffect","forEach","index","discardCardAnim","endTurnAnim","side","button","turnAnnouncer","style","removeProperty","left","right","blockAnimationEffect","src","container","parentElement","image","appendChild","attackAnimation","transform","Math","floor","random","multipleAttackAnimation","amountEffect","effectStorage","elem","standartAttackAnimation","ultimateSkillAnimation","overlay","overlayClose","soundEffect","currentTime","attackAnimationEffect","damageNumbersAnimation","content","divEl","textContent","strike_w","Cards","bash","anger","effect","gameObserver","bodySlam","perfecedStrike","boardModel","bludgeon","defend_w","armaments","ironWave","warcry","bloodletting","entrench","strike_r","daggerThrow","flechettes","riddleWithHoles","slice","quickSlash","survivor","deflect","backFlip","prepared","expertise","dash","strike_m","cutThroughFate","reachHeaven","signatureMove","tantrum","judjment","masterReality","defend_m","meditate","thirdEye","nirvana","alpha","skillCollection","warrior","rogue","mage","Game","Board","boardView","BoardView","gameController","GameController","player1","Players","player2","playersView","PlayersView","playersController","PlayersController","boardController","BoardController","winConditionObserver","MutationObserver","endGame","saveConcedeConditionObserver","allowSaveConcede","start","init","observe","player1HPstatus","childList","subtree","characterData","player2HPstatus","battleground","attributes","game","board","playerModel1","playerModel2","view","gameModel","hasOwnProperty","onLoadCreate","attach","card","place","createCard","onAnimCards","event","cardAnimBoard","cardInHandChoosen","cardAnimHand","grabCardStart","grabedCardAnim","grabCardEnd","preventDrag","dropEvent","deleteActionCard","endTurn","createCardsInHand","setPlayersTurnInfo","showPlayerDeck","showPlayersDeck","closePlayersDeck","selectionContinue","selectionEnd","restoredCards","cardDraw","addCardInHand","cardDiscard","deleteRandomCard","turnOnOfSound","createCardsForChoose","cardChooseAnim","cardChooseAnimInHandAdd","cardChooseAnimInHandRemove","createCards","createAnimation","notify","pullRandomCardsInHand","dragCardStart","dragCardEnd","dragPreventAction","deletePlayedCard","eventTarget","showCardsForPlayers","showDeckPlayer1","showDeckPlayer2","openCloseOverlay","playersDeckClose","showWhichTurn","model","decWrapper","btnAccept","cardsChooseCounter","cardInHand","battleField","playersTurnInfo","cardsPlayField","playersOverlay","playersDeck","menu","menuIcon","onCreateCards","Events","onCounterChange","removeCards","removeActionCard","endTurnAnimation","playerClassInfo","removeExtraCards","playerOneTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","appendPlace","draggable","elDiv","setAttribute","id","backgroundImage","icon","tempIndex","n","indexOf","orderToRemove","condition","tempCard","cost","activePlayer","staminaPoints","dragCard","toggle","counter","getElementsByClassName","counterInfo","number","color","preventDefault","playersInfo","playerOneName","playerTwoName","selector","forbidClick","stopPropagation","boardSelector","onDefineCards","submitCardCheckChoose","doCardAction","saveGameProgres","onRestoreGameData","onConcede","addEventListener","showMenu","navigateGame","getElementsByTagName","returnValue","drawCards","info","counterUpdate","selectionEndUpdate","cards","extraCardsToRemove","choosePlayerInfo","text","playerChooseInfoUpdate","updatePlayersNames","name1","name2","playerNameUpdate","updatePlayersModels","modelPlayer1","modelPlayer2","playerModelsUpdate","checkRestoreGame","display","player1Model","player2Model","type","data","console","log","menuList","split","title","doConcede","choiceYes","choiceNo","doContinueDecision","name","sideEffect","listeners","listener","arg1","arg2","defineCards","doCardCheckChoose","actionCard","doEndTurn","onSaveGameData","startRestoreData","definePlayersCardSet","checkCardsSelectionEnd","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","passivePlayer","playerTwoTurn","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","object","temp","localStorage","getItem","JSON","parse","tempCardChoosePlayer","dataset","checkOnSelectedCards","setTurnPriority","datainfo","search","j","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","setItem","stringify","cardInfo","cardID","tempData","activePlayerHand","mutations","childNodes","removeItem","removeEventListener","playerOneModel","playerTwoModel","playerView","priority","playCard","updateInitialValue","onSavePlayerData","player","doAction","updateInitialValues","savePlayerData","healthPoints","defendPoints","playerViewUpdate","actionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","test","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","playerContainer","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","updateViewHP","updateViewStamina","doAnimation","updateViewDef","width","passivePlayerUI","calcDP","calcHP","resultContent","activePlayerUI","updateDamageNumbers"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// animation through all menu loading black screen\nfunction loading(target) {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n}\n\n// starting play backgorundMusic\nfunction switchPlayPause() {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.soundIcon');\n\tlet backAudio;\n\n\tif (state == 'battle-field') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t}\n}\n\nconst checkBackgroundAudio = (function (querySelector) {\n\tconst currentHash = [];\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\treturn function () {\n\t\tcurrentHash.push(decodeURIComponent(window.location.hash.substr(1)));\n\n\t\tconst soundOffOn = document.querySelector(querySelector);\n\n\t\tif (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.play();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.play();\n\t\t\taudio.pause();\n\t\t}\n\n\t\tif ([...allAudio].every(element => element.paused)) {\n\t\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t\t} else {\n\t\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t\t}\n\t};\n}('.soundIcon'));\n\n// shake display when character choosed\nfunction shakeAnimation(queryElement, direction = 'horizontal') {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shakeX');\n\t\t\tsetTimeout(() => element.classList.add('shakeX'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeX'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shakeY');\n\t\t\tsetTimeout(() => element.classList.add('shakeY'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeY'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shakeMix');\n\t\t\tsetTimeout(() => element.classList.add('shakeMix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeMix'), 400);\n\t\t\tbreak;\n\t}\n}\n\nfunction createCardAnim(querySelector, amount) {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('cardsDrawAnim')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('cardsDrawAnim');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('cardsDrawAnim');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('cardsDrawAnim'));\n\t}\n}\n\nfunction discardCardAnim(querySelector) {\n\tquerySelector.classList.add('cardDiscard');\n}\n\nfunction endTurnAnim(side) {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '5%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '5%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('endTurnAnim'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('endTurnAnim'), 1000);\n}\n\nfunction blockAnimationEffect(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n}\n\nfunction attackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n}\n\nfunction multipleAttackAnimation(querySelector, className, src, amountEffect) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tlet effectStorage = [];\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tconst image = document.createElement('img');\n\t\teffectStorage.push(image);\n\t}\n\n\teffectStorage.forEach((elem, index) => {\n\t\telem.src = src;\n\n\t\tif (index === 1) {\n\t\t\telem.style.transform = 'rotate(30deg)';\n\t\t} else if (index === 2) {\n\t\t\telem.style.transform = 'rotate(315deg)';\n\t\t}\n\n\t\telem.className = className;\n\n\t\tsetTimeout(() => {\n\t\t\tcontainer.appendChild(elem);\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\tsetTimeout(() => container.removeChild(elem), 400);\n\t\t}, index * 300);\n\t});\n}\n\nfunction standartAttackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n}\n\nfunction ultimateSkillAnimation(querySelector, className, src, audio) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\tshakeAnimation(querySelector)\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out');\n\n\t}, 1350);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in');\n\t\toverlay.classList.remove('fade-out');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1500);\n}\n\nfunction playSoundEffect(querySelector) {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n}\n\nfunction attackAnimationEffect(querySelector, direction) {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attackRight');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackRight'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attackLeft');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackLeft'), 1000);\n\t\t\tbreak;\n\t}\n}\n\nfunction damageNumbersAnimation(querySelector, className, content) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n}\n\nexport {\n\tloading, switchPlayPause, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnim, endTurnAnim, blockAnimationEffect, attackAnimation,\n\tplaySoundEffect, attackAnimationEffect, multipleAttackAnimation, discardCardAnim,\n\tstandartAttackAnimation, ultimateSkillAnimation, damageNumbersAnimation\n};\n\n\n\n\n","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, 'images/cards/warrior/Strike.png', 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, 'images/cards/warrior/Bash.png', 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, 'images/cards/warrior/Anger.png', 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 50) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, 'images/cards/warrior/BodySlam.png', 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfecedStrike = new Cards(4, 'attackAddEffect', 1, 6, 'images/cards/warrior/PerfectedStrike.png', 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, 'images/cards/warrior/Bludgeon.png', 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, 'images/cards/warrior/Defend_R.png', 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, 'images/cards/warrior/Armaments.png', 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, 'images/cards/warrior/IronWave.png', 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, 'images/cards/warrior/Warcry.png', 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, 'images/cards/warrior/Bloodletting.png', 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, 'images/cards/warrior/Entrench.png', 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, 'images/cards/rogue/Strike_G.png', 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, 'images/cards/rogue/R_dagger-throw.png', 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, 'images/cards/rogue/Flechettes.png', 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, 'images/cards/rogue/RiddleWithHoles.png', 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, 'images/cards/rogue/Slice.png', 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, 'images/cards/rogue/QuickSlash.png', 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, 'images/cards/rogue/Survivor.png', 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, 'images/cards/rogue/Deflect.png', 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 2, 'images/cards/rogue/Backflip.png', 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, 'images/cards/rogue/Prepared.png', 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, 'images/cards/rogue/Expertise.png', 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, 'images/cards/rogue/Dash.png', 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, 'images/cards/mage/Strike_P.png', 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, 'images/cards/mage/CutThroughFate.png', 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, 'images/cards/mage/ReachHeaven.png', 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, 'images/cards/mage/SignatureMove.png', 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, 'images/cards/mage/Tantrum.png', 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judjment = new Cards(5, 'attackAddEffect', 2, 0, 'images/cards/mage/Judgment.png', 'judjment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, 'images/cards/mage/MasterReality.png', 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, 'images/cards/mage/Defend_P.png', 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, 'images/cards/mage/Meditate.png', 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, 'images/cards/mage/ThirdEye.png', 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, 'images/cards/mage/Nirvana.png', 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, 'images/cards/mage/Alpha.png', 'alpha');\n\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfecedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judjment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, battleground, endGame, player1HPstatus, player2HPstatus} from './modules/observerModel';\n\nexport const gameObserver = new Game();\n\nexport const boardModel = new Board(gameObserver);\n\nexport const boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nexport const player1 = new Players(gameObserver, boardModel);\n\nexport const player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(player1HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(player2HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(battleground, {\n\tattributes: true\n});","import {switchPlayPause} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.createCard(card, place));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onAnimCards')) {\n\t\t\tthis.boardView.onAnimCards.attach((event) => this.cardAnimBoard(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('cardInHandChoosen')) {\n\t\t\tthis.boardView.cardInHandChoosen.attach((event, state) => this.cardAnimHand(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardEnd')) {\n\t\t\tthis.boardView.grabCardEnd.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('preventDrag')) {\n\t\t\tthis.boardView.preventDrag.attach((event) => this.preventDrag(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('dropEvent')) {\n\t\t\tthis.boardView.dropEvent.attach(() => this.deleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.createCardsInHand());\n\t\t\tthis.boardView.endTurn.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.showPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.closePlayersDeck(event));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionContinue')) {\n\t\t\tthis.gameModel.selectionContinue.attach(() => this.createCard());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionEnd')) {\n\t\t\tthis.gameModel.selectionEnd.attach((restoredCards) => this.createCardsInHand(restoredCards));\n\t\t\tthis.gameModel.selectionEnd.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player1.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player2.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player1.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player2.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('soundOffOn')) {\n\t\t\tthis.boardView.soundOffOn.attach(() => this.turnOnOfSound());\n\t\t}\n\t}\n\n\tcreateCard() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tcardAnimBoard(event) {\n\t\tthis.boardModel.cardChooseAnim(event);\n\t}\n\n\tcardAnimHand(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandAdd(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandRemove(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tgrabedCardAnim(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.dragCardStart(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.dragCardEnd(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpreventDrag(event) {\n\t\tthis.boardModel.dragPreventAction(event);\n\t}\n\n\tdeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\taddCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tshowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tclosePlayersDeck(event) {\n\t\tif (event == this.boardModel.showDeckPlayer1 || event == this.boardModel.showDeckPlayer2) {\n\t\t\tthis.boardModel.openCloseOverlay('open');\n\t\t}\n\t\tif (event == this.boardModel.playersDeckClose) {\n\t\t\tthis.boardModel.openCloseOverlay('close');\n\t\t}\n\t}\n\n\tsetPlayersTurnInfo() {\n\t\tthis.boardModel.showWhichTurn();\n\t}\n\n\tturnOnOfSound() {\n\t\tswitchPlayPause();\n\t}\n}\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {createCardAnim, playSoundEffect, endTurnAnim} from '../animation_and_sound_effects/animation.js';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\n\t\tthis.decWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.btnAccept = document.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = document.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = document.querySelector('.battle-field');            // play field\n\t\tthis.endTurn = document.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = document.querySelector('.players-action');\n\t\tthis.cardsPlayField = document.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOn = document.querySelector('.soundIcon');\n\n\t\tthis.playersOverlay = document.querySelector('.players-overlay');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = document.querySelector('.players-overlay__close');\n\n\t\tthis.showDeckPlayer1 = document.querySelector('.player-1__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\t\tthis.showDeckPlayer2 = document.querySelector('.player-2__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\n\t\tthis.menu = document.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = document.querySelector('.battle-field-nav__icon');\n\n\t\t// создаем событие на создание карт\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onCounterChange = new Events();\n\t\tthis.removeCards = new Events();\n\t\tthis.removeActionCard = new Events();\n\t\tthis.createAnimation = new Events();\n\t\tthis.endTurnAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.removeExtraCards('overlay');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target.classList.contains('player-1__pile-of-car')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\n\t\t\t// createCardAnim('.players-overlay__cards', 'overlay');\n\t\t}\n\n\t\tif (target.classList.contains('player-2__pile-of-car')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\n\t\t\t// createCardAnim('.players-overlay__cards', 'overlay');\n\t\t}\n\t}\n\n\topenCloseOverlay(state) {\n\t\tswitch (state) {\n\t\t\tcase 'open':\n\t\t\t\tthis.playersOverlay.classList.remove('hidden');\n\n\t\t\t\tplaySoundEffect('.overlay-open-audio');\n\n\t\t\t\tbreak;\n\t\t\tcase 'close':\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\t\tplaySoundEffect('.overlay-close-audio');\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = document.createElement('div');\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\t\telDiv.style.backgroundImage = `url(${card.icon})`;\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.decWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.removeCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.removeActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.removeActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// подсветка выбранных карт\n\tcardChooseAnim(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.decWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio')\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.onCounterChange.notify(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandAdd(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandRemove(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\tdragCardStart(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\tsetTimeout(() => target.classList.add('invisible'), 0);\n\t\t}\n\n\t\tplaySoundEffect('.drag-audio');\n\t}\n\n\t//у ираем стили для перетаскивания\n\tdragCardEnd(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('invisible');\n\t\t}\n\t}\n\n\tdragPreventAction(event) {\n\t\tevent.preventDefault();\n\t}\n\n\tshowWhichTurn() {\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerOneName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('left');\n\n\t\t\t// endTurnAnim('left');\n\t\t} else {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerTwoName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('right');\n\n\t\t\t// endTurnAnim('right');\n\t\t}\n\t}\n}\n","import Events from './eventsModel';\nimport {createCardAnim, endTurnAnim, playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {gameObserver, player1} from '../game';\nimport {player2} from '../game';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.forbidClick = event => event.stopPropagation();\n\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на анимацию(подсветку выбора карт)\n\t\tthis.onAnimCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.submitCardCheckChoose = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.cardInHandChoosen = new Events();\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.grabCardStart = new Events();\n\n\t\tthis.grabCardEnd = new Events();\n\n\t\tthis.preventDrag = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.dropEvent = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.doCardAction = new Events();\n\n\t\tthis.endTurn = new Events();\n\n\t\tthis.showPlayerDeck = new Events();\n\n\t\tthis.soundOffOn = new Events();\n\n\t\tthis.saveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.onDefineCards.notify());\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.submitCardCheckChoose.notify());\n\n\t\t// событие клик подстветка выбора карт\n\t\tthis.boardModel.decWrapper.addEventListener('click', (event) => this.onAnimCards.notify(event.target));\n\n\t\t// показываем карты какие наюрал игрок на этапе выбора\n\t\tthis.boardModel.battleField.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\tthis.boardModel.playersDeckClose.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\t// анимация карт в руке при наведении\n\t\tthis.boardModel.cardInHand.addEventListener('mouseover', (event) => this.cardInHandChoosen.notify(event.target, 'focus'));\n\n\t\tthis.boardModel.cardInHand.addEventListener('mouseout', (event) => this.cardInHandChoosen.notify(event.target, 'blur'));\n\n\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\tthis.boardModel.cardInHand.addEventListener('dragstart', (event) => this.grabCardStart.notify(event.target, 'focus'));\n\n\t\tthis.boardModel.cardInHand.addEventListener('dragend', (event) => this.grabCardEnd.notify(event.target, 'blur'));\n\n\t\t// prevent default behavior\n\t\tthis.boardModel.cardsPlayField.addEventListener('dragenter', (event) => this.preventDrag.notify(event));\n\n\t\tthis.boardModel.cardsPlayField.addEventListener('dragover', (event) => this.preventDrag.notify(event));\n\n\t\t// играем карты\n\t\tthis.boardModel.cardsPlayField.addEventListener('drop', () => this.dropEvent.notify());\n\n\t\tthis.boardModel.cardsPlayField.addEventListener('drop', () => this.doCardAction.notify(this.gameModel.playerOneTurn));\n\n\t\tthis.boardModel.endTurn.addEventListener('click', () => this.endTurn.notify());\n\n\t\tthis.boardModel.soundOffOn.addEventListener('click', () => this.soundOffOn.notify());\n\n\t\tthis.boardModel.menuIcon.addEventListener('click', () => this.showMenu());\n\n\t\tthis.boardModel.menuIcon.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\n\t\tthis.boardModel.menu.addEventListener('click', (event) => this.navigateGame(event.target));\n\n\t\t[...this.boardModel.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', this.forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', this.forbidClick);\n\n\t\twindow.addEventListener('beforeunload', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.returnValue = '';\n\t\t});\n\n\n\t\t// подписываемся на событие в модели\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.drawCards(card, place));\n\n\t\t// модель меняет количество набранных карт отображаем\n\t\tthis.boardModel.onCounterChange.attach((info) => this.counterUpdate(info));\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.selectionEnd.attach(() => this.selectionEndUpdate());\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.removeCards.attach((cards, place) => this.extraCardsToRemove(cards, place));\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.choosePlayerInfo.attach((text) => this.playerChooseInfoUpdate(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.updatePlayersNames.attach((name1, name2) => this.playerNameUpdate(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.updatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.playerModelsUpdate(modelPlayer1, modelPlayer2));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.removeActionCard.attach((card) => this.deleteActionCard(card));\n\n\t\tthis.boardModel.createAnimation.attach((querySelector, amount) => this.createAnimation(querySelector, amount));\n\n\t\tthis.boardModel.endTurnAnimation.attach((side) => this.endTurnAnimation(side));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tthis.onLoadCreate.notify();\n\t\tthis.checkRestoreGame();\n\t};\n\n\tdrawCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.boardModel.decWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.boardModel.cardInHand.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.boardModel.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.boardModel.cardsChooseCounter.textContent = '0';\n\n\t\tthis.boardModel.cardsChooseCounter.style = 'color: white';\n\t};\n\n\textraCardsToRemove(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.decWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.cardInHand.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteActionCard(card) {\n\t\tthis.boardModel.cardInHand.removeChild(card);\n\t}\n\n\tcounterUpdate(info) {\n\t\tthis.boardModel.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.boardModel.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\tselectionEndUpdate() {\n\t\tthis.boardModel.decWrapper.style.display = 'none';\n\n\t\tthis.boardModel.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\tplayerChooseInfoUpdate(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\tplayerNameUpdate(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\tplayerModelsUpdate(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif(this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\tcreateAnimation(querySelector, amount) {\n\t\tcreateCardAnim(querySelector, amount);\n\t}\n\n\tendTurnAnimation(side) {\n\t\tendTurnAnim(side);\n\t}\n\n\tshowMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateGame(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.saveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckRestoreGame() {\n\t\tconst hash = window.location.hash;\n\t\tconst state = decodeURIComponent(hash.substr(1));\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\n\t\tif (state === 'restoredGame') {\n\t\t\toverlay.classList.remove('hidden');\n\t\t\toverlay.classList.add('fade-in');\n\t\t\toverlayClose.classList.add('hidden');\n\n\t\t\tconst divEl = document.createElement('div');\n\n\t\t\tdivEl.className = 'confirm-continue';\n\t\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\t\tconst choiceYes = document.createElement('button');\n\n\t\t\tchoiceYes.className = 'players-draw-info__accept';\n\t\t\tchoiceYes.textContent = 'Yes';\n\n\t\t\tconst choiceNo = document.createElement('button');\n\n\t\t\tchoiceNo.className = 'reject';\n\t\t\tchoiceNo.textContent = 'No';\n\n\t\t\tdivEl.appendChild(choiceYes);\n\t\t\tdivEl.appendChild(choiceNo);\n\n\t\t\toverlay.appendChild(divEl);\n\n\t\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.doContinueDecision(event.target));\n\t\t}\n\t}\n\n\tdoContinueDecision(eventTarget) {\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'reject':\n\t\t\t\toverlay.removeChild(divEl);\n\n\t\t\t\toverlay.classList.add('hidden');\n\t\t\t\toverlayClose.classList.remove('hidden');\n\n\t\t\t\tbreak;\n\t\t\tcase 'players-draw-info__accept':\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.defineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('submitCardCheckChoose')) {\n\t\t\tthis.boardView.submitCardCheckChoose.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.startRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tactionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\t}\n\n\tonSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tstartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.selectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.selectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.choosePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.updatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.updatePlayersModels = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.updatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.updatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.selectionEnd.notify();\n\t\t} else {\n\t\t\tthis.selectionContinue.notify();\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.selectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import {boardModel} from '../game';\nimport {gameObserver} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {boardView} from '../game';\n\nconst player1HPstatus = document.querySelector('.player-1__hp');\nconst player2HPstatus = document.querySelector('.player-2__hp');\nconst battleground = document.querySelector('.battle-field');\n\nfunction endGame(mutations) {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n}\n\nfunction allowSaveConcede() {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  boardView.forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  boardView.forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nexport {player1HPstatus, player2HPstatus, endGame, battleground, allowSaveConcede}","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('doCardAction')) {\n\t\t\tthis.boardView.doCardAction.attach((priority) => this.playCard(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('updateInitialValue')) {\n\t\t\tthis.playersView.updateInitialValue.attach(() => this.updateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tplayCard(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tupdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tonSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import Events from './eventsModel';\nimport {playSoundEffect, createCardAnim, discardCardAnim} from '../animation_and_sound_effects/animation.js';\nimport {player1} from '../game';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.playerViewUpdate = new Events();\n\t\tthis.cardDraw = new Events();\n\t\tthis.cardDiscard = new Events();\n\t\tthis.actionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.playerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.playerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.cardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\t// setTimeout(() => this.cardDiscard.notify(element), 300)\n\t\t\tthis.cardDiscard.notify(element)\n\t\t}\n\t}\n\n\t// we take condition only for card \"expertise\"\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judjment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.actionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import {\n\tattackAnimation, attackAnimationEffect, blockAnimationEffect,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standartAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport Events from './eventsModel';\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tconst playerContainer = container;\n\n\t\tthis.updateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.actionAnimation.attach(() => this.doAnimation());\n\t\tthis.playerTwoModel.actionAnimation.attach(() => this.doAnimation());\n\n\t\tthis.gameModel.selectionEnd.attach(() => {\n\t\t\tthis.updateViewHP();\n\t\t\tthis.updateViewDef();\n\t\t\tthis.updateViewStamina();\n\t\t})\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\tupdateViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\tupdateViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerOneDefenceValue.classList.remove('defendValuePositive');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValuePositive');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValuePositive', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValuePositive', 0);\n\t\t}\n\t};\n\n\tupdateViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damageNumberAnimate', resultContent);\n\t};\n\n\tdoAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack', 'images/attack-effects/warrior-attack.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/anger.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/reach-heaven.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/anger.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateViewStamina();\n\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandartAttackAnimation(activePlayerUI, 'shield', 'images/attack-effects/bloodletting.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\n\t\t\t\tthis.updateViewHP();\n\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', 'images/attack-effects/refresh-stamina.svg');\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/mageEffect.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack', 'images/attack-effects/warrior-attack.png', 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', 'images/attack-effects/serpent_ring.png');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warriorUltimate', 'images/attack-effects/flash.png', '.flash-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', 'images/attack-effects/daggers.svg', '.backstab-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mageUltimate', 'images/attack-effects/mage-attack.png', '.mage-ultimate-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judjment':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', 'images/attack-effects/judjment.svg', '.judj-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./js/game.js\");\n"],"sourceRoot":""}
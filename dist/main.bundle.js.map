{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/modules/preloadImages.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","preloadSkillImages","object","tempObeject","test","temp","document","createElement","data","img","Image","src","skillCollectionImages","warrior","strike_w","bash","anger","bodySlam","perfectedStrike","bludgeon","defend_w","armaments","ironWave","warcry","bloodletting","entrench","rogue","strike_r","daggerThrow","flechettes","riddleWithHoles","slice","quickSlash","survivor","deflect","backFlip","prepared","expertise","dash","mage","strike_m","cutThroughFate","reachHeaven","signatureMove","tantrum","judgment","masterReality","defend_m","meditate","thirdEye","nirvana","alpha","animationCollectionImages","daggersSvg","flash","judgmentSvg","mageAttack","mageEffect","refreshStamina","serpentRing","smash","warriorAttack","warriorSmash","defend","skillCollection","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","Math","floor","random","shakeAnimation","queryElement","direction","element","querySelector","classList","remove","setTimeout","add","createCardAnimation","amount","elementAnim","i","contains","playSoundEffect","discardCardAnimation","attackInDirectionAnimation","container","blockAnimation","className","block","parentElement","removeChild","image","appendChild","attackAnimation","style","transform","window","navigator","vibrate","standardAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","notEnoughStaminaAnimation","player","activePlayerUI","divEl","fistBubble","secondBubble","thirdBubble","innerHTML","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","restoredGameData","playersInfo","dragCard","tempCard","onSelectionEnd","onSelectionContinue","onChangePlayerInfo","onUpdatePlayersNames","onUpdatePlayersModels","onEndTurnAnimation","onGameStart","onRestoredGameFailed","onSaveGameData","location","hash","substr","readGameDataFromServer","init","notify","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","localStorage","getItem","JSON","parse","playerOneName","playerTwoName","player1","player2","cards","querySelectorAll","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","dataInfo","search","j","setTextTurnInfo","eventTarget","find","savedInfo","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","player1Name","player2Name","player1Class","player2Class","saveGameDataToServer","activePlayerHand","savedGameData","fetch","method","headers","body","stringify","gameSaved","then","res","ok","console","log","self","json","results","Board","model","gameModel","currentHand","deckWrapper","playersDeck","onCreateCards","onRemoveCards","onRemoveActionCard","onCreateCardAnimation","playerClassInfo","removeExtraCards","createCards","card","appendPlace","draggable","elDiv","setAttribute","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","forbidSaveConcede","addEventListener","forbidClick","hideInterfaceElements","boardView","pause","proposePlayAgain","textContent","choiceYes","choiceNo","removeEventListener","warningUnload","reload","display","title","decodeURIComponent","event","preventDefault","returnValue","stopPropagation","BoardView","board","game","selector","boardSelector","acceptChoiceBtn","cardsChooseCounter","cardInHandField","battleField","endTurnBtn","playersTurnInfo","cardsPlayField","soundOffOnIcon","playersOverlay","playersDeckClose","menu","menuIcon","playerOneCollection","playerTwoCollection","touchEvent","coordinateY","touches","pageY","target","onTouchCardStart","touchEnd","comparison","parseFloat","changedTouches","onDropCard","onDropCardAction","onLoadCreate","onDefineCards","onCheckChosenCards","onGrabCardStart","onEndTurn","onClosePileCards","onShowPlayerDeck","onSoundSwitch","onSaveGameProgress","onRestoreGameData","onRestoreGameDataRejected","onConcede","renderCardSelected","renderCardSelectedInHand","renderCardSelectedOutHand","renderDragCardStart","renderDragCardEnd","renderDragCardEnterDrop","removeDropFieldAnimation","renderPlayerCardCollection","renderBattleMenu","navigateOnBattlefield","getElementsByTagName","button","attach","renderBattlefield","text","renderPlayerChooseInfo","name1","name2","renderPlayerName","modelPlayer1","modelPlayer2","renderPlayerModels","renderCards","renderDeletedCards","renderDeletedActionCard","renderCreateCardAnimation","btnSide","textInfo","renderEndTurnAnimation","restoreRequest","renderRestoreError","state","renderSaveGameResult","renderRestoreNotification","toggle","counterInfo","number","color","renderCardCounterInfo","player1Model","player2Model","side","turnAnnouncer","removeProperty","left","right","endTurnAnimation","menuList","split","doConcede","renderRestoreGameDecision","iEl","GameController","view","doDefineCards","doCardCheckChoose","doInitActionCard","doEndTurn","doSaveGameData","doStartRestoreData","doStartGame","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","onPlayerViewUpdate","onCardDraw","onCardDiscard","onCardActionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","newTemp","parseInt","pull","onDrawArray","randomDiscard","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","savedData","PlayersView","playerOneModel","playerTwoModel","playerContainer","onUpdateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","renderViewHP","renderViewStamina","renderAnimation","renderWholeUI","width","passivePlayerUI","content","calcDP","damage","renderViewDef","updateDamageNumbers","amountEffect","multipleAttackAnimation","PlayersController","playerView","playersView","priority","doPlayCardAction","doUpdateInitialValue","doSavePlayerData","doAction","endTurn","updateInitialValues","BoardController","playerModel1","playerModel2","doCreateCardsForChoose","restoredCards","doCreateCardsInHand","doDeleteActionCard","doShowPlayersDeck","doDeleteOverlayCards","doSkillCreateCardInHand","doDeleteRandomCard","doTurnOnOfSound","createCardsForChoose","pullRandomCardsInHand","deletePlayedCard","restoreHand","showCardsForPlayers","backAudio","soundOffOn","paused","winConditionObserver","MutationObserver","mutations","childNodes","gameFinished","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","const preloadSkillImages = object => {\r\n\tlet tempObeject = {};\r\n\r\n\tfor (let key in object) {\r\n\t\tlet regex = /(svg)$/ig;\r\n\r\n\t\tif(regex.test(key)) {\r\n\t\t\tlet temp = document.createElement('object');\r\n\r\n\t\t\ttemp.data = object[key];\r\n\r\n\t\t\ttempObeject[key] = temp;\r\n\t\t} else  {\r\n\t\t\tlet img = new Image();\r\n\r\n\t\t\timg.src = object[key];\r\n\r\n\t\t\ttempObeject[key] = img;\r\n\t\t}\r\n\t}\r\n\r\n\treturn tempObeject;\r\n};\r\n\r\nconst skillCollectionLinks = {\r\n\twarrior: {\r\n\t\tstrike_w: './images/cards/warrior/strike.png',\r\n\t\tbash: './images/cards/warrior/bash.png',\r\n\t\tanger: './images/cards/warrior/anger.png',\r\n\t\tbodySlam: './images/cards/warrior/bodySlam.png',\r\n\t\tperfectedStrike: './images/cards/warrior/perfectedStrike.png',\r\n\t\tbludgeon: './images/cards/warrior/bludgeon.png',\r\n\t\tdefend_w: './images/cards/warrior/defend_w.png',\r\n\t\tarmaments: './images/cards/warrior/armaments.png',\r\n\t\tironWave: './images/cards/warrior/ironWave.png',\r\n\t\twarcry: './images/cards/warrior/warcry.png',\r\n\t\tbloodletting: './images/cards/warrior/bloodletting.png',\r\n\t\tentrench: './images/cards/warrior/entrench.png'\r\n\t},\r\n\trogue: {\r\n\t\tstrike_r: './images/cards/rogue/strike_G.png',\r\n\t\tdaggerThrow: './images/cards/rogue/r_dagger-throw.png',\r\n\t\tflechettes: './images/cards/rogue/flechettes.png',\r\n\t\triddleWithHoles: './images/cards/rogue/riddleWithHoles.png',\r\n\t\tslice: './images/cards/rogue/slice.png',\r\n\t\tquickSlash: './images/cards/rogue/quickSlash.png',\r\n\t\tsurvivor: './images/cards/rogue/survivor.png',\r\n\t\tdeflect: './images/cards/rogue/deflect.png',\r\n\t\tbackFlip: './images/cards/rogue/backflip.png',\r\n\t\tprepared: './images/cards/rogue/prepared.png',\r\n\t\texpertise: './images/cards/rogue/expertise.png',\r\n\t\tdash: './images/cards/rogue/dash.png'\r\n\t},\r\n\tmage: {\r\n\t\tstrike_m: './images/cards/mage/strike_P.png',\r\n\t\tcutThroughFate: './images/cards/mage/cutThroughFate.png',\r\n\t\treachHeaven: './images/cards/mage/reachHeaven.png',\r\n\t\tsignatureMove: './images/cards/mage/signatureMove.png',\r\n\t\ttantrum: './images/cards/mage/tantrum.png',\r\n\t\tjudgment: './images/cards/mage/judgment.png',\r\n\t\tmasterReality: './images/cards/mage/masterReality.png',\r\n\t\tdefend_m: './images/cards/mage/defend_P.png',\r\n\t\tmeditate: './images/cards/mage/meditate.png',\r\n\t\tthirdEye: './images/cards/mage/thirdEye.png',\r\n\t\tnirvana: './images/cards/mage/nirvana.png',\r\n\t\talpha: './images/cards/mage/alpha.png',\r\n\t}\r\n};\r\n\r\nconst animationCollectionLinks = {\r\n\tanger: './images/attack-effects/anger.png',\r\n\tbloodletting: './images/attack-effects/bloodletting.png',\r\n\tdaggersSvg: './images/attack-effects/daggers.svg',\r\n\tflash: './images/attack-effects/flash.png',\r\n\tjudgmentSvg: './images/attack-effects/judgment.svg',\r\n\tmageAttack: './images/attack-effects/mage-attack.png',\r\n\tmageEffect: './images/attack-effects/mage-effect.png',\r\n\treachHeaven: './images/attack-effects/reach-heaven.png',\r\n\trefreshStamina: './images/attack-effects/refresh-stamina.svg',\r\n\tserpentRing: './images/attack-effects/serpent-ring.png',\r\n\tsmash: './images/attack-effects/smash.png',\r\n\twarriorAttack: './images/attack-effects/warrior-attack.png',\r\n\twarriorSmash: './images/attack-effects/warrior-smash.png',\r\n\tdefend: './images/icons/icon_Block.png'\r\n};\r\n\r\nexport const skillCollectionImages = {\r\n\twarrior: preloadSkillImages(skillCollectionLinks.warrior),\r\n\trogue: preloadSkillImages(skillCollectionLinks.rogue),\r\n\tmage: preloadSkillImages(skillCollectionLinks.mage),\r\n};\r\n\r\nexport const animationCollectionImages = preloadSkillImages(animationCollectionLinks);","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\nimport {skillCollectionImages} from './modules/preloadImages';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, skillCollectionImages.warrior.strike_w, 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, skillCollectionImages.warrior.bash, 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.anger, 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 40) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.warrior.bodySlam, 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfectedStrike = new Cards(4, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.perfectedStrike, 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, skillCollectionImages.warrior.bludgeon, 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, skillCollectionImages.warrior.defend_w, 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, skillCollectionImages.warrior.armaments, 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, skillCollectionImages.warrior.ironWave, 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.warrior.warcry, 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, skillCollectionImages.warrior.bloodletting, 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, skillCollectionImages.warrior.entrench, 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, skillCollectionImages.rogue.strike_r, 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, skillCollectionImages.rogue.daggerThrow, 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, skillCollectionImages.rogue.flechettes, 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, skillCollectionImages.rogue.riddleWithHoles, 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, skillCollectionImages.rogue.slice, 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, skillCollectionImages.rogue.quickSlash, 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, skillCollectionImages.rogue.survivor, 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, skillCollectionImages.rogue.deflect, 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 1, skillCollectionImages.rogue.backFlip, 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.rogue.prepared, 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, skillCollectionImages.rogue.expertise, 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, skillCollectionImages.rogue.dash, 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, skillCollectionImages.mage.strike_m, 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, skillCollectionImages.mage.cutThroughFate, 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, skillCollectionImages.mage.reachHeaven, 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.mage.signatureMove, 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, skillCollectionImages.mage.tantrum, 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judgment = new Cards(5, 'attackAddEffect', 2, 0, skillCollectionImages.mage.judgment, 'judgment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, skillCollectionImages.mage.masterReality, 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, skillCollectionImages.mage.defend_m, 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, skillCollectionImages.mage.meditate, 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, skillCollectionImages.mage.thirdEye, 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, skillCollectionImages.mage.nirvana, 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, skillCollectionImages.mage.alpha, 'alpha');\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfectedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judgment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n\n","// animation through all menu loading black screen\nconst loadingScreenAnimation = target => {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\n\t\t\tbreak;\n\t}\n};\n\n// starting play backgorundMusic\nconst playPauseBackgroundAudio = () => {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.sound-icon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t} else {\n\t\tbackAudio.pause();\n\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t}\n};\n\nconst checkBackgroundAudio = (querySelector) => {\n\tconst currentHash = decodeURIComponent(window.location.hash.substr(1));\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\tconst soundOffOn = document.querySelector(querySelector);\n\n\tswitch (currentHash) {\n\t\tcase 'battle-field':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'restoredGame':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'main-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'choose-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tif ([...allAudio].every(element => element.paused)) {\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t} else {\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t}\n};\n\n// shake display when character choosed\nconst shakeAnimation = (queryElement, direction = 'horizontal') => {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shake-x');\n\n\t\t\tsetTimeout(() => element.classList.add('shake-x'), 0);\n\n\t\t\tsetTimeout(() => element.classList.remove('shake-x'), 400);\n\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shake-y');\n\n\t\t\tsetTimeout(() => element.classList.add('shake-y'), 0);\n\n\t\t\tsetTimeout(() => element.classList.remove('shake-y'), 400);\n\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shake-mix');\n\n\t\t\tsetTimeout(() => element.classList.add('shake-mix'), 0);\n\n\t\t\tsetTimeout(() => element.classList.remove('shake-mix'), 400);\n\n\t\t\tbreak;\n\t}\n};\n\nconst createCardAnimation = (querySelector, amount) => {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('card-draw-animation')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('card-draw-animation');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('card-draw-animation');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('card-draw-animation'));\n\n\t\t\tbreak;\n\t}\n};\n\nconst discardCardAnimation = querySelector => {\n\tquerySelector.classList.add('card-discard-animation');\n};\n\nconst endTurnAnimation = side => {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\n\t\t\tbreak;\n\t}\n\n\tbutton.style.display = 'flex';\n\n\tsetTimeout(() => button.classList.add('end-turn-animation'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('end-turn-animation'), 1000);\n};\n\nconst attackInDirectionAnimation = (querySelector, direction) => {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attack-right-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-right-animation'), 1000);\n\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attack-left-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-left-animation'), 1000);\n\n\t\t\tbreak;\n\t}\n};\n\nconst blockAnimation = (querySelector, className, src) => {\n\tconst block = document.querySelector(`.${className}`);\n\n\tif(block) {\n\t\tblock.parentElement.removeChild(block);\n\t}\n\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n};\n\nconst attackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n};\n\nconst standardAttackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n};\n\nconst multipleAttackAnimation = (querySelector, className, src, amountEffect) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tsetTimeout(() => {\n\t\t\tif (i === 1) {\n\t\t\t\timage.style.transform = 'rotate(30deg)';\n\t\t\t} else if (i === 2) {\n\t\t\t\timage.style.transform = 'rotate(315deg)';\n\t\t\t}\n\n\t\t\timage.className = className;\n\n\t\t\tcontainer.appendChild(image);\n\n\t\t\twindow.navigator.vibrate([200]);\n\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t}, i * 300);\n\t}\n\n\tsetTimeout(() => container.removeChild(image), 1300);\n};\n\nconst ultimateSkillAnimation = (querySelector, className, src, audio) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = src;\n\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in-animation');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\twindow.navigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector);\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\n\t\toverlay.classList.add('fade-out-animation');\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in-animation');\n\t\toverlay.classList.remove('fade-out-animation');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1850);\n};\n\nconst playSoundEffect = querySelector => {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) { return; }\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n};\n\nconst damageNumbersAnimation = (querySelector, className, content) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst divEl = document.createElement('div');\n\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n};\n\nconst notEnoughStaminaAnimation = (player) => {\n\tlet activePlayerUI;\n\tconst divEl = document.createElement('div');\n\tconst fistBubble = document.createElement('div');\n\tconst secondBubble = document.createElement('div');\n\tconst thirdBubble = document.createElement('div');\n\n\tif (player === 'player1') {\n\t\tactivePlayerUI = document.querySelector('.player-1__model').parentElement;\n\n\t\tdivEl.className = 'not-enough-stamina-player-1 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-1__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-1__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-1__third-bubble';\n\t} else {\n\t\tactivePlayerUI = document.querySelector('.player-2__model').parentElement;\n\n\t\tdivEl.className = 'not-enough-stamina-player-2 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-2__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-2__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-2__third-bubble';\n\t}\n\n\tthirdBubble.innerHTML = 'Not enough <span style = \"color: brown;\"> Energy</span>';\n\n\tdivEl.appendChild(fistBubble);\n\tdivEl.appendChild(secondBubble);\n\tdivEl.appendChild(thirdBubble);\n\n\tactivePlayerUI.appendChild(divEl);\n\n\tsetTimeout(() => divEl.classList.add('fade-out-animation'), 1500);\n\n\tsetTimeout(() => activePlayerUI.removeChild(divEl), 2000);\n};\n\nexport {\n\tloadingScreenAnimation, playPauseBackgroundAudio, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnimation, discardCardAnimation, endTurnAnimation, attackInDirectionAnimation,\n\tblockAnimation, attackAnimation, standardAttackAnimation, multipleAttackAnimation,\n\tultimateSkillAnimation, playSoundEffect, damageNumbersAnimation, notEnoughStaminaAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.restoredGameData = null;\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.onSelectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.onSelectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.onChangePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.onUpdatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.onUpdatePlayersModels = new Events();\n\n\t\t// анимация конца хода\n\t\tthis.onEndTurnAnimation = new Events();\n\n\t\tthis.onGameStart = new Events();\n\n\t\tthis.onRestoredGameFailed = new Events();\n\n\t\tthis.onSaveGameData = new Events();\n\t}\n\n\tstart() {\n\t\tif (window.location.hash.substr(1) === 'restoredGame') {\n\t\t\tthis.readGameDataFromServer();\n\t\t} else {\n\t\t\tthis.init();\n\t\t}\n\t};\n\n\tinit() {\n\t\tthis.onGameStart.notify();\n\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\n\t\tthis.setPlayersClasses();\n\n\t\tthis.setPlayersNames();\n\n\t\tthis.setPlayersModels();\n\n\t\tthis.setTextChooseInfo();\n\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.onUpdatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.onUpdatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\tsetTextTurnInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onEndTurnAnimation.notify('left', `${this.playersInfo.playerOneName}'s Turn`);\n\t\t} else {\n\t\t\tthis.onEndTurnAnimation.notify('right', `${this.playersInfo.playerTwoName}'s Turn`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gameModel\n\tsetActivePassivePlayer() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(dataInfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < dataInfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == dataInfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) { return; }\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.onSelectionEnd.notify();\n\n\t\t\tthis.setTextTurnInfo();\n\t\t} else {\n\t\t\tthis.onSelectionContinue.notify();\n\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst savedInfo = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData(),\n\t\t\tplayer1Name: this.playersInfo.playerOneName,\n\t\t\tplayer2Name: this.playersInfo.playerTwoName,\n\t\t\tplayer1Class: this.playersInfo.playerOneClass,\n\t\t\tplayer2Class: this.playersInfo.playerTwoClass,\n\t\t};\n\n\t\tthis.saveGameDataToServer(savedInfo);\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info);\n\n\t\treturn cardID;\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = this.restoredGameData.playerOneTurn;\n\t\tthis.playerTwoTurn = this.restoredGameData.playerTwoTurn;\n\n\t\tthis.playersInfo.playerOneClass = this.restoredGameData.player1Class;\n\t\tthis.playersInfo.playerTwoClass = this.restoredGameData.player2Class;\n\t\tthis.playersInfo.playerOneName = this.restoredGameData.player1Name;\n\t\tthis.playersInfo.playerTwoName = this.restoredGameData.player2Name;\n\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(this.restoredGameData.playerOnePullOfCards, this.restoredGameData.player1Class);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(this.restoredGameData.playerTwoPullOfCards, this.restoredGameData.player2Class);\n\n\t\tif (this.playerOneTurn) {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand, this.restoredGameData.player1Class);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand, this.restoredGameData.player2Class);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tthis.setTextTurnInfo();\n\n\t\tthis.setPlayersClasses();\n\n\t\tthis.setPlayersNames();\n\n\t\tthis.setPlayersModels();\n\n\t\tplayer1.doRestorePlayerData(this.restoredGameData, 'player1');\n\t\tplayer2.doRestorePlayerData(this.restoredGameData, 'player2');\n\n\t\tthis.onSelectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n\n\tsaveGameDataToServer(savedGameData) {\n\t\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2', {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tgameSaved: savedGameData\n\t\t\t})\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\tconsole.log('OK');\n\n\t\t\t\t\tthis.onSaveGameData.notify(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Not OK, save error');\n\t\t\t\t\tthis.onSaveGameData.notify(false);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\treadGameDataFromServer() {\n\t\tlet self = this;\n\n\t\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/', {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\treturn res.json();\n\t\t\t\t} else {\n\t\t\t\t\tthis.onRestoredGameFailed.notify();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\tif (data.results[0].gameSaved.hasOwnProperty('gameFinished')) {\n\t\t\t\t\tself.init();\n\t\t\t\t} else {\n\t\t\t\t\tself.restoredGameData = data.results[0].gameSaved;\n\n\t\t\t\t\tself.onGameStart.notify(true);\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\t\tthis.currentHand = null;\n\n\t\tthis.deckWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onRemoveCards = new Events();\n\t\tthis.onRemoveActionCard = new Events();\n\t\tthis.onCreateCardAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.currentHand = [...this.cardInHand.children];\n\n\t\tif (eventTarget.classList.contains('player-1__pile-of-card')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (eventTarget.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = card.icon;\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t} else {\n\t\t\telDiv.setAttribute('draggable', 'false');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\trestoreHand() {\n\t\tif([...this.cardInHand.children].length === 0) {\n\t\t\tthis.currentHand.forEach((element) => {\n\t\t\t\telement.className = 'cards cards-restored';\n\t\t\t\telement.setAttribute('draggable', 'true')\n\t\t\t});\n\n\t\t\tthis.currentHand.forEach((element) => this.cardInHand.appendChild(element));\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.deckWrapper.children];\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.onRemoveCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) { return; }\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.onRemoveActionCard.notify(this.gameModel.dragCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.onRemoveActionCard.notify(card);\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {gameObserver, boardView} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\n\nconst endGame = mutations => {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\n\t\tdeleteSave();\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n}\n\nconst allowSaveConcede = () => {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nconst forbidSaveConcede = () => {\n\tdocument.querySelector('.save-progress').addEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').addEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.remove('save-progress-allow');\n\tdocument.querySelector('.concede').classList.remove('concede-allow');\n}\n\nconst hideInterfaceElements = () => {\n\tboardView.cardInHandField.classList.add('hidden');\n\n\tboardView.endTurnBtn.classList.add('hidden');\n\n\tboardView.playerOneCollection.classList.add('hidden');\n\n\tboardView.playerTwoCollection.classList.add('hidden');\n\n\tdocument.querySelector('.background-music-battlefield').pause();\n\n\tplaySoundEffect('.victory-audio');\n}\n\nconst proposePlayAgain = () => {\n\tconst divEl = document.createElement('div');\n\n\tdivEl.className = 'play-again';\n\tdivEl.textContent = 'Do you want to play one more battle?';\n\n\tconst choiceYes = document.createElement('button');\n\n\tchoiceYes.className = 'play-again__accept';\n\tchoiceYes.textContent = 'Yes';\n\n\tconst choiceNo = document.createElement('button');\n\n\tchoiceNo.className = 'play-again__reject';\n\tchoiceNo.textContent = 'No';\n\n\tdivEl.appendChild(choiceYes);\n\tdivEl.appendChild(choiceNo);\n\n\tboardView.boardSelector.appendChild(divEl);\n\n\tchoiceYes.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\twindow.location.reload();\n\t});\n\n\tchoiceNo.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\tboardView.playersTurnInfo.display= 'none';\n\n\t\tdivEl.style.display = 'none';\n\n\t\tdocument.title = 'Main menu';\n\n\t\tlocation.hash = decodeURIComponent('main-menu');\n\t});\n}\n\nconst warningUnload = event => {\n\tevent.preventDefault();\n\n\tevent.returnValue = '';\n}\n\nconst forbidClick = event => event.stopPropagation();\n\nconst deleteSave = () => {\n\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2', {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tgameSaved: {\n\t\t\t\tgameFinished: true\n\t\t\t}\n\t\t})\n\t})\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\tconsole.log('OK, deleted')\n\t\t\t} else {\n\t\t\t\tconsole.log('Not OK, error')\n\t\t\t}\n\t\t});\n}\n\nexport {endGame, allowSaveConcede, warningUnload, forbidClick}","import Events from './eventsModel';\nimport {player1, player2} from '../game';\nimport {warningUnload, forbidClick} from './observerModel';\nimport {\n\tcreateCardAnimation,\n\tendTurnAnimation,\n\tplaySoundEffect,\n\tshakeAnimation\n} from '../animation_and_sound_effects/animation';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\t\tthis.gameModel = game;\n\t\tthis.boardSelector = selector;\n\n\t\tthis.deckWrapper = this.boardSelector.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.acceptChoiceBtn = this.boardSelector.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = this.boardSelector.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHandField = this.boardSelector.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = this.boardSelector.querySelector('.battle-field');            // play field\n\t\tthis.endTurnBtn = this.boardSelector.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = this.boardSelector.querySelector('.players-action');\n\t\tthis.cardsPlayField = this.boardSelector.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOnIcon = this.boardSelector.querySelector('.sound-icon');\n\t\tthis.playersOverlay = this.boardSelector.querySelector('.players-overlay');\n\t\tthis.playersDeck = this.boardSelector.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = this.boardSelector.querySelector('.players-overlay__close');\n\t\tthis.menu = this.boardSelector.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tthis.playerOneCollection =this.boardSelector.querySelector('.player-1__pile-of-card');\n\t\tthis.playerTwoCollection =this.boardSelector.querySelector('.player-2__pile-of-card');\n\n\t\tthis.touchEvent = event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif (event.target.classList.contains('cards')) {\n\t\t\t\tthis.onTouchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touch-start-animation');\n\n\t\t\t\tplaySoundEffect('.drag-audio');\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend', function touchEnd(event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY) - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touch-start-animation');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tif (comparison > 170) {\n\t\t\t\t\t\t\tself.onDropCard.notify();\n\t\t\t\t\t\t\tself.onDropCardAction.notify(self.gameModel.playerOneTurn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.onCheckChosenCards = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.onGrabCardStart = new Events();\n\n\t\tthis.onTouchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.onDropCard = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.onDropCardAction = new Events();\n\n\t\tthis.onEndTurn = new Events();\n\n\t\tthis.onClosePileCards = new Events();\n\n\t\tthis.onShowPlayerDeck = new Events();\n\n\t\tthis.onSoundSwitch = new Events();\n\n\t\tthis.onSaveGameProgress = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onRestoreGameDataRejected = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tif ('ontouchstart' in window) {\n\t\t\tthis.cardInHandField.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('touchstart', (event) => this.renderCardSelected(event));\n\t\t} else {\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('click', (event) => this.renderCardSelected(event));\n\n\t\t\t// анимация карт в руке при наведении\n\t\t\tthis.cardInHandField.addEventListener('mouseover', (event) => this.renderCardSelectedInHand(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseout', (event) => this.renderCardSelectedOutHand(event.target));\n\n\t\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.renderDragCardStart(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.onGrabCardStart.notify(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragend', (event) => this.renderDragCardEnd(event.target));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragenter', (event) => this.renderDragCardEnterDrop(event));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragover', (event) => event.preventDefault());\n\n\t\t\t// играем карты\n\t\t\tthis.cardsPlayField.addEventListener('drop', (event) => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tthis.onDropCard.notify();\n\n\t\t\t\tthis.onDropCardAction.notify(this.gameModel.playerOneTurn);\n\n\t\t\t\tthis.removeDropFieldAnimation();\n\t\t\t});\n\t\t}\n\n\t\tthis.acceptChoiceBtn.addEventListener('click', () => {\n\t\t\tthis.onDefineCards.notify();\n\n\t\t\tthis.onCheckChosenCards.notify();\n\t\t});\n\n\t\tthis.battleField.addEventListener('click', (event) => {\n\t\t\tthis.onShowPlayerDeck.notify(event.target);\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.playersDeckClose.addEventListener('click', (event) => {\n\t\t\tthis.onClosePileCards.notify();\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.endTurnBtn.addEventListener('click', () => this.onEndTurn.notify());\n\n\t\tthis.soundOffOnIcon.addEventListener('click', () => this.onSoundSwitch.notify());\n\n\t\tthis.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\n\t\t\tthis.renderBattleMenu();\n\t\t});\n\n\t\tthis.menu.addEventListener('click', (event) => this.navigateOnBattlefield(event.target));\n\n\t\t[...this.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', forbidClick);\n\n\t\twindow.addEventListener('beforeunload', warningUnload);\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderBattlefield());\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.onChangePlayerInfo.attach((text) => this.renderPlayerChooseInfo(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.onUpdatePlayersNames.attach((name1, name2) => this.renderPlayerName(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.onUpdatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.renderPlayerModels(modelPlayer1, modelPlayer2));\n\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.renderCards(card, place));\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.onRemoveCards.attach((cards, place) => this.renderDeletedCards(cards, place));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.onRemoveActionCard.attach((card) => this.renderDeletedActionCard(card));\n\n\t\tthis.boardModel.onCreateCardAnimation.attach((querySelector, amount) => this.renderCreateCardAnimation(querySelector, amount));\n\n\t\tthis.gameModel.onEndTurnAnimation.attach((btnSide, textInfo) => this.renderEndTurnAnimation(btnSide, textInfo));\n\n\t\tthis.gameModel.onGameStart.attach((restoreRequest) => this.init(restoreRequest));\n\n\t\tthis.gameModel.onRestoredGameFailed.attach(() => this.renderRestoreError());\n\n\t\tthis.gameModel.onSaveGameData.attach((state) => this.renderSaveGameResult(state));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit(restoreRequest) {\n\t\tif (restoreRequest) {\n\t\t\tthis.renderRestoreNotification();\n\t\t} else {\n\t\t\tthis.onLoadCreate.notify();\n\t\t}\n\t};\n\n\trenderCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.deckWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.cardInHandField.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.cardsChooseCounter.textContent = '0';\n\n\t\tthis.cardsChooseCounter.style = 'color: white';\n\t};\n\n\trenderCreateCardAnimation(querySelector, amount) {\n\t\tcreateCardAnimation(querySelector, amount);\n\t}\n\n\t// подсветка выбранных карт\n\trenderCardSelected(event) {\n\t\tevent.preventDefault();\n\n\t\tlet target = event.target;\n\n\t\tif (target !== this.deckWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio');\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.renderCardCounterInfo(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\trenderCardSelectedInHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\trenderCardSelectedOutHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\trenderDeletedCards(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.deckWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.cardInHandField.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\trenderDeletedActionCard(card) {\n\t\tthis.cardInHandField.removeChild(card);\n\t}\n\n\trenderBattlefield() {\n\t\tthis.deckWrapper.style.display = 'none';\n\n\t\tthis.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\trenderCardCounterInfo(info) {\n\t\tthis.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\trenderPlayerChooseInfo(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\trenderPlayerName(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\trenderPlayerModels(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\trenderEndTurnAnimation(btnSide, textInfo) {\n\t\tendTurnAnimation(btnSide);\n\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tthis.playersTurnInfo.textContent = textInfo;\n\t}\n\n\trenderBattleMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateOnBattlefield(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.onSaveGameProgress.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trenderRestoreNotification() {\n\t\tthis.playersOverlay.classList.remove('hidden');\n\t\tthis.playersOverlay.classList.add('fade-in-animation');\n\t\tthis.playersDeckClose.classList.add('hidden');\n\n\t\tconst divEl = document.createElement('div');\n\n\t\tdivEl.className = 'confirm-continue';\n\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\tconst choiceYes = document.createElement('button');\n\n\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\tchoiceYes.textContent = 'Yes';\n\n\t\tconst choiceNo = document.createElement('button');\n\n\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\tchoiceNo.textContent = 'No';\n\n\t\tdivEl.appendChild(choiceYes);\n\t\tdivEl.appendChild(choiceNo);\n\n\t\tthis.playersOverlay.appendChild(divEl);\n\n\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.renderRestoreGameDecision(event.target));\n\t}\n\n\trenderRestoreGameDecision(eventTarget) {\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\tthis.playersOverlay.removeChild(divEl);\n\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\t\tthis.playersDeckClose.classList.remove('hidden');\n\n\t\t\t\tthis.onRestoreGameDataRejected.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-animation');\n\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\trenderDragCardStart(eventTarget) {\n\t\tplaySoundEffect('.drag-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\tsetTimeout(() => eventTarget.classList.add('invisible'), 0);\n\n\t\t\tthis.cardsPlayField.classList.add('pulse-animation');\n\t\t}\n\t}\n\n\trenderDragCardEnd(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\teventTarget.classList.remove('invisible');\n\t\t}\n\n\t\tthis.removeDropFieldAnimation();\n\t}\n\n\trenderDragCardEnterDrop(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.cardsPlayField.classList.add('pulse-animation-enter');\n\t}\n\n\tremoveDropFieldAnimation() {\n\t\tthis.cardsPlayField.classList.remove('pulse-animation-enter');\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\trenderPlayerCardCollection(target) {\n\t\tif (target.classList.contains('player-1__pile-of-card') || target.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-pile-animation');\n\n\t\t\tplaySoundEffect('.overlay-open-audio');\n\t\t}\n\n\t\tif (target.classList.contains('players-overlay__close')) {\n\t\t\tthis.playersOverlay.classList.remove('fade-in-pile-animation');\n\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\tplaySoundEffect('.overlay-close-audio');\n\t\t}\n\t}\n\n\trenderRestoreError() {\n\t\tthis.deckWrapper.textContent = 'Game restoration failed, please reload page or go back to choose menu and start new Game'\n\t}\n\n\trenderSaveGameResult(state) {\n\t\tconst iEl = document.createElement('i');\n\n\t\tif(state) {\n\t\t\tiEl.className = \"fas fa-check save-progress-success\";\n\n\t\t\tsetTimeout(() => this.renderBattleMenu(), 800);\n\t\t} else {\n\t\t\tiEl.className = \"fas fa-times save-progress-failed\";\n\n\t\t\tshakeAnimation('.save-progress');\n\t\t}\n\n\t\tthis.boardSelector.querySelector('.save-progress').appendChild(iEl);\n\n\t\tsetTimeout(() => this.boardSelector.querySelector('.save-progress').removeChild(iEl), 1500);\n\t}\n\n\tdoConcede() {\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.doDefineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onCheckChosenCards')) {\n\t\t\tthis.boardView.onCheckChosenCards.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onGrabCardStart')) {\n\t\t\tthis.boardView.onGrabCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onTouchCardStart')) {\n\t\t\tthis.boardView.onTouchCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgress')) {\n\t\t\tthis.boardView.onSaveGameProgress.attach(() => this.doSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.doStartRestoreData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameDataRejected')) {\n\t\t\tthis.boardView.onRestoreGameDataRejected.attach(() => this.doStartGame());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdoDefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tdoInitActionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\n\t\tthis.gameModel.setTextTurnInfo();\n\t}\n\n\tdoSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tdoStartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n\n\tdoStartGame() {\n\t\tthis.gameModel.init();\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tplaySoundEffect,\n\tcreateCardAnimation,\n\tdiscardCardAnimation,\n\tnotEnoughStaminaAnimation\n} from '../animation_and_sound_effects/animation.js';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.onPlayerViewUpdate = new Events();\n\t\tthis.onCardDraw = new Events();\n\t\tthis.onCardDiscard = new Events();\n\t\tthis.onCardActionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif (state) {\n\t\t\tthis.onPlayerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.onPlayerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t(this.gameModel.playerOneTurn) ? notEnoughStaminaAnimation('player1') : notEnoughStaminaAnimation();\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [...this.boardModel.cardInHand.children].map((element) => element.dataset.info);\n\n\t\tconst newTemp = tempIndex.map(element => parseInt(element, 10));\n\n\t\tlet pull = [...this.gameModel.playerOnePullOfCards].map((element) => element.id);\n\n\t\tlet onDrawArray = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * pull.length);\n\t\t\t// количество набранных карт\n\t\t\tif (newTemp.indexOf(pull[n]) === -1 && onDrawArray.indexOf(pull[n]) === -1) {\n\t\t\t\tonDrawArray.push(pull[n]);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tonDrawArray = this.gameModel.checkOnSelectedCards(onDrawArray, this.gameModel.playerOneClass);\n\n\t\t\tfor (let i = 0; i < onDrawArray.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(onDrawArray[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tonDrawArray = this.gameModel.checkOnSelectedCards(onDrawArray, this.gameModel.playerTwoClass);\n\n\t\t\tfor (let i = 0; i < onDrawArray.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(onDrawArray[i]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.onCardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300);\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tthis.onCardDiscard.notify(element);\n\t\t}\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judgment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300);\n\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800);\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(), 600);\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() => this.randomCardDraw(), 300);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300);\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300);\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t};\n\t}\n\n\tdoRestorePlayerData(savedData, player) {\n\t\tthis.healthPoints = savedData[player].healthPoints;\n\t\tthis.staminaPoints = savedData[player].staminaPoints;\n\t\tthis.defendPoints = savedData[player].defendPoints;\n\t\tthis.initialHP = savedData[player].initialHP;\n\t\tthis.initialDP = savedData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede');\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tattackAnimation, attackInDirectionAnimation, blockAnimation,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standardAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport {animationCollectionImages} from './preloadImages';\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tthis.playerContainer = container;\n\n\t\tthis.onUpdateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = this.playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = this.playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = this.playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = this.playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = this.playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = this.playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = this.playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = this.playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\t\tthis.playerTwoModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderWholeUI(false));\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\trenderViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\trenderViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-positive-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-positive-animation');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-positive-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-positive-animation', 0);\n\t\t}\n\t};\n\n\trenderViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damage-number-animation', resultContent);\n\t};\n\n\trenderWholeUI(damage, passivePlayerUI) {\n\t\tthis.renderViewHP();\n\t\tthis.renderViewDef();\n\t\tthis.renderViewStamina();\n\n\t\tif(damage) {\n\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t}\n\t}\n\n\trenderAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.reachHeaven);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandardAttackAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.bloodletting);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderViewHP();\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.refreshStamina);\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.mageEffect);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.renderViewHP();\n\n\t\t\t\t\tthis.renderViewDef();\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack, 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.serpentRing);\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warrior-ultimate-animation', animationCollectionImages.flash, '.flash-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.daggersSvg, '.backstab-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mage-ultimate-animation', animationCollectionImages.mageAttack, '.mage-ultimate-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judgment':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.judgmentSvg, '.judj-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('onDropCardAction')) {\n\t\t\tthis.boardView.onDropCardAction.attach((priority) => this.doPlayCardAction(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('onUpdateInitialValue')) {\n\t\t\tthis.playersView.onUpdateInitialValue.attach(() => this.doUpdateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgress')) {\n\t\t\tthis.boardView.onSaveGameProgress.attach(() => this.doSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tdoPlayCardAction(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\n\t\tthis.playerOneModel.updateInitialValues();\n\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoUpdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {playPauseBackgroundAudio} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.boardView = view;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.doCreateCardsForChoose(card, place));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionContinue')) {\n\t\t\tthis.gameModel.onSelectionContinue.attach(() => this.doCreateCardsForChoose());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionEnd')) {\n\t\t\tthis.gameModel.onSelectionEnd.attach((restoredCards) => this.doCreateCardsInHand(restoredCards));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onDropCard')) {\n\t\t\tthis.boardView.onDropCard.attach(() => this.doDeleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doCreateCardsInHand());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onShowPlayerDeck')) {\n\t\t\tthis.boardView.onShowPlayerDeck.attach((event) => this.doShowPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onClosePileCards')) {\n\t\t\tthis.boardView.onClosePileCards.attach(() => this.doDeleteOverlayCards());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player1.onCardDraw.attach((card) => this.doSkillCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player2.onCardDraw.attach((card) => this.doSkillCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player1.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player2.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSoundSwitch')) {\n\t\t\tthis.boardView.onSoundSwitch.attach(() => this.doTurnOnOfSound());\n\t\t}\n\t}\n\n\tdoCreateCardsForChoose() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tdoCreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tdoDeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdoDeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\tdoDeleteOverlayCards() {\n\t\tthis.boardModel.removeExtraCards('overlay');\n\n\t\tthis.boardModel.restoreHand();\n\t}\n\n\tdoSkillCreateCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tdoShowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tdoTurnOnOfSound() {\n\t\tplayPauseBackgroundAudio();\n\t}\n}\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, endGame} from './modules/observerModel';\n\nconst gameObserver = new Game();\n\nconst boardModel = new Board(gameObserver);\n\nconst boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nconst player1 = new Players(gameObserver, boardModel);\n\nconst player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nwinConditionObserver.observe(playersView.playerOneHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(playersView.playerTwoHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(boardView.battleField, {\n\tattributes: true\n});\n\nexport {gameObserver, boardModel, boardView, player1, player2};\n"],"sourceRoot":""}
{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/modules/preloadImages.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","preloadSkillImages","object","tempObeject","test","temp","document","createElement","data","img","Image","src","skillCollectionImages","warrior","strike_w","bash","anger","bodySlam","perfectedStrike","bludgeon","defend_w","armaments","ironWave","warcry","bloodletting","entrench","rogue","strike_r","daggerThrow","flechettes","riddleWithHoles","slice","quickSlash","survivor","deflect","backFlip","prepared","expertise","dash","mage","strike_m","cutThroughFate","reachHeaven","signatureMove","tantrum","judgment","masterReality","defend_m","meditate","thirdEye","nirvana","alpha","animationCollectionImages","daggersSvg","flash","judgmentSvg","mageAttack","mageEffect","refreshStamina","serpentRing","smash","warriorAttack","warriorSmash","defend","skillCollection","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","Math","floor","random","shakeAnimation","queryElement","direction","element","querySelector","classList","remove","setTimeout","add","createCardAnimation","amount","elementAnim","i","contains","playSoundEffect","discardCardAnimation","attackInDirectionAnimation","container","blockAnimation","className","parentElement","image","appendChild","removeChild","attackAnimation","style","transform","window","navigator","vibrate","standardAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","notEnoughStaminaAnimation","player","activePlayerUI","divEl","fistBubble","secondBubble","thirdBubble","innerHTML","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","restoredGameData","playersInfo","dragCard","tempCard","onSelectionEnd","onSelectionContinue","onChangePlayerInfo","onUpdatePlayersNames","onUpdatePlayersModels","onEndTurnAnimation","onGameStart","onRestoredGameFailed","onSaveGameData","location","hash","substr","readGameDataFromServer","init","notify","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","localStorage","getItem","JSON","parse","playerOneName","playerTwoName","player1","player2","cards","querySelectorAll","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","dataInfo","search","j","setTextTurnInfo","eventTarget","find","savedInfo","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","player1Name","player2Name","player1Class","player2Class","saveGameDataToServer","activePlayerHand","savedGameData","fetch","method","headers","body","stringify","gameSaved","then","res","ok","console","log","self","json","results","Board","model","gameModel","currentHand","deckWrapper","playersDeck","onCreateCards","onRemoveCards","onRemoveActionCard","onCreateCardAnimation","playerClassInfo","removeExtraCards","createCards","card","appendPlace","draggable","elDiv","setAttribute","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","forbidSaveConcede","addEventListener","forbidClick","hideInterfaceElements","boardView","pause","proposePlayAgain","textContent","choiceYes","choiceNo","removeEventListener","warningUnload","reload","display","title","decodeURIComponent","event","preventDefault","returnValue","stopPropagation","BoardView","board","game","selector","boardSelector","acceptChoiceBtn","cardsChooseCounter","cardInHandField","battleField","endTurnBtn","playersTurnInfo","cardsPlayField","soundOffOnIcon","playersOverlay","playersDeckClose","menu","menuIcon","playerOneCollection","playerTwoCollection","touchEvent","coordinateY","touches","pageY","target","onTouchCardStart","touchEnd","comparison","parseFloat","changedTouches","onDropCard","onDropCardAction","onLoadCreate","onDefineCards","onCheckChosenCards","onGrabCardStart","onEndTurn","onClosePileCards","onShowPlayerDeck","onSoundSwitch","onSaveGameProgress","onRestoreGameData","onRestoreGameDataRejected","onConcede","renderCardSelected","renderCardSelectedInHand","renderCardSelectedOutHand","renderDragCardStart","renderDragCardEnd","renderDragCardEnterDrop","removeDropFieldAnimation","renderPlayerCardCollection","renderBattleMenu","navigateOnBattlefield","getElementsByTagName","button","attach","renderBattlefield","text","renderPlayerChooseInfo","name1","name2","renderPlayerName","modelPlayer1","modelPlayer2","renderPlayerModels","renderCards","renderDeletedCards","renderDeletedActionCard","renderCreateCardAnimation","btnSide","textInfo","renderEndTurnAnimation","restoreRequest","renderRestoreError","state","renderSaveGameResult","renderRestoreNotification","toggle","counterInfo","number","color","renderCardCounterInfo","player1Model","player2Model","side","turnAnnouncer","removeProperty","left","right","endTurnAnimation","menuList","split","doConcede","renderRestoreGameDecision","iEl","GameController","view","doDefineCards","doCardCheckChoose","doInitActionCard","doEndTurn","doSaveGameData","doStartRestoreData","doStartGame","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","onPlayerViewUpdate","onCardDraw","onCardDiscard","onCardActionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","savedData","PlayersView","playerOneModel","playerTwoModel","playerContainer","onUpdateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","renderViewHP","renderViewStamina","renderAnimation","renderWholeUI","width","passivePlayerUI","content","calcDP","damage","renderViewDef","updateDamageNumbers","amountEffect","multipleAttackAnimation","PlayersController","playerView","playersView","priority","doPlayCardAction","doUpdateInitialValue","doSavePlayerData","doAction","endTurn","updateInitialValues","BoardController","playerModel1","playerModel2","doCreateCardsForChoose","restoredCards","doCreateCardsInHand","doDeleteActionCard","doShowPlayersDeck","doDeleteOverlayCards","doCreateCardInHand","doDeleteRandomCard","doTurnOnOfSound","createCardsForChoose","pullRandomCardsInHand","deletePlayedCard","restoreHand","showCardsForPlayers","backAudio","soundOffOn","paused","winConditionObserver","MutationObserver","mutations","childNodes","gameFinished","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","const preloadSkillImages = object => {\r\n\tlet tempObeject = {};\r\n\r\n\tfor (let key in object) {\r\n\t\tlet regex = /(svg)$/ig;\r\n\r\n\t\tif(regex.test(key)) {\r\n\t\t\tlet temp = document.createElement('object');\r\n\r\n\t\t\ttemp.data = object[key];\r\n\r\n\t\t\ttempObeject[key] = temp;\r\n\t\t} else  {\r\n\t\t\tlet img = new Image();\r\n\r\n\t\t\timg.src = object[key];\r\n\r\n\t\t\ttempObeject[key] = img;\r\n\t\t}\r\n\t}\r\n\r\n\treturn tempObeject;\r\n};\r\n\r\nconst skillCollectionLinks = {\r\n\twarrior: {\r\n\t\tstrike_w: './images/cards/warrior/strike.png',\r\n\t\tbash: './images/cards/warrior/bash.png',\r\n\t\tanger: './images/cards/warrior/anger.png',\r\n\t\tbodySlam: './images/cards/warrior/bodySlam.png',\r\n\t\tperfectedStrike: './images/cards/warrior/perfectedStrike.png',\r\n\t\tbludgeon: './images/cards/warrior/bludgeon.png',\r\n\t\tdefend_w: './images/cards/warrior/defend_w.png',\r\n\t\tarmaments: './images/cards/warrior/armaments.png',\r\n\t\tironWave: './images/cards/warrior/ironWave.png',\r\n\t\twarcry: './images/cards/warrior/warcry.png',\r\n\t\tbloodletting: './images/cards/warrior/bloodletting.png',\r\n\t\tentrench: './images/cards/warrior/entrench.png'\r\n\t},\r\n\trogue: {\r\n\t\tstrike_r: './images/cards/rogue/strike_G.png',\r\n\t\tdaggerThrow: './images/cards/rogue/r_dagger-throw.png',\r\n\t\tflechettes: './images/cards/rogue/flechettes.png',\r\n\t\triddleWithHoles: './images/cards/rogue/riddleWithHoles.png',\r\n\t\tslice: './images/cards/rogue/slice.png',\r\n\t\tquickSlash: './images/cards/rogue/quickSlash.png',\r\n\t\tsurvivor: './images/cards/rogue/survivor.png',\r\n\t\tdeflect: './images/cards/rogue/deflect.png',\r\n\t\tbackFlip: './images/cards/rogue/backflip.png',\r\n\t\tprepared: './images/cards/rogue/prepared.png',\r\n\t\texpertise: './images/cards/rogue/expertise.png',\r\n\t\tdash: './images/cards/rogue/dash.png'\r\n\t},\r\n\tmage: {\r\n\t\tstrike_m: './images/cards/mage/strike_P.png',\r\n\t\tcutThroughFate: './images/cards/mage/cutThroughFate.png',\r\n\t\treachHeaven: './images/cards/mage/reachHeaven.png',\r\n\t\tsignatureMove: './images/cards/mage/signatureMove.png',\r\n\t\ttantrum: './images/cards/mage/tantrum.png',\r\n\t\tjudgment: './images/cards/mage/judgment.png',\r\n\t\tmasterReality: './images/cards/mage/masterReality.png',\r\n\t\tdefend_m: './images/cards/mage/defend_P.png',\r\n\t\tmeditate: './images/cards/mage/meditate.png',\r\n\t\tthirdEye: './images/cards/mage/thirdEye.png',\r\n\t\tnirvana: './images/cards/mage/nirvana.png',\r\n\t\talpha: './images/cards/mage/alpha.png',\r\n\t}\r\n};\r\n\r\nconst animationCollectionLinks = {\r\n\tanger: './images/attack-effects/anger.png',\r\n\tbloodletting: './images/attack-effects/bloodletting.png',\r\n\tdaggersSvg: './images/attack-effects/daggers.svg',\r\n\tflash: './images/attack-effects/flash.png',\r\n\tjudgmentSvg: './images/attack-effects/judgment.svg',\r\n\tmageAttack: './images/attack-effects/mage-attack.png',\r\n\tmageEffect: './images/attack-effects/mage-effect.png',\r\n\treachHeaven: './images/attack-effects/reach-heaven.png',\r\n\trefreshStamina: './images/attack-effects/refresh-stamina.svg',\r\n\tserpentRing: './images/attack-effects/serpent-ring.png',\r\n\tsmash: './images/attack-effects/smash.png',\r\n\twarriorAttack: './images/attack-effects/warrior-attack.png',\r\n\twarriorSmash: './images/attack-effects/warrior-smash.png',\r\n\tdefend: './images/icons/icon_Block.png'\r\n};\r\n\r\nexport const skillCollectionImages = {\r\n\twarrior: preloadSkillImages(skillCollectionLinks.warrior),\r\n\trogue: preloadSkillImages(skillCollectionLinks.rogue),\r\n\tmage: preloadSkillImages(skillCollectionLinks.mage),\r\n};\r\n\r\nexport const animationCollectionImages = preloadSkillImages(animationCollectionLinks);","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\nimport {skillCollectionImages} from './modules/preloadImages';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, skillCollectionImages.warrior.strike_w, 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, skillCollectionImages.warrior.bash, 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.anger, 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 40) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.warrior.bodySlam, 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfectedStrike = new Cards(4, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.perfectedStrike, 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, skillCollectionImages.warrior.bludgeon, 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, skillCollectionImages.warrior.defend_w, 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, skillCollectionImages.warrior.armaments, 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, skillCollectionImages.warrior.ironWave, 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.warrior.warcry, 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, skillCollectionImages.warrior.bloodletting, 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, skillCollectionImages.warrior.entrench, 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, skillCollectionImages.rogue.strike_r, 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, skillCollectionImages.rogue.daggerThrow, 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, skillCollectionImages.rogue.flechettes, 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, skillCollectionImages.rogue.riddleWithHoles, 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, skillCollectionImages.rogue.slice, 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, skillCollectionImages.rogue.quickSlash, 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, skillCollectionImages.rogue.survivor, 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, skillCollectionImages.rogue.deflect, 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 1, skillCollectionImages.rogue.backFlip, 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.rogue.prepared, 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, skillCollectionImages.rogue.expertise, 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, skillCollectionImages.rogue.dash, 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, skillCollectionImages.mage.strike_m, 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, skillCollectionImages.mage.cutThroughFate, 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, skillCollectionImages.mage.reachHeaven, 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.mage.signatureMove, 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, skillCollectionImages.mage.tantrum, 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judgment = new Cards(5, 'attackAddEffect', 2, 0, skillCollectionImages.mage.judgment, 'judgment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, skillCollectionImages.mage.masterReality, 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, skillCollectionImages.mage.defend_m, 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, skillCollectionImages.mage.meditate, 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, skillCollectionImages.mage.thirdEye, 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, skillCollectionImages.mage.nirvana, 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, skillCollectionImages.mage.alpha, 'alpha');\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfectedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judgment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n\n","// animation through all menu loading black screen\nconst loadingScreenAnimation = target => {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n};\n\n// starting play backgorundMusic\nconst playPauseBackgroundAudio = () => {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.sound-icon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t}\n};\n\n\nconst checkBackgroundAudio = (querySelector) => {\n\tconst currentHash = decodeURIComponent(window.location.hash.substr(1));\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\tconst soundOffOn = document.querySelector(querySelector);\n\n\tswitch (currentHash) {\n\t\tcase 'battle-field':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'restoredGame':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'main-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'choose-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tif ([...allAudio].every(element => element.paused)) {\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t} else {\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t}\n\n};\n\n// shake display when character choosed\nconst shakeAnimation = (queryElement, direction = 'horizontal') => {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shake-x');\n\t\t\tsetTimeout(() => element.classList.add('shake-x'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-x'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shake-y');\n\t\t\tsetTimeout(() => element.classList.add('shake-y'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-y'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shake-mix');\n\t\t\tsetTimeout(() => element.classList.add('shake-mix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-mix'), 400);\n\t\t\tbreak;\n\t}\n};\n\nconst createCardAnimation = (querySelector, amount) => {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('card-draw-animation')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('card-draw-animation');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('card-draw-animation');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('card-draw-animation'));\n\t}\n};\n\nconst discardCardAnimation = querySelector => {\n\tquerySelector.classList.add('card-discard-animation');\n};\n\nconst endTurnAnimation = side => {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('end-turn-animation'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('end-turn-animation'), 1000);\n};\n\nconst attackInDirectionAnimation = (querySelector, direction) => {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attack-right-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-right-animation'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attack-left-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-left-animation'), 1000);\n\t\t\tbreak;\n\t}\n};\n\nconst blockAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n};\n\nconst attackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n};\n\nconst standardAttackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n};\n\nconst multipleAttackAnimation = (querySelector, className, src, amountEffect) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tsetTimeout(() => {\n\t\t\tif (i === 1) {\n\t\t\t\timage.style.transform = 'rotate(30deg)';\n\t\t\t} else if (i === 2) {\n\t\t\t\timage.style.transform = 'rotate(315deg)';\n\t\t\t}\n\n\t\t\timage.className = className;\n\n\t\t\tcontainer.appendChild(image);\n\n\t\t\twindow.navigator.vibrate([200]);\n\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t}, i * 300)\n\t}\n\n\tsetTimeout(() => container.removeChild(image), 1300);\n};\n\nconst ultimateSkillAnimation = (querySelector, className, src, audio) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = src;\n\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in-animation');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\twindow.navigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector);\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out-animation');\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in-animation');\n\t\toverlay.classList.remove('fade-out-animation');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1850);\n};\n\nconst playSoundEffect = querySelector => {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n};\n\nconst damageNumbersAnimation = (querySelector, className, content) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n};\n\nconst notEnoughStaminaAnimation = (player) => {\n\tlet activePlayerUI;\n\tconst divEl = document.createElement('div');\n\tconst fistBubble = document.createElement('div');\n\tconst secondBubble = document.createElement('div');\n\tconst thirdBubble = document.createElement('div');\n\n\tif (player === 'player1') {\n\t\tactivePlayerUI = document.querySelector('.player-1__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-1 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-1__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-1__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-1__third-bubble';\n\t} else {\n\t\tactivePlayerUI = document.querySelector('.player-2__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-2 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-2__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-2__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-2__third-bubble';\n\t}\n\n\tthirdBubble.innerHTML = 'Not enough <span style = \"color: brown;\"> Energy</span>';\n\tdivEl.appendChild(fistBubble);\n\tdivEl.appendChild(secondBubble);\n\tdivEl.appendChild(thirdBubble);\n\n\tactivePlayerUI.appendChild(divEl);\n\n\tsetTimeout(() => {\n\t\tdivEl.classList.add('fade-out-animation')\n\t}, 1500);\n\n\tsetTimeout(() => {\n\t\tactivePlayerUI.removeChild(divEl)\n\t}, 2000);\n}\n\nexport {\n\tloadingScreenAnimation, playPauseBackgroundAudio, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnimation, discardCardAnimation, endTurnAnimation, attackInDirectionAnimation,\n\tblockAnimation, attackAnimation, standardAttackAnimation, multipleAttackAnimation,\n\tultimateSkillAnimation, playSoundEffect, damageNumbersAnimation, notEnoughStaminaAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.restoredGameData = null;\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.onSelectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.onSelectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.onChangePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.onUpdatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.onUpdatePlayersModels = new Events();\n\n\t\t// анимация конца хода\n\t\tthis.onEndTurnAnimation = new Events();\n\n\t\tthis.onGameStart = new Events();\n\n\t\tthis.onRestoredGameFailed = new Events();\n\n\t\tthis.onSaveGameData = new Events();\n\t}\n\n\tstart() {\n\t\tif (window.location.hash.substr(1) === 'restoredGame') {\n\t\t\tthis.readGameDataFromServer();\n\t\t} else {\n\t\t\tthis.init();\n\t\t}\n\t};\n\n\tinit() {\n\t\tthis.onGameStart.notify();\n\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.onUpdatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.onUpdatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.onChangePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\tsetTextTurnInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.onEndTurnAnimation.notify('left', `${this.playersInfo.playerOneName}'s Turn`);\n\t\t} else {\n\t\t\tthis.onEndTurnAnimation.notify('right', `${this.playersInfo.playerTwoName}'s Turn`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gameModel\n\tsetActivePassivePlayer() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(dataInfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < dataInfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == dataInfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.onSelectionEnd.notify();\n\n\t\t\tthis.setTextTurnInfo();\n\t\t} else {\n\t\t\tthis.onSelectionContinue.notify();\n\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst savedInfo = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData(),\n\t\t\tplayer1Name: this.playersInfo.playerOneName,\n\t\t\tplayer2Name: this.playersInfo.playerTwoName,\n\t\t\tplayer1Class: this.playersInfo.playerOneClass,\n\t\t\tplayer2Class: this.playersInfo.playerTwoClass,\n\t\t};\n\n\t\tthis.saveGameDataToServer(savedInfo);\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info);\n\n\t\treturn cardID;\n\t}\n\n\tdoRestoreGameData() {\n\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = this.restoredGameData.playerOneTurn;\n\t\tthis.playerTwoTurn = this.restoredGameData.playerTwoTurn;\n\n\t\tthis.playersInfo.playerOneClass = this.restoredGameData.player1Class;\n\t\tthis.playersInfo.playerTwoClass = this.restoredGameData.player2Class;\n\t\tthis.playersInfo.playerOneName = this.restoredGameData.player1Name;\n\t\tthis.playersInfo.playerTwoName = this.restoredGameData.player2Name;\n\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(this.restoredGameData.playerOnePullOfCards, this.restoredGameData.player1Class);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(this.restoredGameData.playerTwoPullOfCards, this.restoredGameData.player2Class);\n\n\t\tif (this.playerOneTurn) {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand, this.restoredGameData.player1Class);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand, this.restoredGameData.player2Class);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tthis.setTextTurnInfo();\n\n\t\tthis.setPlayersClasses();\n\n\t\tthis.setPlayersNames();\n\n\t\tthis.setPlayersModels();\n\n\t\tplayer1.doRestorePlayerData(this.restoredGameData, 'player1');\n\t\tplayer2.doRestorePlayerData(this.restoredGameData, 'player2');\n\n\t\tthis.onSelectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n\n\tsaveGameDataToServer(savedGameData) {\n\t\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2', {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tgameSaved: savedGameData\n\t\t\t})\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\tconsole.log('OK');\n\n\t\t\t\t\tthis.onSaveGameData.notify(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Not OK, save error');\n\t\t\t\t\tthis.onSaveGameData.notify(false);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\treadGameDataFromServer() {\n\t\tlet self = this;\n\n\t\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/', {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\treturn res.json();\n\t\t\t\t} else {\n\t\t\t\t\tthis.onRestoredGameFailed.notify();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\tconsole.log(data);\n\t\t\t\tif (data.results[0].gameSaved.hasOwnProperty('gameFinished')) {\n\t\t\t\t\tself.init();\n\t\t\t\t} else {\n\t\t\t\t\tself.restoredGameData = data.results[0].gameSaved;\n\n\t\t\t\t\tself.onGameStart.notify(true);\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\t\tthis.currentHand = null;\n\n\t\tthis.deckWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onRemoveCards = new Events();\n\t\tthis.onRemoveActionCard = new Events();\n\t\tthis.onCreateCardAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.onCreateCardAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.currentHand = [...this.cardInHand.children];\n\n\t\tif (eventTarget.classList.contains('player-1__pile-of-card')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (eventTarget.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.onCreateCardAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = card.icon;\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t} else {\n\t\t\telDiv.setAttribute('draggable', 'false');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\trestoreHand() {\n\t\tif([...this.cardInHand.children].length === 0) {\n\t\t\tthis.currentHand.forEach((element) => {\n\t\t\t\telement.className = 'cards cards-restored';\n\t\t\t\telement.setAttribute('draggable', 'true')\n\t\t\t});\n\t\t\tthis.currentHand.forEach((element) => this.cardInHand.appendChild(element));\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.deckWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.onRemoveCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.onRemoveActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.onRemoveActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {gameObserver, boardView} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\n\nconst endGame = mutations => {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\n\t\tdeleteSave();\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n}\n\nconst allowSaveConcede = () => {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nconst forbidSaveConcede = () => {\n\tdocument.querySelector('.save-progress').addEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').addEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.remove('save-progress-allow');\n\tdocument.querySelector('.concede').classList.remove('concede-allow');\n}\n\nconst hideInterfaceElements = () => {\n\tboardView.cardInHandField.classList.add('hidden');\n\n\tboardView.endTurnBtn.classList.add('hidden');\n\n\tboardView.playerOneCollection.classList.add('hidden');\n\n\tboardView.playerTwoCollection.classList.add('hidden');\n\n\tdocument.querySelector('.background-music-battlefield').pause();\n\n\tplaySoundEffect('.victory-audio');\n}\n\nconst proposePlayAgain = () => {\n\tconst divEl = document.createElement('div');\n\n\tdivEl.className = 'play-again';\n\tdivEl.textContent = 'Do you want to play one more battle?';\n\n\tconst choiceYes = document.createElement('button');\n\n\tchoiceYes.className = 'play-again__accept';\n\tchoiceYes.textContent = 'Yes';\n\n\tconst choiceNo = document.createElement('button');\n\n\tchoiceNo.className = 'play-again__reject';\n\tchoiceNo.textContent = 'No';\n\n\tdivEl.appendChild(choiceYes);\n\tdivEl.appendChild(choiceNo);\n\n\tboardView.boardSelector.appendChild(divEl);\n\n\tchoiceYes.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\twindow.location.reload();\n\t});\n\n\tchoiceNo.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\t\tboardView.playersTurnInfo.display= 'none';\n\t\tdivEl.style.display = 'none';\n\t\tdocument.title = 'Main menu';\n\t\tlocation.hash = decodeURIComponent('main-menu');\n\t});\n}\n\nconst warningUnload = event => {\n\tevent.preventDefault();\n\tevent.returnValue = '';\n}\n\nconst forbidClick = event => event.stopPropagation();\n\nconst deleteSave = () => {\n\tfetch('https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2', {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\t'X-Parse-Application-Id': 'uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7',\n\t\t\t'X-Parse-REST-API-Key': 'UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tgameSaved: {\n\t\t\t\tgameFinished: true\n\t\t\t}\n\t\t})\n\t})\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\tconsole.log('OK, deleted')\n\t\t\t} else {\n\t\t\t\t//do something on fail\n\t\t\t\tconsole.log('Not OK, error')\n\t\t\t}\n\t\t});\n}\n\nexport {endGame, allowSaveConcede, warningUnload, forbidClick}","import Events from './eventsModel';\nimport {player1, player2} from '../game';\nimport {warningUnload, forbidClick} from './observerModel';\nimport {\n\tcreateCardAnimation,\n\tendTurnAnimation,\n\tplaySoundEffect,\n\tshakeAnimation\n} from '../animation_and_sound_effects/animation';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.deckWrapper = this.boardSelector.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.acceptChoiceBtn = this.boardSelector.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = this.boardSelector.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHandField = this.boardSelector.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = this.boardSelector.querySelector('.battle-field');            // play field\n\t\tthis.endTurnBtn = this.boardSelector.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = this.boardSelector.querySelector('.players-action');\n\t\tthis.cardsPlayField = this.boardSelector.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOnIcon = this.boardSelector.querySelector('.sound-icon');\n\t\tthis.playersOverlay = this.boardSelector.querySelector('.players-overlay');\n\t\tthis.playersDeck = this.boardSelector.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = this.boardSelector.querySelector('.players-overlay__close');\n\t\tthis.menu = this.boardSelector.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tthis.playerOneCollection =this.boardSelector.querySelector('.player-1__pile-of-card');\n\t\tthis.playerTwoCollection =this.boardSelector.querySelector('.player-2__pile-of-card');\n\n\t\tthis.touchEvent = event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif (event.target.classList.contains('cards')) {\n\t\t\t\tthis.onTouchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touch-start-animation');\n\n\t\t\t\tplaySoundEffect('.drag-audio');\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend', function touchEnd(event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY) - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touch-start-animation');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tif (comparison > 170) {\n\t\t\t\t\t\t\tself.onDropCard.notify();\n\t\t\t\t\t\t\tself.onDropCardAction.notify(self.gameModel.playerOneTurn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.onCheckChosenCards = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.onGrabCardStart = new Events();\n\n\t\tthis.onTouchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.onDropCard = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.onDropCardAction = new Events();\n\n\t\tthis.onEndTurn = new Events();\n\n\t\tthis.onClosePileCards = new Events();\n\n\t\tthis.onShowPlayerDeck = new Events();\n\n\t\tthis.onSoundSwitch = new Events();\n\n\t\tthis.onSaveGameProgress = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onRestoreGameDataRejected = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tif ('ontouchstart' in window) {\n\t\t\tthis.cardInHandField.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('touchstart', (event) => this.renderCardSelected(event.target));\n\t\t} else {\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('click', (event) => this.renderCardSelected(event.target));\n\n\t\t\t// анимация карт в руке при наведении\n\t\t\tthis.cardInHandField.addEventListener('mouseover', (event) => this.renderCardSelectedInHand(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseout', (event) => this.renderCardSelectedOutHand(event.target));\n\n\t\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.renderDragCardStart(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.onGrabCardStart.notify(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragend', (event) => this.renderDragCardEnd(event.target));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragenter', (event) => this.renderDragCardEnterDrop(event));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragover', (event) => event.preventDefault());\n\n\t\t\t// играем карты\n\t\t\tthis.cardsPlayField.addEventListener('drop', () => {\n\t\t\t\tthis.onDropCard.notify();\n\n\t\t\t\tthis.onDropCardAction.notify(this.gameModel.playerOneTurn);\n\n\t\t\t\tthis.removeDropFieldAnimation();\n\t\t\t});\n\t\t}\n\n\t\tthis.acceptChoiceBtn.addEventListener('click', () => {\n\t\t\tthis.onDefineCards.notify();\n\n\t\t\tthis.onCheckChosenCards.notify();\n\t\t});\n\n\t\tthis.battleField.addEventListener('click', (event) => {\n\t\t\tthis.onShowPlayerDeck.notify(event.target);\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.playersDeckClose.addEventListener('click', (event) => {\n\t\t\tthis.onClosePileCards.notify();\n\n\t\t\tthis.renderPlayerCardCollection(event.target);\n\t\t});\n\n\t\tthis.endTurnBtn.addEventListener('click', () => this.onEndTurn.notify());\n\n\t\tthis.soundOffOnIcon.addEventListener('click', () => this.onSoundSwitch.notify());\n\n\t\tthis.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\n\t\t\tthis.renderBattleMenu();\n\t\t});\n\n\t\tthis.menu.addEventListener('click', (event) => this.navigateOnBattlefield(event.target));\n\n\t\t[...this.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', forbidClick);\n\n\t\twindow.addEventListener('beforeunload', warningUnload);\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderBattlefield());\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.onChangePlayerInfo.attach((text) => this.renderPlayerChooseInfo(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.onUpdatePlayersNames.attach((name1, name2) => this.renderPlayerName(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.onUpdatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.renderPlayerModels(modelPlayer1, modelPlayer2));\n\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.renderCards(card, place));\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.onRemoveCards.attach((cards, place) => this.renderDeletedCards(cards, place));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.onRemoveActionCard.attach((card) => this.renderDeletedActionCard(card));\n\n\t\tthis.boardModel.onCreateCardAnimation.attach((querySelector, amount) => this.renderCreateCardAnimation(querySelector, amount));\n\n\t\tthis.gameModel.onEndTurnAnimation.attach((btnSide, textInfo) => this.renderEndTurnAnimation(btnSide, textInfo));\n\n\t\tthis.gameModel.onGameStart.attach((restoreRequest) => this.init(restoreRequest));\n\n\t\tthis.gameModel.onRestoredGameFailed.attach(() => this.renderRestoreError());\n\n\t\tthis.gameModel.onSaveGameData.attach((state) => this.renderSaveGameResult(state));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit(restoreRequest) {\n\t\tif (restoreRequest) {\n\t\t\tthis.renderRestoreNotification();\n\t\t} else {\n\t\t\tthis.onLoadCreate.notify();\n\t\t}\n\t};\n\n\trenderCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.deckWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.cardInHandField.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.cardsChooseCounter.textContent = '0';\n\n\t\tthis.cardsChooseCounter.style = 'color: white';\n\t};\n\n\trenderCreateCardAnimation(querySelector, amount) {\n\t\tcreateCardAnimation(querySelector, amount);\n\t}\n\n\t// подсветка выбранных карт\n\trenderCardSelected(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.deckWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio');\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.renderCardCounterInfo(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\trenderCardSelectedInHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\trenderCardSelectedOutHand(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\trenderDeletedCards(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.deckWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.cardInHandField.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\trenderDeletedActionCard(card) {\n\t\tthis.cardInHandField.removeChild(card);\n\t}\n\n\trenderBattlefield() {\n\t\tthis.deckWrapper.style.display = 'none';\n\n\t\tthis.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\trenderCardCounterInfo(info) {\n\t\tthis.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\trenderPlayerChooseInfo(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\trenderPlayerName(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\trenderPlayerModels(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\trenderEndTurnAnimation(btnSide, textInfo) {\n\t\tendTurnAnimation(btnSide);\n\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tthis.playersTurnInfo.textContent = textInfo;\n\t}\n\n\trenderBattleMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateOnBattlefield(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\t// this.renderBattleMenu();\n\n\t\t\t\tthis.onSaveGameProgress.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.renderBattleMenu();\n\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trenderRestoreNotification() {\n\t\tthis.playersOverlay.classList.remove('hidden');\n\t\tthis.playersOverlay.classList.add('fade-in-animation');\n\t\tthis.playersDeckClose.classList.add('hidden');\n\n\t\tconst divEl = document.createElement('div');\n\n\t\tdivEl.className = 'confirm-continue';\n\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\tconst choiceYes = document.createElement('button');\n\n\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\tchoiceYes.textContent = 'Yes';\n\n\t\tconst choiceNo = document.createElement('button');\n\n\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\tchoiceNo.textContent = 'No';\n\n\t\tdivEl.appendChild(choiceYes);\n\t\tdivEl.appendChild(choiceNo);\n\n\t\tthis.playersOverlay.appendChild(divEl);\n\n\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.renderRestoreGameDecision(event.target));\n\t}\n\n\trenderRestoreGameDecision(eventTarget) {\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\tthis.playersOverlay.removeChild(divEl);\n\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\t\t\t\tthis.playersDeckClose.classList.remove('hidden');\n\n\t\t\t\tthis.onRestoreGameDataRejected.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-animation');\n\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\trenderDragCardStart(eventTarget) {\n\t\tplaySoundEffect('.drag-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\tsetTimeout(() => eventTarget.classList.add('invisible'), 0);\n\n\t\t\tthis.cardsPlayField.classList.add('pulse-animation');\n\t\t}\n\t}\n\n\trenderDragCardEnd(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\teventTarget.classList.remove('invisible');\n\t\t}\n\n\t\tthis.removeDropFieldAnimation();\n\t}\n\n\trenderDragCardEnterDrop(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.cardsPlayField.classList.add('pulse-animation-enter');\n\t}\n\n\tremoveDropFieldAnimation() {\n\t\tthis.cardsPlayField.classList.remove('pulse-animation-enter');\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\trenderPlayerCardCollection(target) {\n\t\tif (target.classList.contains('player-1__pile-of-card') || target.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-pile-animation');\n\n\t\t\tplaySoundEffect('.overlay-open-audio');\n\t\t}\n\n\t\tif (target.classList.contains('players-overlay__close')) {\n\t\t\tthis.playersOverlay.classList.remove('fade-in-pile-animation');\n\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\tplaySoundEffect('.overlay-close-audio');\n\t\t}\n\t}\n\n\trenderRestoreError() {\n\t\tthis.deckWrapper.textContent = 'Game restoration failed, please reload page or go back to choose menu and start new Game'\n\t}\n\n\trenderSaveGameResult(state) {\n\t\tconst iEl = document.createElement('i');\n\n\t\tif(state) {\n\t\t\tiEl.className = \"fas fa-check save-progress-success\";\n\n\t\t\tsetTimeout(() => this.renderBattleMenu(), 800);\n\t\t} else {\n\t\t\tiEl.className = \"fas fa-times save-progress-failed\";\n\n\t\t\tshakeAnimation('.save-progress');\n\t\t}\n\n\t\tthis.boardSelector.querySelector('.save-progress').appendChild(iEl);\n\n\t\tsetTimeout(() => this.boardSelector.querySelector('.save-progress').removeChild(iEl), 1500);\n\t}\n\n\tdoConcede() {\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.doDefineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onCheckChosenCards')) {\n\t\t\tthis.boardView.onCheckChosenCards.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onGrabCardStart')) {\n\t\t\tthis.boardView.onGrabCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onTouchCardStart')) {\n\t\t\tthis.boardView.onTouchCardStart.attach((eventTarget) => this.doInitActionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgress')) {\n\t\t\tthis.boardView.onSaveGameProgress.attach(() => this.doSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.doStartRestoreData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameDataRejected')) {\n\t\t\tthis.boardView.onRestoreGameDataRejected.attach(() => this.doStartGame());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdoDefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tdoInitActionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\n\t\tthis.gameModel.setTextTurnInfo();\n\t}\n\n\tdoSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tdoStartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n\n\tdoStartGame() {\n\t\tthis.gameModel.init();\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tplaySoundEffect,\n\tcreateCardAnimation,\n\tdiscardCardAnimation,\n\tnotEnoughStaminaAnimation\n} from '../animation_and_sound_effects/animation.js';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.onPlayerViewUpdate = new Events();\n\t\tthis.onCardDraw = new Events();\n\t\tthis.onCardDiscard = new Events();\n\t\tthis.onCardActionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.onPlayerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.onPlayerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t(this.gameModel.playerOneTurn) ? notEnoughStaminaAnimation('player1') : notEnoughStaminaAnimation()\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.onCardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.onCardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.onCardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tthis.onCardDiscard.notify(element)\n\t\t}\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judgment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.onCardActionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.onCardActionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(savedData, player) {\n\t\tthis.healthPoints = savedData[player].healthPoints;\n\t\tthis.staminaPoints = savedData[player].staminaPoints;\n\t\tthis.defendPoints = savedData[player].defendPoints;\n\t\tthis.initialHP = savedData[player].initialHP;\n\t\tthis.initialDP = savedData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tattackAnimation, attackInDirectionAnimation, blockAnimation,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standardAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport {animationCollectionImages} from './preloadImages';\n\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tthis.playerContainer = container;\n\n\t\tthis.onUpdateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = this.playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = this.playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = this.playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = this.playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = this.playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = this.playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = this.playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = this.playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.onPlayerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.renderViewHP();\n\t\t\t} else {\n\t\t\t\tthis.renderViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\t\tthis.playerTwoModel.onCardActionAnimation.attach(() => this.renderAnimation());\n\n\t\tthis.gameModel.onSelectionEnd.attach(() => this.renderWholeUI(false));\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\trenderViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\trenderViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-positive-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-positive-animation');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-positive-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-positive-animation', 0);\n\t\t}\n\t};\n\n\trenderViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damage-number-animation', resultContent);\n\t};\n\n\trenderWholeUI(damage, passivePlayerUI) {\n\t\tthis.renderViewHP();\n\t\tthis.renderViewDef();\n\t\tthis.renderViewStamina();\n\n\t\tif(damage) {\n\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t}\n\t}\n\n\trenderAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.reachHeaven);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandardAttackAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.bloodletting);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.renderViewHP();\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.refreshStamina);\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.renderViewDef();\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.mageEffect);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.renderViewHP();\n\n\t\t\t\t\tthis.renderViewDef();\n\n\t\t\t\t\tthis.onUpdateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack, 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.serpentRing);\n\n\t\t\t\tthis.renderViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warrior-ultimate-animation', animationCollectionImages.flash, '.flash-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.daggersSvg, '.backstab-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mage-ultimate-animation', animationCollectionImages.mageAttack, '.mage-ultimate-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judgment':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.judgmentSvg, '.judj-audio');\n\n\t\t\t\tthis.renderWholeUI(true, passivePlayerUI);\n\n\t\t\t\tthis.onUpdateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('onDropCardAction')) {\n\t\t\tthis.boardView.onDropCardAction.attach((priority) => this.doPlayCardAction(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('onUpdateInitialValue')) {\n\t\t\tthis.playersView.onUpdateInitialValue.attach(() => this.doUpdateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSaveGameProgress')) {\n\t\t\tthis.boardView.onSaveGameProgress.attach(() => this.doSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tdoPlayCardAction(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoUpdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tdoSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {playPauseBackgroundAudio} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.boardView = view;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.doCreateCardsForChoose(card, place));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionContinue')) {\n\t\t\tthis.gameModel.onSelectionContinue.attach(() => this.doCreateCardsForChoose());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('onSelectionEnd')) {\n\t\t\tthis.gameModel.onSelectionEnd.attach((restoredCards) => this.doCreateCardsInHand(restoredCards));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onDropCard')) {\n\t\t\tthis.boardView.onDropCard.attach(() => this.doDeleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onEndTurn')) {\n\t\t\tthis.boardView.onEndTurn.attach(() => this.doCreateCardsInHand());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onShowPlayerDeck')) {\n\t\t\tthis.boardView.onShowPlayerDeck.attach((event) => this.doShowPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onClosePileCards')) {\n\t\t\tthis.boardView.onClosePileCards.attach(() => this.doDeleteOverlayCards());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player1.onCardDraw.attach((card) => this.doCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDraw')) {\n\t\t\tthis.player2.onCardDraw.attach((card) => this.doCreateCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player1.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('onCardDiscard')) {\n\t\t\tthis.player2.onCardDiscard.attach((card) => this.doDeleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onSoundSwitch')) {\n\t\t\tthis.boardView.onSoundSwitch.attach(() => this.doTurnOnOfSound());\n\t\t}\n\t}\n\n\tdoCreateCardsForChoose() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tdoCreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.onCreateCardAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tdoDeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdoDeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\tdoDeleteOverlayCards() {\n\t\tthis.boardModel.removeExtraCards('overlay');\n\n\t\tthis.boardModel.restoreHand();\n\t}\n\n\tdoCreateCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tdoShowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tdoTurnOnOfSound() {\n\t\tplayPauseBackgroundAudio();\n\t}\n}\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, endGame} from './modules/observerModel';\n\nconst gameObserver = new Game();\n\nconst boardModel = new Board(gameObserver);\n\nconst boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nconst player1 = new Players(gameObserver, boardModel);\n\nconst player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\n// boardView.init();\n\nwinConditionObserver.observe(playersView.playerOneHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(playersView.playerTwoHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(boardView.battleField, {\n\tattributes: true\n});\n\nexport {gameObserver, boardModel, boardView, player1, player2};\n"],"sourceRoot":""}
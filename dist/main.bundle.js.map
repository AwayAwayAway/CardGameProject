{"version":3,"sources":["webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/game.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/preloadImages.js","webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/webpack/runtime/make namespace object","webpack://cardgameproject/webpack/startup"],"names":["loadingScreenAnimation","target","mainEl","document","createElement","className","body","insertBefore","querySelector","setTimeout","removeChild","chooseEl","battleEl","playPauseBackgroundAudio","hash","window","location","state","decodeURIComponent","substr","soundOffOn","backAudio","paused","play","pause","checkBackgroundAudio","currentHash","mainAudio","audio","allAudio","querySelectorAll","every","element","shakeAnimation","queryElement","direction","classList","remove","add","createCardAnimation","amount","elementAnim","i","children","length","contains","playSoundEffect","forEach","index","discardCardAnimation","endTurnAnimation","side","button","turnAnnouncer","style","removeProperty","left","right","attackInDirectionAnimation","container","blockAnimation","src","parentElement","image","appendChild","attackAnimation","transform","Math","floor","random","navigator","vibrate","standardAttackAnimation","multipleAttackAnimation","amountEffect","ultimateSkillAnimation","overlay","overlayClose","soundEffect","currentTime","damageNumbersAnimation","content","divEl","textContent","notEnoughStaminaAnimation","player","activePlayerUI","fistBubble","secondBubble","thirdBubble","innerHTML","strike_w","Cards","skillCollectionImages","bash","anger","effect","gameObserver","bodySlam","perfectedStrike","boardModel","bludgeon","defend_w","armaments","ironWave","warcry","bloodletting","entrench","strike_r","daggerThrow","flechettes","riddleWithHoles","slice","quickSlash","survivor","deflect","backFlip","prepared","expertise","dash","strike_m","cutThroughFate","reachHeaven","signatureMove","tantrum","judgment","masterReality","defend_m","meditate","thirdEye","nirvana","alpha","skillCollection","warrior","rogue","mage","Game","Board","boardView","BoardView","gameController","GameController","player1","Players","player2","playersView","PlayersView","playersController","PlayersController","boardController","BoardController","winConditionObserver","MutationObserver","endGame","saveConcedeConditionObserver","allowSaveConcede","start","init","observe","playerOneHPValue","childList","subtree","characterData","playerTwoHPValue","battleField","attributes","game","board","playerModel1","playerModel2","view","gameModel","hasOwnProperty","onLoadCreate","attach","card","place","createCard","dropEvent","deleteActionCard","endTurn","createCardsInHand","showPlayerDeck","event","showPlayersDeck","onClosePileCards","deleteOverlayCards","selectionContinue","selectionEnd","restoredCards","cardDraw","addCardInHand","cardDiscard","deleteRandomCard","turnOnOfSound","createCardsForChoose","createCards","createAnimation","notify","pullRandomCardsInHand","deletePlayedCard","removeExtraCards","eventTarget","showCardsForPlayers","model","deckWrapper","cardInHand","playersTurnInfo","playersDeck","onCreateCards","Events","removeCards","removeActionCard","playerClassInfo","playerOneTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","appendPlace","draggable","elDiv","icon","setAttribute","id","tempIndex","n","indexOf","push","orderToRemove","condition","tempCard","cost","activePlayer","staminaPoints","dragCard","selector","boardSelector","acceptChoiceBtn","cardsChooseCounter","cardInHandField","endTurnBtn","cardsPlayField","soundOffOnIcon","playersOverlay","playersDeckClose","menu","menuIcon","touchEvent","self","coordinateY","touches","pageY","closure","coordinate","addEventListener","touchEnd","comparison","parseFloat","changedTouches","doCardAction","removeEventListener","touchCardStart","onDefineCards","submitCardCheckChoose","grabCardStart","saveGameProgres","onRestoreGameData","onConcede","cardChooseAnim","cardChooseAnimInHandAdd","cardChooseAnimInHandRemove","dragCardStartAnimation","dragCardEndAnimation","dragCardEnterAnimation","preventDefault","deletePlayfieldAnimation","openCloseOverlay","showMenu","navigateGame","getElementsByTagName","forbidClick","warningUnload","drawCards","selectionEndUpdate","cards","extraCardsToRemove","choosePlayerInfo","text","playerChooseInfoUpdate","updatePlayersNames","name1","name2","playerNameUpdate","updatePlayersModels","modelPlayer1","modelPlayer2","playerModelsUpdate","btnSide","textInfo","localStorage","getItem","checkRestoreGame","info","number","color","display","player1Model","player2Model","type","data","console","log","menuList","split","title","doConcede","choiceYes","choiceNo","doContinueDecision","toggle","counter","getElementsByClassName","counterInfo","counterUpdate","name","sideEffect","listeners","listener","arg1","arg2","defineCards","doCardCheckChoose","actionCard","doEndTurn","onSaveGameData","startRestoreData","definePlayersCardSet","checkCardsSelectionEnd","initActionCard","turnEndsNextPlayerTurn","setTextTurnInfo","saveGameData","doRestoreGameData","passivePlayer","playerTwoTurn","playersInfo","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","object","temp","JSON","parse","playerOneName","playerTwoName","tempCardChoosePlayer","dataset","checkOnSelectedCards","setTurnPriority","datainfo","search","j","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","setItem","stringify","cardInfo","cardID","tempData","activePlayerHand","mutations","childNodes","hideInterfaceElements","proposePlayAgain","forbidSaveConcede","removeItem","reload","returnValue","stopPropagation","playerOneModel","playerTwoModel","playerView","priority","playCard","updateInitialValue","onSavePlayerData","doAction","updateInitialValues","savePlayerData","healthPoints","defendPoints","playerViewUpdate","actionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","test","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","playerContainer","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","updateViewHP","updateViewStamina","doAnimation","updateViewDef","width","passivePlayerUI","calcDP","calcHP","resultContent","animationCollectionImages","updateDamageNumbers","preloadSkillImages","tempObeject","key","regex","img","Image","skillCollectionLinks","animationCollectionLinks","daggersSvg","flash","judgmentSvg","mageAttack","mageEffect","refreshStamina","serpentRing","smash","warriorAttack","warriorSmash","defend"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// animation through all menu loading black screen\nconst loadingScreenAnimation = target => {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n};\n\n// starting play backgorundMusic\nconst playPauseBackgroundAudio = () => {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.sound-icon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t}\n};\n\n\nconst checkBackgroundAudio = (querySelector) => {\n\tconst currentHash = decodeURIComponent(window.location.hash.substr(1));\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\tconst soundOffOn = document.querySelector(querySelector);\n\n\tswitch (currentHash) {\n\t\tcase 'battle-field':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'restoredGame':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'main-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'choose-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tif ([...allAudio].every(element => element.paused)) {\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t} else {\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t}\n\n};\n\n// shake display when character choosed\nconst shakeAnimation = (queryElement, direction = 'horizontal') => {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shake-x');\n\t\t\tsetTimeout(() => element.classList.add('shake-x'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-x'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shake-y');\n\t\t\tsetTimeout(() => element.classList.add('shake-y'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-y'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shake-mix');\n\t\t\tsetTimeout(() => element.classList.add('shake-mix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-mix'), 400);\n\t\t\tbreak;\n\t}\n};\n\nconst createCardAnimation = (querySelector, amount) => {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('card-draw-animation')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('card-draw-animation');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('card-draw-animation');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('card-draw-animation'));\n\t}\n};\n\nconst discardCardAnimation = querySelector => {\n\tquerySelector.classList.add('card-discard-animation');\n};\n\nconst endTurnAnimation = side => {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('end-turn-animation'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('end-turn-animation'), 1000);\n};\n\nconst attackInDirectionAnimation = (querySelector, direction) => {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attack-right-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-right-animation'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attack-left-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-left-animation'), 1000);\n\t\t\tbreak;\n\t}\n};\n\nconst blockAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n};\n\nconst attackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n};\n\nconst standardAttackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n};\n\nconst multipleAttackAnimation = (querySelector, className, src, amountEffect) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tsetTimeout(() => {\n\t\t\tif (i === 1) {\n\t\t\t\timage.style.transform = 'rotate(30deg)';\n\t\t\t} else if (i === 2) {\n\t\t\t\timage.style.transform = 'rotate(315deg)';\n\t\t\t}\n\n\t\t\timage.className = className;\n\n\t\t\tcontainer.appendChild(image);\n\n\t\t\twindow.navigator.vibrate([200]);\n\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t}, i * 300)\n\t}\n\n\tsetTimeout(() => container.removeChild(image), 1300);\n};\n\nconst ultimateSkillAnimation = (querySelector, className, src, audio) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = src;\n\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in-animation');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\twindow.navigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector);\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out-animation');\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in-animation');\n\t\toverlay.classList.remove('fade-out-animation');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1850);\n};\n\nconst playSoundEffect = querySelector => {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n};\n\nconst damageNumbersAnimation = (querySelector, className, content) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n};\n\nconst notEnoughStaminaAnimation = (player) => {\n\tlet activePlayerUI;\n\tconst divEl = document.createElement('div');\n\tconst fistBubble = document.createElement('div');\n\tconst secondBubble = document.createElement('div');\n\tconst thirdBubble = document.createElement('div');\n\n\tif (player === 'player1') {\n\t\tactivePlayerUI = document.querySelector('.player-1__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-1 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-1__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-1__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-1__third-bubble';\n\t} else {\n\t\tactivePlayerUI = document.querySelector('.player-2__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-2 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-2__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-2__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-2__third-bubble';\n\t}\n\n\tthirdBubble.innerHTML = 'Not enough <span style = \"color: brown;\"> Energy</span>';\n\tdivEl.appendChild(fistBubble);\n\tdivEl.appendChild(secondBubble);\n\tdivEl.appendChild(thirdBubble);\n\n\tactivePlayerUI.appendChild(divEl);\n\n\tsetTimeout(() => {\n\t\tdivEl.classList.add('fade-out-animation')\n\t}, 1500);\n\n\tsetTimeout(() => {\n\t\tactivePlayerUI.removeChild(divEl)\n\t}, 2000);\n}\n\nexport {\n\tloadingScreenAnimation, playPauseBackgroundAudio, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnimation, discardCardAnimation, endTurnAnimation, attackInDirectionAnimation,\n\tblockAnimation, attackAnimation, standardAttackAnimation, multipleAttackAnimation,\n\tultimateSkillAnimation, playSoundEffect, damageNumbersAnimation, notEnoughStaminaAnimation\n};\n\n\n\n\n","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\nimport {skillCollectionImages} from './modules/preloadImages';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, skillCollectionImages.warrior.strike_w, 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, skillCollectionImages.warrior.bash, 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.anger, 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 40) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.warrior.bodySlam, 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfectedStrike = new Cards(4, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.perfectedStrike, 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, skillCollectionImages.warrior.bludgeon, 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, skillCollectionImages.warrior.defend_w, 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, skillCollectionImages.warrior.armaments, 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, skillCollectionImages.warrior.ironWave, 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.warrior.warcry, 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, skillCollectionImages.warrior.bloodletting, 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, skillCollectionImages.warrior.entrench, 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, skillCollectionImages.rogue.strike_r, 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, skillCollectionImages.rogue.daggerThrow, 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, skillCollectionImages.rogue.flechettes, 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, skillCollectionImages.rogue.riddleWithHoles, 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, skillCollectionImages.rogue.slice, 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, skillCollectionImages.rogue.quickSlash, 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, skillCollectionImages.rogue.survivor, 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, skillCollectionImages.rogue.deflect, 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 1, skillCollectionImages.rogue.backFlip, 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.rogue.prepared, 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, skillCollectionImages.rogue.expertise, 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, skillCollectionImages.rogue.dash, 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, skillCollectionImages.mage.strike_m, 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, skillCollectionImages.mage.cutThroughFate, 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, skillCollectionImages.mage.reachHeaven, 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.mage.signatureMove, 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, skillCollectionImages.mage.tantrum, 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judgment = new Cards(5, 'attackAddEffect', 2, 0, skillCollectionImages.mage.judgment, 'judgment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, skillCollectionImages.mage.masterReality, 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, skillCollectionImages.mage.defend_m, 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, skillCollectionImages.mage.meditate, 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, skillCollectionImages.mage.thirdEye, 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, skillCollectionImages.mage.nirvana, 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, skillCollectionImages.mage.alpha, 'alpha');\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfectedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judgment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, endGame} from './modules/observerModel';\n\nconst gameObserver = new Game();\n\nconst boardModel = new Board(gameObserver);\n\nconst boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nconst player1 = new Players(gameObserver, boardModel);\n\nconst player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(playersView.playerOneHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(playersView.playerTwoHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(boardView.battleField, {\n\tattributes: true\n});\n\nexport {gameObserver, boardModel, boardView, player1, player2};\n","import {playPauseBackgroundAudio} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.createCard(card, place));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('dropEvent')) {\n\t\t\tthis.boardView.dropEvent.attach(() => this.deleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.createCardsInHand());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.showPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onClosePileCards')) {\n\t\t\tthis.boardView.onClosePileCards.attach(() => this.deleteOverlayCards());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionContinue')) {\n\t\t\tthis.gameModel.selectionContinue.attach(() => this.createCard());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionEnd')) {\n\t\t\tthis.gameModel.selectionEnd.attach((restoredCards) => this.createCardsInHand(restoredCards));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player1.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player2.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player1.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player2.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('soundOffOn')) {\n\t\t\tthis.boardView.soundOffOn.attach(() => this.turnOnOfSound());\n\t\t}\n\t}\n\n\tcreateCard() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tcreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tdeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\tdeleteOverlayCards() {\n\t\tthis.boardModel.removeExtraCards('overlay');\n\t}\n\n\taddCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tshowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tturnOnOfSound() {\n\t\tplayPauseBackgroundAudio();\n\t}\n}\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation.js';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\n\t\tthis.deckWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.playersTurnInfo = document.querySelector('.players-action');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\n\t\tthis.onCreateCards = new Events();\n\n\t\tthis.removeCards = new Events();\n\t\tthis.removeActionCard = new Events();\n\t\tthis.createAnimation = new Events();\n\t\t// this.endTurnAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tif (eventTarget.classList.contains('player-1__pile-of-card')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (eventTarget.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = card.icon;\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t} else {\n\t\t\telDiv.setAttribute('draggable', 'false');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.deckWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.removeCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.removeActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.removeActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import Events from './eventsModel';\nimport {player1, player2} from '../game';\nimport {warningUnload, forbidClick} from './observerModel';\nimport {createCardAnimation, endTurnAnimation, playSoundEffect} from '../animation_and_sound_effects/animation';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.deckWrapper = this.boardSelector.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.acceptChoiceBtn = this.boardSelector.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = this.boardSelector.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHandField = this.boardSelector.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = this.boardSelector.querySelector('.battle-field');            // play field\n\t\tthis.endTurnBtn = this.boardSelector.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = this.boardSelector.querySelector('.players-action');\n\t\tthis.cardsPlayField = this.boardSelector.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOnIcon = this.boardSelector.querySelector('.sound-icon');\n\t\tthis.playersOverlay = this.boardSelector.querySelector('.players-overlay');\n\t\tthis.playersDeck = this.boardSelector.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = this.boardSelector.querySelector('.players-overlay__close');\n\t\tthis.menu = this.boardSelector.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\n\t\tthis.touchEvent = event => {\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif (event.target.classList.contains('cards')) {\n\t\t\t\tthis.touchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touch-start-animation');\n\n\t\t\t\tplaySoundEffect('.drag-audio');\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend', function touchEnd(event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY) - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touch-start-animation');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tif (comparison > 170) {\n\t\t\t\t\t\t\tself.dropEvent.notify();\n\t\t\t\t\t\t\tself.doCardAction.notify(self.gameModel.playerOneTurn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.submitCardCheckChoose = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.grabCardStart = new Events();\n\n\t\tthis.touchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.dropEvent = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.doCardAction = new Events();\n\n\t\tthis.endTurn = new Events();\n\n\t\tthis.onClosePileCards = new Events();\n\n\t\tthis.showPlayerDeck = new Events();\n\n\t\tthis.soundOffOn = new Events();\n\n\t\tthis.saveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tif ('ontouchstart' in window) {\n\t\t\tthis.cardInHandField.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('touchstart', (event) => this.cardChooseAnim(event.target));\n\t\t} else {\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('click', (event) => this.cardChooseAnim(event.target));\n\n\t\t\t// анимация карт в руке при наведении\n\t\t\tthis.cardInHandField.addEventListener('mouseover', (event) => this.cardChooseAnimInHandAdd(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseout', (event) => this.cardChooseAnimInHandRemove(event.target));\n\n\t\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.dragCardStartAnimation(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.grabCardStart.notify(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragend', (event) => this.dragCardEndAnimation(event.target));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragenter', (event) => this.dragCardEnterAnimation(event));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragover', (event) => event.preventDefault());\n\n\t\t\t// играем карты\n\t\t\tthis.cardsPlayField.addEventListener('drop', () => {\n\t\t\t\tthis.dropEvent.notify();\n\t\t\t\tthis.doCardAction.notify(this.gameModel.playerOneTurn);\n\t\t\t\tthis.deletePlayfieldAnimation();\n\t\t\t});\n\t\t}\n\n\t\tthis.acceptChoiceBtn.addEventListener('click', () => {\n\t\t\tthis.onDefineCards.notify();\n\n\t\t\tthis.submitCardCheckChoose.notify();\n\t\t});\n\n\t\tthis.battleField.addEventListener('click', (event) => {\n\t\t\tthis.showPlayerDeck.notify(event.target);\n\n\t\t\tthis.openCloseOverlay(event.target);\n\t\t});\n\n\t\tthis.playersDeckClose.addEventListener('click', (event) => {\n\t\t\tthis.onClosePileCards.notify();\n\n\t\t\tthis.openCloseOverlay(event.target);\n\t\t});\n\n\t\tthis.endTurnBtn.addEventListener('click', () => this.endTurn.notify());\n\n\t\tthis.soundOffOnIcon.addEventListener('click', () => this.soundOffOn.notify());\n\n\t\tthis.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\n\t\t\tthis.showMenu();\n\t\t});\n\n\t\tthis.menu.addEventListener('click', (event) => this.navigateGame(event.target));\n\n\t\t[...this.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', forbidClick);\n\n\t\twindow.addEventListener('beforeunload', warningUnload);\n\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.drawCards(card, place));\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.selectionEnd.attach(() => this.selectionEndUpdate());\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.removeCards.attach((cards, place) => this.extraCardsToRemove(cards, place));\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.choosePlayerInfo.attach((text) => this.playerChooseInfoUpdate(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.updatePlayersNames.attach((name1, name2) => this.playerNameUpdate(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.updatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.playerModelsUpdate(modelPlayer1, modelPlayer2));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.removeActionCard.attach((card) => this.deleteActionCard(card));\n\n\t\tthis.boardModel.createAnimation.attach((querySelector, amount) => this.createAnimation(querySelector, amount));\n\n\t\tthis.gameModel.endTurnAnimation.attach((btnSide, textInfo) => this.endTurnAnimation(btnSide, textInfo));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tif (localStorage.getItem('gameData')) {\n\t\t\tthis.checkRestoreGame();\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.onLoadCreate.notify();\n\t\t}\n\t};\n\n\tdrawCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.deckWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.cardInHandField.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.cardsChooseCounter.textContent = '0';\n\n\t\tthis.cardsChooseCounter.style = 'color: white';\n\t};\n\n\textraCardsToRemove(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.deckWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.cardInHandField.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteActionCard(card) {\n\t\tthis.cardInHandField.removeChild(card);\n\t}\n\n\tcounterUpdate(info) {\n\t\tthis.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\tselectionEndUpdate() {\n\t\tthis.deckWrapper.style.display = 'none';\n\n\t\tthis.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\tplayerChooseInfoUpdate(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\tplayerNameUpdate(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\tplayerModelsUpdate(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\tcreateAnimation(querySelector, amount) {\n\t\tcreateCardAnimation(querySelector, amount);\n\t}\n\n\tendTurnAnimation(btnSide, textInfo) {\n\t\tendTurnAnimation(btnSide);\n\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tthis.playersTurnInfo.textContent = textInfo;\n\t}\n\n\tshowMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateGame(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tthis.saveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckRestoreGame() {\n\n\t\tthis.playersOverlay.classList.remove('hidden');\n\t\tthis.playersOverlay.classList.add('fade-in-animation');\n\t\tthis.playersDeckClose.classList.add('hidden');\n\n\t\tconst divEl = document.createElement('div');\n\n\t\tdivEl.className = 'confirm-continue';\n\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\tconst choiceYes = document.createElement('button');\n\n\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\tchoiceYes.textContent = 'Yes';\n\n\t\tconst choiceNo = document.createElement('button');\n\n\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\tchoiceNo.textContent = 'No';\n\n\t\tdivEl.appendChild(choiceYes);\n\t\tdivEl.appendChild(choiceNo);\n\n\t\tthis.playersOverlay.appendChild(divEl);\n\n\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.doContinueDecision(event.target));\n\n\t}\n\n\tdoContinueDecision(eventTarget) {\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\tthis.playersOverlay.removeChild(divEl);\n\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\t\t\t\tthis.playersDeckClose.classList.remove('hidden');\n\n\t\t\t\tthis.onLoadCreate.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-animation');\n\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\tdragCardStartAnimation(eventTarget) {\n\t\tplaySoundEffect('.drag-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\tsetTimeout(() => eventTarget.classList.add('invisible'), 0);\n\n\t\t\tthis.cardsPlayField.classList.add('pulse-animation');\n\t\t}\n\t}\n\n\tdragCardEndAnimation(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\teventTarget.classList.remove('invisible');\n\t\t}\n\n\t\tthis.deletePlayfieldAnimation();\n\t}\n\n\tdragCardEnterAnimation(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.cardsPlayField.classList.add('pulse-animation-enter');\n\t}\n\n\tdeletePlayfieldAnimation() {\n\t\tthis.cardsPlayField.classList.remove('pulse-animation-enter');\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\t// подсветка выбранных карт\n\tcardChooseAnim(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.deckWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio');\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.counterUpdate(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandAdd(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandRemove(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\topenCloseOverlay(target) {\n\t\tif (target.classList.contains('player-1__pile-of-card') || target.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-pile-animation');\n\n\t\t\tplaySoundEffect('.overlay-open-audio');\n\t\t}\n\n\t\tif (target.classList.contains('players-overlay__close')) {\n\t\t\tthis.playersOverlay.classList.remove('fade-in-pile-animation');\n\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\tplaySoundEffect('.overlay-close-audio');\n\t\t}\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.defineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('submitCardCheckChoose')) {\n\t\t\tthis.boardView.submitCardCheckChoose.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('touchCardStart')) {\n\t\t\tthis.boardView.touchCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.startRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tactionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\n\t\tthis.gameModel.setTextTurnInfo();\n\t}\n\n\tonSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tstartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.selectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.selectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.choosePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.updatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.updatePlayersModels = new Events();\n\n\t\t// анимация конца хода\n\t\tthis.endTurnAnimation = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.updatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.updatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\tsetTextTurnInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.endTurnAnimation.notify('left', `${this.playersInfo.playerOneName}'s Turn`);\n\t\t} else {\n\t\t\tthis.endTurnAnimation.notify('right', `${this.playersInfo.playerTwoName}'s Turn`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.selectionEnd.notify();\n\t\t\tthis.setTextTurnInfo();\n\t\t} else {\n\t\t\tthis.selectionContinue.notify();\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tthis.setTextTurnInfo();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.selectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import {gameObserver, boardView} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\n\nconst endGame = mutations => {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n}\n\nconst allowSaveConcede = () => {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nconst forbidSaveConcede = () => {\n\tdocument.querySelector('.save-progress').addEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').addEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.remove('save-progress-allow');\n\tdocument.querySelector('.concede').classList.remove('concede-allow');\n}\n\nconst hideInterfaceElements = () => {\n\tboardView.cardInHandField.classList.add('hidden');\n\n\tboardView.endTurnBtn.classList.add('hidden')\n\n\tdocument.querySelector('.background-music-battlefield').pause();\n\n\tplaySoundEffect('.victory-audio');\n\n\tlocalStorage.removeItem('gameData');\n}\n\nconst proposePlayAgain = () => {\n\tconst divEl = document.createElement('div');\n\n\tdivEl.className = 'play-again';\n\tdivEl.textContent = 'Do you want to play one more battle?';\n\n\tconst choiceYes = document.createElement('button');\n\n\tchoiceYes.className = 'play-again__accept';\n\tchoiceYes.textContent = 'Yes';\n\n\tconst choiceNo = document.createElement('button');\n\n\tchoiceNo.className = 'play-again__reject';\n\tchoiceNo.textContent = 'No';\n\n\tdivEl.appendChild(choiceYes);\n\tdivEl.appendChild(choiceNo);\n\n\tboardView.boardSelector.appendChild(divEl);\n\n\tchoiceYes.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\twindow.location.reload();\n\t});\n\n\tchoiceNo.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\t\tboardView.playersTurnInfo.display= 'none';\n\t\tdivEl.style.display = 'none';\n\t\tdocument.title = 'Main menu';\n\t\tlocation.hash = decodeURIComponent('main-menu');\n\t});\n}\n\nconst warningUnload = event => {\n\tevent.preventDefault();\n\tevent.returnValue = '';\n}\n\nconst forbidClick = event => event.stopPropagation();\n\nexport {endGame, allowSaveConcede, warningUnload, forbidClick}","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('doCardAction')) {\n\t\t\tthis.boardView.doCardAction.attach((priority) => this.playCard(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('updateInitialValue')) {\n\t\t\tthis.playersView.updateInitialValue.attach(() => this.updateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tplayCard(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tupdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tonSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tplaySoundEffect,\n\tcreateCardAnimation,\n\tdiscardCardAnimation,\n\tnotEnoughStaminaAnimation\n} from '../animation_and_sound_effects/animation.js';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.playerViewUpdate = new Events();\n\t\tthis.cardDraw = new Events();\n\t\tthis.cardDiscard = new Events();\n\t\tthis.actionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.playerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.playerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t(this.gameModel.playerOneTurn) ? notEnoughStaminaAnimation('player1') : notEnoughStaminaAnimation()\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.cardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tthis.cardDiscard.notify(element)\n\t\t}\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judgment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.actionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tattackAnimation, attackInDirectionAnimation, blockAnimation,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standardAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport {animationCollectionImages} from './preloadImages';\n\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tconst playerContainer = container;\n\n\t\tthis.updateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.playerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.playerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.actionAnimation.attach(() => this.doAnimation());\n\t\tthis.playerTwoModel.actionAnimation.attach(() => this.doAnimation());\n\n\t\tthis.gameModel.selectionEnd.attach(() => {\n\t\t\tthis.updateViewHP();\n\t\t\tthis.updateViewDef();\n\t\t\tthis.updateViewStamina();\n\t\t});\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\tupdateViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\tupdateViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-positive-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-positive-animation');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-positive-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-positive-animation', 0);\n\t\t}\n\t};\n\n\tupdateViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damage-number-animation', resultContent);\n\t};\n\n\tdoAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.reachHeaven);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateViewStamina();\n\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandardAttackAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.bloodletting);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\n\t\t\t\tthis.updateViewHP();\n\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.refreshStamina);\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.mageEffect);\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack, 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.serpentRing);\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warrior-ultimate-animation', animationCollectionImages.flash, '.flash-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.daggersSvg, '.backstab-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mage-ultimate-animation', animationCollectionImages.mageAttack, '.mage-ultimate-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judgment':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.judgmentSvg, '.judj-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","const preloadSkillImages = object => {\r\n\tlet tempObeject = {};\r\n\r\n\tfor (let key in object) {\r\n\t\tlet regex = /(svg)$/ig;\r\n\r\n\t\tif(regex.test(key)) {\r\n\t\t\tlet temp = document.createElement('object');\r\n\r\n\t\t\ttemp.data = object[key];\r\n\r\n\t\t\ttempObeject[key] = temp;\r\n\t\t} else  {\r\n\t\t\tlet img = new Image();\r\n\r\n\t\t\timg.src = object[key];\r\n\r\n\t\t\ttempObeject[key] = img;\r\n\t\t}\r\n\t}\r\n\r\n\treturn tempObeject;\r\n};\r\n\r\nconst skillCollectionLinks = {\r\n\twarrior: {\r\n\t\tstrike_w: './images/cards/warrior/strike.png',\r\n\t\tbash: './images/cards/warrior/bash.png',\r\n\t\tanger: './images/cards/warrior/anger.png',\r\n\t\tbodySlam: './images/cards/warrior/bodySlam.png',\r\n\t\tperfectedStrike: './images/cards/warrior/perfectedStrike.png',\r\n\t\tbludgeon: './images/cards/warrior/bludgeon.png',\r\n\t\tdefend_w: './images/cards/warrior/defend_w.png',\r\n\t\tarmaments: './images/cards/warrior/armaments.png',\r\n\t\tironWave: './images/cards/warrior/ironWave.png',\r\n\t\twarcry: './images/cards/warrior/warcry.png',\r\n\t\tbloodletting: './images/cards/warrior/bloodletting.png',\r\n\t\tentrench: './images/cards/warrior/entrench.png'\r\n\t},\r\n\trogue: {\r\n\t\tstrike_r: './images/cards/rogue/strike_G.png',\r\n\t\tdaggerThrow: './images/cards/rogue/r_dagger-throw.png',\r\n\t\tflechettes: './images/cards/rogue/flechettes.png',\r\n\t\triddleWithHoles: './images/cards/rogue/riddleWithHoles.png',\r\n\t\tslice: './images/cards/rogue/slice.png',\r\n\t\tquickSlash: './images/cards/rogue/quickSlash.png',\r\n\t\tsurvivor: './images/cards/rogue/survivor.png',\r\n\t\tdeflect: './images/cards/rogue/deflect.png',\r\n\t\tbackFlip: './images/cards/rogue/backFlip.png',\r\n\t\tprepared: './images/cards/rogue/prepared.png',\r\n\t\texpertise: './images/cards/rogue/expertise.png',\r\n\t\tdash: './images/cards/rogue/dash.png'\r\n\t},\r\n\tmage: {\r\n\t\tstrike_m: './images/cards/mage/strike_P.png',\r\n\t\tcutThroughFate: './images/cards/mage/cutThroughFate.png',\r\n\t\treachHeaven: './images/cards/mage/reachHeaven.png',\r\n\t\tsignatureMove: './images/cards/mage/signatureMove.png',\r\n\t\ttantrum: './images/cards/mage/tantrum.png',\r\n\t\tjudgment: './images/cards/mage/judgment.png',\r\n\t\tmasterReality: './images/cards/mage/masterReality.png',\r\n\t\tdefend_m: './images/cards/mage/defend_P.png',\r\n\t\tmeditate: './images/cards/mage/meditate.png',\r\n\t\tthirdEye: './images/cards/mage/thirdEye.png',\r\n\t\tnirvana: './images/cards/mage/nirvana.png',\r\n\t\talpha: './images/cards/mage/alpha.png',\r\n\t}\r\n};\r\n\r\nconst animationCollectionLinks = {\r\n\tanger: './images/attack-effects/anger.png',\r\n\tbloodletting: './images/attack-effects/bloodletting.png',\r\n\tdaggersSvg: './images/attack-effects/daggers.svg',\r\n\tflash: './images/attack-effects/flash.png',\r\n\tjudgmentSvg: './images/attack-effects/judgment.svg',\r\n\tmageAttack: './images/attack-effects/mage-attack.png',\r\n\tmageEffect: './images/attack-effects/mage-effect.png',\r\n\treachHeaven: './images/attack-effects/reach-heaven.png',\r\n\trefreshStamina: './images/attack-effects/refresh-stamina.svg',\r\n\tserpentRing: './images/attack-effects/serpent-ring.png',\r\n\tsmash: './images/attack-effects/smash.png',\r\n\twarriorAttack: './images/attack-effects/warrior-attack.png',\r\n\twarriorSmash: './images/attack-effects/warrior-smash.png',\r\n\tdefend: './images/icons/icon_Block.png'\r\n};\r\n\r\nexport const skillCollectionImages = {\r\n\twarrior: preloadSkillImages(skillCollectionLinks.warrior),\r\n\trogue: preloadSkillImages(skillCollectionLinks.rogue),\r\n\tmage: preloadSkillImages(skillCollectionLinks.mage),\r\n};\r\n\r\nexport const animationCollectionImages = preloadSkillImages(animationCollectionLinks);\r\n\r\n\r\n\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./js/game.js\");\n"],"sourceRoot":""}
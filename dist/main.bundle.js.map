{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","skillCollection","warrior","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","rogue","mage","Math","floor","random","shakeAnimation","queryElement","direction","element","document","querySelector","classList","remove","setTimeout","add","createCardAnim","amount","elementAnim","i","contains","playSoundEffect","discardCardAnim","blockAnimationEffect","className","src","container","parentElement","image","createElement","appendChild","removeChild","attackAnimation","style","transform","standartAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","attackAnimationEffect","querySelectorAll","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","playersInfo","dragCard","tempCard","selectionEnd","selectionContinue","choosePlayerInfo","updatePlayersNames","updatePlayersModels","init","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","object","temp","localStorage","getItem","JSON","parse","notify","playerOneName","playerTwoName","player1","player2","cards","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","datainfo","search","j","eventTarget","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","console","log","setItem","stringify","activePlayerHand","tempData","divEl","Board","model","gameModel","decWrapper","btnAccept","cardsChooseCounter","battleField","endTurn","playersTurnInfo","cardsPlayField","soundOffOn","playersOverlay","playersDeck","playersDeckClose","showDeckPlayer1","showDeckPlayer2","menu","menuIcon","onCreateCards","onCounterChange","removeCards","removeActionCard","createAnimation","endTurnAnimation","playerClassInfo","removeExtraCards","createCards","target","state","card","appendPlace","draggable","elDiv","setAttribute","backgroundImage","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","toggle","counterInfo","number","color","event","preventDefault","textContent","BoardView","board","game","selector","boardSelector","forbidClick","stopPropagation","touchEvent","self","coordinateY","touches","pageY","touchCardStart","addEventListener","touchEnd","comparison","parseFloat","changedTouches","dropEvent","doCardAction","removeEventListener","onLoadCreate","onDefineCards","onAnimCards","submitCardCheckChoose","cardInHandChoosen","grabCardStart","grabCardEnd","preventDrag","showPlayerDeck","saveGameProgres","onRestoreGameData","onConcede","showMenu","navigateGame","getElementsByTagName","button","window","returnValue","attach","drawCards","counterUpdate","selectionEndUpdate","extraCardsToRemove","text","playerChooseInfoUpdate","name1","name2","playerNameUpdate","modelPlayer1","modelPlayer2","playerModelsUpdate","deleteActionCard","side","checkRestoreGame","display","player1Model","player2Model","data","turnAnnouncer","removeProperty","left","right","endTurnAnim","menuList","split","title","location","hash","decodeURIComponent","doConcede","substr","choiceYes","choiceNo","doContinueDecision","GameController","view","boardView","defineCards","doCardCheckChoose","actionCard","doEndTurn","onSaveGameData","startRestoreData","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","playerViewUpdate","cardDraw","cardDiscard","actionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","test","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","player","PlayersView","playerOneModel","playerTwoModel","playerContainer","updateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","updateViewHP","updateViewStamina","doAnimation","updateViewDef","width","passivePlayerUI","content","calcDP","activePlayerUI","updateDamageNumbers","amountEffect","effectStorage","elem","multipleAttackAnimation","PlayersController","playerView","playersView","priority","playCard","onSavePlayerData","doAction","updateInitialValues","BoardController","playerModel1","playerModel2","createCard","cardAnimBoard","cardAnimHand","grabedCardAnim","createCardsInHand","setPlayersTurnInfo","showPlayersDeck","closePlayersDeck","restoredCards","addCardInHand","deleteRandomCard","turnOnOfSound","createCardsForChoose","cardChooseAnim","cardChooseAnimInHandAdd","cardChooseAnimInHandRemove","pullRandomCardsInHand","dragCardStart","dragCardEnd","dragPreventAction","deletePlayedCard","showCardsForPlayers","openCloseOverlay","showWhichTurn","backAudio","paused","pause","player1HPstatus","player2HPstatus","battleground","winConditionObserver","MutationObserver","mutations","childNodes","removeItem","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, './images/cards/warrior/Strike.png', 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, './images/cards/warrior/Bash.png', 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, './images/cards/warrior/Anger.png', 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 50) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, './images/cards/warrior/BodySlam.png', 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfecedStrike = new Cards(4, 'attackAddEffect', 1, 6, './images/cards/warrior/PerfectedStrike.png', 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, './images/cards/warrior/Bludgeon.png', 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, './images/cards/warrior/Defend_R.png', 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, './images/cards/warrior/Armaments.png', 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, './images/cards/warrior/IronWave.png', 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, './images/cards/warrior/Warcry.png', 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, './images/cards/warrior/Bloodletting.png', 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, './images/cards/warrior/Entrench.png', 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, './images/cards/rogue/Strike_G.png', 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, './images/cards/rogue/R_dagger-throw.png', 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, './images/cards/rogue/Flechettes.png', 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, './images/cards/rogue/RiddleWithHoles.png', 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, './images/cards/rogue/Slice.png', 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, './images/cards/rogue/QuickSlash.png', 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, './images/cards/rogue/Survivor.png', 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, './images/cards/rogue/Deflect.png', 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 2, './images/cards/rogue/Backflip.png', 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, './images/cards/rogue/Prepared.png', 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, './images/cards/rogue/Expertise.png', 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, './images/cards/rogue/Dash.png', 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, './images/cards/mage/Strike_P.png', 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, './images/cards/mage/CutThroughFate.png', 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, './images/cards/mage/ReachHeaven.png', 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, './images/cards/mage/SignatureMove.png', 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, './images/cards/mage/Tantrum.png', 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judjment = new Cards(5, 'attackAddEffect', 2, 0, './images/cards/mage/Judgment.png', 'judjment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, './images/cards/mage/MasterReality.png', 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, './images/cards/mage/Defend_P.png', 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, './images/cards/mage/Meditate.png', 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, './images/cards/mage/ThirdEye.png', 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, './images/cards/mage/Nirvana.png', 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, './images/cards/mage/Alpha.png', 'alpha');\n\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfecedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judjment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n","// animation through all menu loading black screen\nfunction loading(target) {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n}\n\n// starting play backgorundMusic\nfunction switchPlayPause() {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.soundIcon');\n\tlet backAudio;\n\n\tif (state == 'battle-field') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t}\n}\n\n//#TODO рефактор бэкгроунд музыки т.к. изменилась навигация по меню\nconst checkBackgroundAudio = (function (querySelector) {\n\tconst currentHash = [];\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\treturn function () {\n\t\tcurrentHash.push(decodeURIComponent(window.location.hash.substr(1)));\n\n\t\tconst soundOffOn = document.querySelector(querySelector);\n\n\t\tif (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.play();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.play();\n\t\t\taudio.pause();\n\t\t}\n\n\t\tif ([...allAudio].every(element => element.paused)) {\n\t\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t\t} else {\n\t\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t\t}\n\t};\n}('.soundIcon'));\n\n// shake display when character choosed\nfunction shakeAnimation(queryElement, direction = 'horizontal') {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shakeX');\n\t\t\tsetTimeout(() => element.classList.add('shakeX'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeX'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shakeY');\n\t\t\tsetTimeout(() => element.classList.add('shakeY'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeY'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shakeMix');\n\t\t\tsetTimeout(() => element.classList.add('shakeMix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeMix'), 400);\n\t\t\tbreak;\n\t}\n}\n\nfunction createCardAnim(querySelector, amount) {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('cardsDrawAnim')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('cardsDrawAnim');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('cardsDrawAnim');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('cardsDrawAnim'));\n\t}\n}\n\nfunction discardCardAnim(querySelector) {\n\tquerySelector.classList.add('cardDiscard');\n}\n\nfunction endTurnAnim(side) {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('endTurnAnim'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('endTurnAnim'), 1000);\n}\n\nfunction blockAnimationEffect(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n}\n\nfunction attackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n}\n\nfunction multipleAttackAnimation(querySelector, className, src, amountEffect) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tlet effectStorage = [];\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tconst image = document.createElement('img');\n\t\teffectStorage.push(image);\n\t}\n\n\teffectStorage.forEach((elem, index) => {\n\t\telem.src = src;\n\n\t\tif (index === 1) {\n\t\t\telem.style.transform = 'rotate(30deg)';\n\t\t} else if (index === 2) {\n\t\t\telem.style.transform = 'rotate(315deg)';\n\t\t}\n\n\t\telem.className = className;\n\n\t\tsetTimeout(() => {\n\t\t\tcontainer.appendChild(elem);\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\tsetTimeout(() => container.removeChild(elem), 400);\n\t\t}, index * 300);\n\t});\n}\n\nfunction standartAttackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n}\n\nfunction ultimateSkillAnimation(querySelector, className, src, audio) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\tshakeAnimation(querySelector)\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out');\n\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in');\n\t\toverlay.classList.remove('fade-out');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1600);\n}\n\nfunction playSoundEffect(querySelector) {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n}\n\nfunction attackAnimationEffect(querySelector, direction) {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attackRight');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackRight'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attackLeft');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackLeft'), 1000);\n\t\t\tbreak;\n\t}\n}\n\nfunction damageNumbersAnimation(querySelector, className, content) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n}\n\nexport {\n\tloading, switchPlayPause, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnim, endTurnAnim, blockAnimationEffect, attackAnimation,\n\tplaySoundEffect, attackAnimationEffect, multipleAttackAnimation, discardCardAnim,\n\tstandartAttackAnimation, ultimateSkillAnimation, damageNumbersAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.selectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.selectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.choosePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.updatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.updatePlayersModels = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.updatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.updatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.selectionEnd.notify();\n\t\t} else {\n\t\t\tthis.selectionContinue.notify();\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.selectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {createCardAnim, playSoundEffect, endTurnAnim} from '../animation_and_sound_effects/animation.js';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\n\t\tthis.decWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.btnAccept = document.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = document.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = document.querySelector('.battle-field');            // play field\n\t\tthis.endTurn = document.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = document.querySelector('.players-action');\n\t\tthis.cardsPlayField = document.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOn = document.querySelector('.soundIcon');\n\n\t\tthis.playersOverlay = document.querySelector('.players-overlay');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = document.querySelector('.players-overlay__close');\n\n\t\tthis.showDeckPlayer1 = document.querySelector('.player-1__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\t\tthis.showDeckPlayer2 = document.querySelector('.player-2__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\n\t\tthis.menu = document.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = document.querySelector('.battle-field-nav__icon');\n\n\t\t// создаем событие на создание карт\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onCounterChange = new Events();\n\t\tthis.removeCards = new Events();\n\t\tthis.removeActionCard = new Events();\n\t\tthis.createAnimation = new Events();\n\t\tthis.endTurnAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.removeExtraCards('overlay');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target.classList.contains('player-1__pile-of-car')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (target.classList.contains('player-2__pile-of-car')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\topenCloseOverlay(state) {\n\t\tswitch (state) {\n\t\t\tcase 'open':\n\t\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\t\tthis.playersOverlay.classList.add('fade-in-pile');\n\n\t\t\t\tplaySoundEffect('.overlay-open-audio');\n\n\t\t\t\tbreak;\n\t\t\tcase 'close':\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-pile');\n\n\t\t\t\tplaySoundEffect('.overlay-close-audio');\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = document.createElement('div');\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\t\telDiv.style.backgroundImage = `url(${card.icon})`;\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.decWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.removeCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.removeActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.removeActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// подсветка выбранных карт\n\tcardChooseAnim(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.decWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio')\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.onCounterChange.notify(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandAdd(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandRemove(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\tdragCardStart(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\tsetTimeout(() => target.classList.add('invisible'), 0);\n\t\t}\n\n\t\tplaySoundEffect('.drag-audio');\n\t}\n\n\t//у ираем стили для перетаскивания\n\tdragCardEnd(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('invisible');\n\t\t}\n\t}\n\n\tdragPreventAction(event) {\n\t\tevent.preventDefault();\n\t}\n\n\tshowWhichTurn() {\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerOneName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('left');\n\n\t\t\t// endTurnAnim('left');\n\t\t} else {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerTwoName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('right');\n\n\t\t\t// endTurnAnim('right');\n\t\t}\n\t}\n}\n","import Events from './eventsModel';\nimport {createCardAnim, endTurnAnim, playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {gameObserver, player1} from '../game';\nimport {player2} from '../game';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.forbidClick = event => event.stopPropagation();\n\n\t\tthis.touchEvent = event => {\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif(event.target.classList.contains('cards')) {\n\t\t\t\tthis.touchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touchStartAnim');\n\n\t\t\t\tplaySoundEffect('.drag-audio')\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconsole.log(self.boardSelector);\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend', function touchEnd (event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY)  - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touchStartAnim');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tconsole.log(comparison)\n\n\t\t\t\t\t\tif(comparison > 140) {\n\t\t\t\t\t\t\tself.dropEvent.notify()\n\t\t\t\t\t\t\tself.doCardAction.notify(self.gameModel.playerOneTurn)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdocument.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на анимацию(подсветку выбора карт)\n\t\tthis.onAnimCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.submitCardCheckChoose = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.cardInHandChoosen = new Events();\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.grabCardStart = new Events();\n\n\t\tthis.grabCardEnd = new Events();\n\n\t\tthis.preventDrag = new Events();\n\n\t\tthis.touchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.dropEvent = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.doCardAction = new Events();\n\n\t\tthis.endTurn = new Events();\n\n\t\tthis.showPlayerDeck = new Events();\n\n\t\tthis.soundOffOn = new Events();\n\n\t\tthis.saveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.onDefineCards.notify());\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.submitCardCheckChoose.notify());\n\n\t\t// событие клик подстветка выбора карт\n\t\tthis.boardModel.decWrapper.addEventListener('click', (event) => this.onAnimCards.notify(event.target));\n\n\t\t// показываем карты какие наюрал игрок на этапе выбора\n\t\tthis.boardModel.battleField.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\tthis.boardModel.playersDeckClose.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\t// анимация карт в руке при наведении\n\t\tthis.boardModel.cardInHand.addEventListener('mouseover', (event) => this.cardInHandChoosen.notify(event.target, 'focus'));\n\n\t\tthis.boardModel.cardInHand.addEventListener('mouseout', (event) => this.cardInHandChoosen.notify(event.target, 'blur'));\n\n\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\tthis.boardModel.cardInHand.addEventListener('dragstart', (event) => this.grabCardStart.notify(event.target, 'focus'));\n\n\t\tthis.boardModel.cardInHand.addEventListener('dragend', (event) => this.grabCardEnd.notify(event.target, 'blur'));\n\n\t\t// prevent default behavior\n\t\tthis.boardModel.cardsPlayField.addEventListener('dragenter', (event) => this.preventDrag.notify(event));\n\n\t\tthis.boardModel.cardsPlayField.addEventListener('dragover', (event) => this.preventDrag.notify(event));\n\n\t\t// играем карты\n\t\tthis.boardModel.cardsPlayField.addEventListener('drop', () => {\n\t\t\tthis.dropEvent.notify();\n\t\t\tthis.doCardAction.notify(this.gameModel.playerOneTurn);\n\t\t})\n\n\t\tthis.boardModel.cardInHand.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\tthis.boardModel.endTurn.addEventListener('click', () => this.endTurn.notify());\n\n\t\tthis.boardModel.soundOffOn.addEventListener('click', () => this.soundOffOn.notify());\n\n\t\tthis.boardModel.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\t\t\tthis.showMenu()\n\t\t});\n\n\t\t// this.boardModel.menuIcon.addEventListener('click', () => );\n\n\t\tthis.boardModel.menu.addEventListener('click', (event) => this.navigateGame(event.target));\n\n\t\t[...this.boardModel.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', this.forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', this.forbidClick);\n\n\t\twindow.addEventListener('beforeunload', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.returnValue = '';\n\t\t});\n\n\n\t\t// подписываемся на событие в модели\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.drawCards(card, place));\n\n\t\t// модель меняет количество набранных карт отображаем\n\t\tthis.boardModel.onCounterChange.attach((info) => this.counterUpdate(info));\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.selectionEnd.attach(() => this.selectionEndUpdate());\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.removeCards.attach((cards, place) => this.extraCardsToRemove(cards, place));\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.choosePlayerInfo.attach((text) => this.playerChooseInfoUpdate(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.updatePlayersNames.attach((name1, name2) => this.playerNameUpdate(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.updatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.playerModelsUpdate(modelPlayer1, modelPlayer2));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.removeActionCard.attach((card) => this.deleteActionCard(card));\n\n\t\tthis.boardModel.createAnimation.attach((querySelector, amount) => this.createAnimation(querySelector, amount));\n\n\t\tthis.boardModel.endTurnAnimation.attach((side) => this.endTurnAnimation(side));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tthis.onLoadCreate.notify();\n\t\tthis.checkRestoreGame();\n\t};\n\n\tdrawCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.boardModel.decWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.boardModel.cardInHand.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.boardModel.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.boardModel.cardsChooseCounter.textContent = '0';\n\n\t\tthis.boardModel.cardsChooseCounter.style = 'color: white';\n\t};\n\n\textraCardsToRemove(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.decWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.cardInHand.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteActionCard(card) {\n\t\tthis.boardModel.cardInHand.removeChild(card);\n\t}\n\n\tcounterUpdate(info) {\n\t\tthis.boardModel.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.boardModel.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\tselectionEndUpdate() {\n\t\tthis.boardModel.decWrapper.style.display = 'none';\n\n\t\tthis.boardModel.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\tplayerChooseInfoUpdate(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\tplayerNameUpdate(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\tplayerModelsUpdate(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif(this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\tcreateAnimation(querySelector, amount) {\n\t\tcreateCardAnim(querySelector, amount);\n\t}\n\n\tendTurnAnimation(side) {\n\t\tendTurnAnim(side);\n\t}\n\n\tshowMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateGame(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.saveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckRestoreGame() {\n\t\tconst hash = window.location.hash;\n\t\tconst state = decodeURIComponent(hash.substr(1));\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\n\t\tif (state === 'restoredGame') {\n\t\t\toverlay.classList.remove('hidden');\n\t\t\toverlay.classList.add('fade-in');\n\t\t\toverlayClose.classList.add('hidden');\n\n\t\t\tconst divEl = document.createElement('div');\n\n\t\t\tdivEl.className = 'confirm-continue';\n\t\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\t\tconst choiceYes = document.createElement('button');\n\n\t\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\t\tchoiceYes.textContent = 'Yes';\n\n\t\t\tconst choiceNo = document.createElement('button');\n\n\t\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\t\tchoiceNo.textContent = 'No';\n\n\t\t\tdivEl.appendChild(choiceYes);\n\t\t\tdivEl.appendChild(choiceNo);\n\n\t\t\toverlay.appendChild(divEl);\n\n\t\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.doContinueDecision(event.target));\n\t\t}\n\t}\n\n\tdoContinueDecision(eventTarget) {\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\toverlay.removeChild(divEl);\n\n\t\t\t\toverlay.classList.add('hidden');\n\t\t\t\toverlayClose.classList.remove('hidden');\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.defineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('submitCardCheckChoose')) {\n\t\t\tthis.boardView.submitCardCheckChoose.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('touchCardStart')) {\n\t\t\tthis.boardView.touchCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.startRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tactionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\t}\n\n\tonSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tstartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {playSoundEffect, createCardAnim, discardCardAnim} from '../animation_and_sound_effects/animation.js';\nimport {player1} from '../game';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.playerViewUpdate = new Events();\n\t\tthis.cardDraw = new Events();\n\t\tthis.cardDiscard = new Events();\n\t\tthis.actionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.playerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.playerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.cardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\t// setTimeout(() => this.cardDiscard.notify(element), 300)\n\t\t\tthis.cardDiscard.notify(element)\n\t\t}\n\t}\n\n\t// we take condition only for card \"expertise\"\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judjment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.actionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import {\n\tattackAnimation, attackAnimationEffect, blockAnimationEffect,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standartAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport Events from './eventsModel';\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tconst playerContainer = container;\n\n\t\tthis.updateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.actionAnimation.attach(() => this.doAnimation());\n\t\tthis.playerTwoModel.actionAnimation.attach(() => this.doAnimation());\n\n\t\tthis.gameModel.selectionEnd.attach(() => {\n\t\t\tthis.updateViewHP();\n\t\t\tthis.updateViewDef();\n\t\t\tthis.updateViewStamina();\n\t\t})\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\tupdateViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\tupdateViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerOneDefenceValue.classList.remove('defendValuePositive');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValuePositive');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValuePositive', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValuePositive', 0);\n\t\t}\n\t};\n\n\tupdateViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damageNumberAnimate', resultContent);\n\t};\n\n\tdoAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack', 'images/attack-effects/warrior-attack.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/anger.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/reach-heaven.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/anger.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateViewStamina();\n\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandartAttackAnimation(activePlayerUI, 'shield', 'images/attack-effects/bloodletting.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\n\t\t\t\tthis.updateViewHP();\n\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', 'images/attack-effects/refresh-stamina.svg');\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/mageEffect.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack', 'images/attack-effects/warrior-attack.png', 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', 'images/attack-effects/serpent_ring.png');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warriorUltimate', 'images/attack-effects/flash.png', '.flash-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', 'images/attack-effects/daggers.svg', '.backstab-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mageUltimate', 'images/attack-effects/mage-attack.png', '.mage-ultimate-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judjment':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', 'images/attack-effects/judjment.svg', '.judj-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('doCardAction')) {\n\t\t\tthis.boardView.doCardAction.attach((priority) => this.playCard(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('updateInitialValue')) {\n\t\t\tthis.playersView.updateInitialValue.attach(() => this.updateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tplayCard(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tupdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tonSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {switchPlayPause} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.createCard(card, place));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onAnimCards')) {\n\t\t\tthis.boardView.onAnimCards.attach((event) => this.cardAnimBoard(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('cardInHandChoosen')) {\n\t\t\tthis.boardView.cardInHandChoosen.attach((event, state) => this.cardAnimHand(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardEnd')) {\n\t\t\tthis.boardView.grabCardEnd.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('preventDrag')) {\n\t\t\tthis.boardView.preventDrag.attach((event) => this.preventDrag(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('dropEvent')) {\n\t\t\tthis.boardView.dropEvent.attach(() => this.deleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.createCardsInHand());\n\t\t\tthis.boardView.endTurn.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.showPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.closePlayersDeck(event));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionContinue')) {\n\t\t\tthis.gameModel.selectionContinue.attach(() => this.createCard());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionEnd')) {\n\t\t\tthis.gameModel.selectionEnd.attach((restoredCards) => this.createCardsInHand(restoredCards));\n\t\t\tthis.gameModel.selectionEnd.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player1.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player2.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player1.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player2.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('soundOffOn')) {\n\t\t\tthis.boardView.soundOffOn.attach(() => this.turnOnOfSound());\n\t\t}\n\t}\n\n\tcreateCard() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tcardAnimBoard(event) {\n\t\tthis.boardModel.cardChooseAnim(event);\n\t}\n\n\tcardAnimHand(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandAdd(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandRemove(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tgrabedCardAnim(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.dragCardStart(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.dragCardEnd(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpreventDrag(event) {\n\t\tthis.boardModel.dragPreventAction(event);\n\t}\n\n\tdeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\taddCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tshowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tclosePlayersDeck(event) {\n\t\tif (event == this.boardModel.showDeckPlayer1 || event == this.boardModel.showDeckPlayer2) {\n\t\t\tthis.boardModel.openCloseOverlay('open');\n\t\t}\n\t\tif (event == this.boardModel.playersDeckClose) {\n\t\t\tthis.boardModel.openCloseOverlay('close');\n\t\t}\n\t}\n\n\tsetPlayersTurnInfo() {\n\t\tthis.boardModel.showWhichTurn();\n\t}\n\n\tturnOnOfSound() {\n\t\tswitchPlayPause();\n\t}\n}\n","import {boardModel} from '../game';\nimport {gameObserver} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {boardView} from '../game';\n\nconst player1HPstatus = document.querySelector('.player-1__hp');\nconst player2HPstatus = document.querySelector('.player-2__hp');\nconst battleground = document.querySelector('.battle-field');\n\nfunction endGame(mutations) {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n}\n\nfunction allowSaveConcede() {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  boardView.forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  boardView.forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nexport {player1HPstatus, player2HPstatus, endGame, battleground, allowSaveConcede}","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, battleground, endGame, player1HPstatus, player2HPstatus} from './modules/observerModel';\n\nexport const gameObserver = new Game();\n\nexport const boardModel = new Board(gameObserver);\n\nexport const boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nexport const player1 = new Players(gameObserver, boardModel);\n\nexport const player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(player1HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(player2HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(battleground, {\n\tattributes: true\n});"],"sourceRoot":""}
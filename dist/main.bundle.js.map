{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/modules/preloadImages.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","preloadSkillImages","object","tempObeject","test","temp","document","createElement","data","img","Image","src","skillCollectionImages","warrior","strike_w","bash","anger","bodySlam","perfectedStrike","bludgeon","defend_w","armaments","ironWave","warcry","bloodletting","entrench","rogue","strike_r","daggerThrow","flechettes","riddleWithHoles","slice","quickSlash","survivor","deflect","backFlip","prepared","expertise","dash","mage","strike_m","cutThroughFate","reachHeaven","signatureMove","tantrum","judgment","masterReality","defend_m","meditate","thirdEye","nirvana","alpha","animationCollectionImages","daggersSvg","flash","judgmentSvg","mageAttack","mageEffect","refreshStamina","serpentRing","smash","warriorAttack","warriorSmash","defend","console","log","skillCollection","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","Math","floor","random","shakeAnimation","queryElement","direction","element","querySelector","classList","remove","setTimeout","add","createCardAnimation","amount","elementAnim","i","contains","playSoundEffect","discardCardAnimation","attackInDirectionAnimation","container","blockAnimation","className","parentElement","image","appendChild","removeChild","attackAnimation","style","transform","window","navigator","vibrate","standardAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","notEnoughStaminaAnimation","player","activePlayerUI","divEl","fistBubble","secondBubble","thirdBubble","innerHTML","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","playersInfo","dragCard","tempCard","selectionEnd","selectionContinue","choosePlayerInfo","updatePlayersNames","updatePlayersModels","endTurnAnimation","init","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","localStorage","getItem","JSON","parse","notify","playerOneName","playerTwoName","player1","player2","cards","querySelectorAll","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","datainfo","search","j","setTextTurnInfo","eventTarget","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","setItem","stringify","activePlayerHand","tempData","Board","model","gameModel","deckWrapper","playersTurnInfo","playersDeck","onCreateCards","removeCards","removeActionCard","createAnimation","playerClassInfo","removeExtraCards","createCards","card","appendPlace","draggable","elDiv","setAttribute","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","forbidSaveConcede","addEventListener","forbidClick","hideInterfaceElements","boardView","pause","removeItem","proposePlayAgain","textContent","choiceYes","choiceNo","removeEventListener","warningUnload","location","reload","title","hash","decodeURIComponent","event","preventDefault","returnValue","stopPropagation","BoardView","board","game","selector","boardSelector","acceptChoiceBtn","cardsChooseCounter","cardInHandField","battleField","endTurnBtn","cardsPlayField","soundOffOnIcon","playersOverlay","playersDeckClose","menu","menuIcon","touchEvent","self","coordinateY","touches","pageY","target","touchCardStart","touchEnd","comparison","parseFloat","changedTouches","dropEvent","doCardAction","onLoadCreate","onDefineCards","submitCardCheckChoose","grabCardStart","endTurn","onClosePileCards","showPlayerDeck","soundOffOn","saveGameProgres","onRestoreGameData","onConcede","cardChooseAnim","cardChooseAnimInHandAdd","cardChooseAnimInHandRemove","dragCardStartAnimation","dragCardEndAnimation","dragCardEnterAnimation","deletePlayfieldAnimation","openCloseOverlay","showMenu","navigateGame","getElementsByTagName","button","attach","drawCards","selectionEndUpdate","extraCardsToRemove","text","playerChooseInfoUpdate","name1","name2","playerNameUpdate","modelPlayer1","modelPlayer2","playerModelsUpdate","deleteActionCard","btnSide","textInfo","checkRestoreGame","number","color","display","player1Model","player2Model","side","turnAnnouncer","removeProperty","left","right","menuList","split","doConcede","doContinueDecision","toggle","counterInfo","counterUpdate","GameController","view","defineCards","doCardCheckChoose","actionCard","doEndTurn","onSaveGameData","startRestoreData","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","playerViewUpdate","cardDraw","cardDiscard","actionAnimation","initialHP","initialDP","updateView","state","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","PlayersView","playerOneModel","playerTwoModel","playerContainer","updateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","updateViewHP","updateViewStamina","doAnimation","updateViewDef","width","passivePlayerUI","content","calcDP","updateDamageNumbers","amountEffect","multipleAttackAnimation","PlayersController","playerView","playersView","priority","playCard","onSavePlayerData","doAction","updateInitialValues","BoardController","playerModel1","playerModel2","createCard","createCardsInHand","showPlayersDeck","deleteOverlayCards","restoredCards","addCardInHand","deleteRandomCard","turnOnOfSound","createCardsForChoose","pullRandomCardsInHand","deletePlayedCard","showCardsForPlayers","backAudio","substr","paused","winConditionObserver","MutationObserver","mutations","childNodes","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","const preloadSkillImages = object => {\r\n\tlet tempObeject = {};\r\n\r\n\tfor (let key in object) {\r\n\t\tlet regex = /(svg)$/ig;\r\n\r\n\t\tif(regex.test(key)) {\r\n\t\t\tlet temp = document.createElement('object');\r\n\r\n\t\t\ttemp.data = object[key];\r\n\r\n\t\t\ttempObeject[key] = temp;\r\n\t\t} else  {\r\n\t\t\tlet img = new Image();\r\n\r\n\t\t\timg.src = object[key];\r\n\r\n\t\t\ttempObeject[key] = img;\r\n\t\t}\r\n\t}\r\n\r\n\treturn tempObeject;\r\n};\r\n\r\nconst skillCollectionLinks = {\r\n\twarrior: {\r\n\t\tstrike_w: '../../images/cards/warrior/strike.png',\r\n\t\tbash: '../../images/cards/warrior/bash.png',\r\n\t\tanger: '../../images/cards/warrior/anger.png',\r\n\t\tbodySlam: '../../images/cards/warrior/bodySlam.png',\r\n\t\tperfectedStrike: '../../images/cards/warrior/perfectedStrike.png',\r\n\t\tbludgeon: '../../images/cards/warrior/bludgeon.png',\r\n\t\tdefend_w: '../../images/cards/warrior/defend_w.png',\r\n\t\tarmaments: '../../images/cards/warrior/armaments.png',\r\n\t\tironWave: '../../images/cards/warrior/ironWave.png',\r\n\t\twarcry: '../../../../images/cards/warrior/warcry.png',\r\n\t\tbloodletting: '../../../../images/cards/warrior/bloodletting.png',\r\n\t\tentrench: '../../images/cards/warrior/entrench.png'\r\n\t},\r\n\trogue: {\r\n\t\tstrike_r: '../../images/cards/rogue/strike_G.png',\r\n\t\tdaggerThrow: '../../images/cards/rogue/r_dagger-throw.png',\r\n\t\tflechettes: '../../images/cards/rogue/flechettes.png',\r\n\t\triddleWithHoles: '../../images/cards/rogue/riddleWithHoles.png',\r\n\t\tslice: '../../../../images/cards/rogue/slice.png',\r\n\t\tquickSlash: '../../images/cards/rogue/quickSlash.png',\r\n\t\tsurvivor: '../../images/cards/rogue/survivor.png',\r\n\t\tdeflect: '../../images/cards/rogue/deflect.png',\r\n\t\tbackFlip: '../../images/cards/rogue/backFlip.png',\r\n\t\tprepared: '../../images/cards/rogue/prepared.png',\r\n\t\texpertise: '../../images/cards/rogue/expertise.png',\r\n\t\tdash: '../../images/cards/rogue/dash.png'\r\n\t},\r\n\tmage: {\r\n\t\tstrike_m: '../../images/cards/mage/strike_P.png',\r\n\t\tcutThroughFate: '../../images/cards/mage/cutThroughFate.png',\r\n\t\treachHeaven: '../../images/cards/mage/reachHeaven.png',\r\n\t\tsignatureMove: '../../images/cards/mage/signatureMove.png',\r\n\t\ttantrum: '../../images/cards/mage/tantrum.png',\r\n\t\tjudgment: '../../images/cards/mage/judgment.png',\r\n\t\tmasterReality: '../../images/cards/mage/masterReality.png',\r\n\t\tdefend_m: '../../images/cards/mage/defend_P.png',\r\n\t\tmeditate: '../../../../images/cards/mage/meditate.png',\r\n\t\tthirdEye: '../../images/cards/mage/thirdEye.png',\r\n\t\tnirvana: '../../images/cards/mage/nirvana.png',\r\n\t\talpha: '../../images/cards/mage/alpha.png',\r\n\t}\r\n};\r\n\r\nconst animationCollectionLinks = {\r\n\tanger: '../../images/attack-effects/anger.png',\r\n\tbloodletting: '../../images/attack-effects/bloodletting.png',\r\n\tdaggersSvg: '../../images/attack-effects/daggers.svg',\r\n\tflash: '../../images/attack-effects/flash.png',\r\n\tjudgmentSvg: '../../images/attack-effects/judgment.svg',\r\n\tmageAttack: '../../images/attack-effects/mage-attack.png',\r\n\tmageEffect: '../../images/attack-effects/mage-effect.png',\r\n\treachHeaven: '../../images/attack-effects/reach-heaven.png',\r\n\trefreshStamina: '../../images/attack-effects/refresh-stamina.svg',\r\n\tserpentRing: '../../images/attack-effects/serpent-ring.png',\r\n\tsmash: '../../images/attack-effects/smash.png',\r\n\twarriorAttack: '../../images/attack-effects/warrior-attack.png',\r\n\twarriorSmash: '../../images/attack-effects/warrior-smash.png',\r\n\tdefend: '../../images/icons/icon_Block.png'\r\n};\r\n\r\nexport const skillCollectionImages = {\r\n\twarrior: preloadSkillImages(skillCollectionLinks.warrior),\r\n\trogue: preloadSkillImages(skillCollectionLinks.rogue),\r\n\tmage: preloadSkillImages(skillCollectionLinks.mage),\r\n};\r\n\r\nexport const animationCollectionImages = preloadSkillImages(animationCollectionLinks);\r\n\r\nconsole.log(skillCollectionImages);\r\nconsole.log(animationCollectionImages);\r\n\r\n\r\n\r\n\r\n","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\nimport {skillCollectionImages} from './modules/preloadImages';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, skillCollectionImages.warrior.strike_w, 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, skillCollectionImages.warrior.bash, 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.anger, 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 40) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.warrior.bodySlam, 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfectedStrike = new Cards(4, 'attackAddEffect', 1, 6, skillCollectionImages.warrior.perfectedStrike, 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, skillCollectionImages.warrior.bludgeon, 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, skillCollectionImages.warrior.defend_w, 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, skillCollectionImages.warrior.armaments, 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, skillCollectionImages.warrior.ironWave, 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.warrior.warcry, 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, skillCollectionImages.warrior.bloodletting, 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, skillCollectionImages.warrior.entrench, 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, skillCollectionImages.rogue.strike_r, 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, skillCollectionImages.rogue.daggerThrow, 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, skillCollectionImages.rogue.flechettes, 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, skillCollectionImages.rogue.riddleWithHoles, 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, skillCollectionImages.rogue.slice, 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, skillCollectionImages.rogue.quickSlash, 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, skillCollectionImages.rogue.survivor, 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, skillCollectionImages.rogue.deflect, 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 1, skillCollectionImages.rogue.backFlip, 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, skillCollectionImages.rogue.prepared, 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, skillCollectionImages.rogue.expertise, 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, skillCollectionImages.rogue.dash, 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, skillCollectionImages.mage.strike_m, 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, skillCollectionImages.mage.cutThroughFate, 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, skillCollectionImages.mage.reachHeaven, 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, skillCollectionImages.mage.signatureMove, 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, skillCollectionImages.mage.tantrum, 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judgment = new Cards(5, 'attackAddEffect', 2, 0, skillCollectionImages.mage.judgment, 'judgment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, skillCollectionImages.mage.masterReality, 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, skillCollectionImages.mage.defend_m, 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, skillCollectionImages.mage.meditate, 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, skillCollectionImages.mage.thirdEye, 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, skillCollectionImages.mage.nirvana, 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, skillCollectionImages.mage.alpha, 'alpha');\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfectedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judgment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n\n","// animation through all menu loading black screen\nconst loadingScreenAnimation = target => {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n};\n\n// starting play backgorundMusic\nconst playPauseBackgroundAudio = () => {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.sound-icon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t}\n};\n\n\nconst checkBackgroundAudio = (querySelector) => {\n\tconst currentHash = decodeURIComponent(window.location.hash.substr(1));\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\tconst soundOffOn = document.querySelector(querySelector);\n\n\tswitch (currentHash) {\n\t\tcase 'battle-field':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'restoredGame':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'main-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'choose-menu':\n\t\t\tif (mainAudio.paused && audio.paused) {\n\t\t\t\tmainAudio.pause();\n\t\t\t\taudio.pause();\n\t\t\t} else {\n\t\t\t\taudio.pause();\n\t\t\t\tmainAudio.play();\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tif ([...allAudio].every(element => element.paused)) {\n\t\tsoundOffOn.className = 'fas fa-volume-mute sound-icon';\n\t} else {\n\t\tsoundOffOn.className = 'fas fa-volume-up sound-icon';\n\t}\n\n};\n\n// shake display when character choosed\nconst shakeAnimation = (queryElement, direction = 'horizontal') => {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shake-x');\n\t\t\tsetTimeout(() => element.classList.add('shake-x'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-x'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shake-y');\n\t\t\tsetTimeout(() => element.classList.add('shake-y'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-y'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shake-mix');\n\t\t\tsetTimeout(() => element.classList.add('shake-mix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shake-mix'), 400);\n\t\t\tbreak;\n\t}\n};\n\nconst createCardAnimation = (querySelector, amount) => {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('card-draw-animation')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('card-draw-animation');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('card-draw-animation');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('card-draw-animation'));\n\t}\n};\n\nconst discardCardAnimation = querySelector => {\n\tquerySelector.classList.add('card-discard-animation');\n};\n\nconst endTurnAnimation = side => {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('end-turn-animation'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('end-turn-animation'), 1000);\n};\n\nconst attackInDirectionAnimation = (querySelector, direction) => {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attack-right-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-right-animation'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attack-left-animation');\n\n\t\t\tsetTimeout(() => container.classList.remove('attack-left-animation'), 1000);\n\t\t\tbreak;\n\t}\n};\n\nconst blockAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n};\n\nconst attackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n};\n\nconst standardAttackAnimation = (querySelector, className, src) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n};\n\nconst multipleAttackAnimation = (querySelector, className, src, amountEffect) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = src;\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tsetTimeout(() => {\n\t\t\tif (i === 1) {\n\t\t\t\timage.style.transform = 'rotate(30deg)';\n\t\t\t} else if (i === 2) {\n\t\t\t\timage.style.transform = 'rotate(315deg)';\n\t\t\t}\n\n\t\t\timage.className = className;\n\n\t\t\tcontainer.appendChild(image);\n\n\t\t\twindow.navigator.vibrate([200]);\n\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t}, i * 300)\n\t}\n\n\tsetTimeout(() => container.removeChild(image), 1300);\n};\n\nconst ultimateSkillAnimation = (querySelector, className, src, audio) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = src;\n\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in-animation');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\twindow.navigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector);\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out-animation');\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in-animation');\n\t\toverlay.classList.remove('fade-out-animation');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1850);\n};\n\nconst playSoundEffect = querySelector => {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n};\n\nconst damageNumbersAnimation = (querySelector, className, content) => {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n};\n\nconst notEnoughStaminaAnimation = (player) => {\n\tlet activePlayerUI;\n\tconst divEl = document.createElement('div');\n\tconst fistBubble = document.createElement('div');\n\tconst secondBubble = document.createElement('div');\n\tconst thirdBubble = document.createElement('div');\n\n\tif (player === 'player1') {\n\t\tactivePlayerUI = document.querySelector('.player-1__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-1 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-1__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-1__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-1__third-bubble';\n\t} else {\n\t\tactivePlayerUI = document.querySelector('.player-2__model').parentElement;\n\t\tdivEl.className = 'not-enough-stamina-player-2 fade-in-animation';\n\t\tfistBubble.className = 'not-enough-stamina-player-2__first-bubble';\n\t\tsecondBubble.className = 'not-enough-stamina-player-2__second-bubble';\n\t\tthirdBubble.className = 'not-enough-stamina-player-2__third-bubble';\n\t}\n\n\tthirdBubble.innerHTML = 'Not enough <span style = \"color: brown;\"> Energy</span>';\n\tdivEl.appendChild(fistBubble);\n\tdivEl.appendChild(secondBubble);\n\tdivEl.appendChild(thirdBubble);\n\n\tactivePlayerUI.appendChild(divEl);\n\n\tsetTimeout(() => {\n\t\tdivEl.classList.add('fade-out-animation')\n\t}, 1500);\n\n\tsetTimeout(() => {\n\t\tactivePlayerUI.removeChild(divEl)\n\t}, 2000);\n}\n\nexport {\n\tloadingScreenAnimation, playPauseBackgroundAudio, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnimation, discardCardAnimation, endTurnAnimation, attackInDirectionAnimation,\n\tblockAnimation, attackAnimation, standardAttackAnimation, multipleAttackAnimation,\n\tultimateSkillAnimation, playSoundEffect, damageNumbersAnimation, notEnoughStaminaAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.selectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.selectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.choosePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.updatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.updatePlayersModels = new Events();\n\n\t\t// анимация конца хода\n\t\tthis.endTurnAnimation = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.updatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.updatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\tsetTextTurnInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.endTurnAnimation.notify('left', `${this.playersInfo.playerOneName}'s Turn`);\n\t\t} else {\n\t\t\tthis.endTurnAnimation.notify('right', `${this.playersInfo.playerTwoName}'s Turn`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.selectionEnd.notify();\n\t\t\tthis.setTextTurnInfo();\n\t\t} else {\n\t\t\tthis.selectionContinue.notify();\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tthis.setTextTurnInfo();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.selectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation.js';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\n\t\tthis.deckWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.playersTurnInfo = document.querySelector('.players-action');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\n\t\tthis.onCreateCards = new Events();\n\n\t\tthis.removeCards = new Events();\n\t\tthis.removeActionCard = new Events();\n\t\tthis.createAnimation = new Events();\n\t\t// this.endTurnAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tif (eventTarget.classList.contains('player-1__pile-of-card')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (eventTarget.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = card.icon;\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t} else {\n\t\t\telDiv.setAttribute('draggable', 'false');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.deckWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.removeCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.removeActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.removeActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import {gameObserver, boardView} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\n\nconst endGame = mutations => {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tboardView.playersTurnInfo.textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardView.playersTurnInfo.classList.add('win-info-animation');\n\n\t\thideInterfaceElements();\n\n\t\tproposePlayAgain();\n\n\t\tforbidSaveConcede();\n\t}\n}\n\nconst allowSaveConcede = () => {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nconst forbidSaveConcede = () => {\n\tdocument.querySelector('.save-progress').addEventListener('click',  forbidClick);\n\tdocument.querySelector('.concede').addEventListener('click',  forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.remove('save-progress-allow');\n\tdocument.querySelector('.concede').classList.remove('concede-allow');\n}\n\nconst hideInterfaceElements = () => {\n\tboardView.cardInHandField.classList.add('hidden');\n\n\tboardView.endTurnBtn.classList.add('hidden')\n\n\tdocument.querySelector('.background-music-battlefield').pause();\n\n\tplaySoundEffect('.victory-audio');\n\n\tlocalStorage.removeItem('gameData');\n}\n\nconst proposePlayAgain = () => {\n\tconst divEl = document.createElement('div');\n\n\tdivEl.className = 'play-again';\n\tdivEl.textContent = 'Do you want to play one more battle?';\n\n\tconst choiceYes = document.createElement('button');\n\n\tchoiceYes.className = 'play-again__accept';\n\tchoiceYes.textContent = 'Yes';\n\n\tconst choiceNo = document.createElement('button');\n\n\tchoiceNo.className = 'play-again__reject';\n\tchoiceNo.textContent = 'No';\n\n\tdivEl.appendChild(choiceYes);\n\tdivEl.appendChild(choiceNo);\n\n\tboardView.boardSelector.appendChild(divEl);\n\n\tchoiceYes.addEventListener('click', () => {\n\t\twindow.removeEventListener('beforeunload', warningUnload);\n\n\t\twindow.location.reload();\n\t});\n\n\tchoiceNo.addEventListener('click', () => {\n\t\tdocument.title = 'Main menu';\n\t\tlocation.hash = decodeURIComponent('main-menu');\n\t});\n}\n\nconst warningUnload = event => {\n\tevent.preventDefault();\n\tevent.returnValue = '';\n}\n\nconst forbidClick = event => event.stopPropagation();\n\nexport {endGame, allowSaveConcede, warningUnload, forbidClick}","import Events from './eventsModel';\nimport {player1, player2} from '../game';\nimport {warningUnload, forbidClick} from './observerModel';\nimport {createCardAnimation, endTurnAnimation, playSoundEffect} from '../animation_and_sound_effects/animation';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.deckWrapper = this.boardSelector.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.acceptChoiceBtn = this.boardSelector.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = this.boardSelector.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHandField = this.boardSelector.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = this.boardSelector.querySelector('.battle-field');            // play field\n\t\tthis.endTurnBtn = this.boardSelector.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = this.boardSelector.querySelector('.players-action');\n\t\tthis.cardsPlayField = this.boardSelector.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOnIcon = this.boardSelector.querySelector('.sound-icon');\n\t\tthis.playersOverlay = this.boardSelector.querySelector('.players-overlay');\n\t\tthis.playersDeck = this.boardSelector.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = this.boardSelector.querySelector('.players-overlay__close');\n\t\tthis.menu = this.boardSelector.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\n\t\tthis.touchEvent = event => {\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif(event.target.classList.contains('cards')) {\n\t\t\t\tthis.touchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touch-start-animation');\n\n\t\t\t\tplaySoundEffect('.drag-audio')\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend',  function touchEnd (event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY)  - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touch-start-animation');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tif(comparison > 170) {\n\t\t\t\t\t\t\tself.dropEvent.notify()\n\t\t\t\t\t\t\tself.doCardAction.notify(self.gameModel.playerOneTurn)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.submitCardCheckChoose = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.grabCardStart = new Events();\n\n\t\tthis.touchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.dropEvent = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.doCardAction = new Events();\n\n\t\tthis.endTurn = new Events();\n\n\t\tthis.onClosePileCards = new Events();\n\n\t\tthis.showPlayerDeck = new Events();\n\n\t\tthis.soundOffOn = new Events();\n\n\t\tthis.saveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tif(\"ontouchstart\" in window) {\n\t\t\tthis.cardInHandField.addEventListener('touchstart', (event) => this.touchEvent(event));\n\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('touchstart', (event) => this.cardChooseAnim(event.target));\n\t\t} else {\n\t\t\t// событие клик подстветка выбора карт\n\t\t\tthis.deckWrapper.addEventListener('click', (event) => this.cardChooseAnim(event.target));\n\n\t\t\t// анимация карт в руке при наведении\n\t\t\tthis.cardInHandField.addEventListener('mouseover', (event) => this.cardChooseAnimInHandAdd(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('mouseout', (event) => this.cardChooseAnimInHandRemove(event.target));\n\n\t\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.dragCardStartAnimation(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragstart', (event) => this.grabCardStart.notify(event.target));\n\n\t\t\tthis.cardInHandField.addEventListener('dragend', (event) => this.dragCardEndAnimation(event.target));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragenter', (event) => this.dragCardEnterAnimation(event));\n\n\t\t\tthis.cardsPlayField.addEventListener('dragover', (event) => event.preventDefault());\n\n\t\t\t// играем карты\n\t\t\tthis.cardsPlayField.addEventListener('drop', () => {\n\t\t\t\tthis.dropEvent.notify();\n\t\t\t\tthis.doCardAction.notify(this.gameModel.playerOneTurn);\n\t\t\t\tthis.deletePlayfieldAnimation();\n\t\t\t})\n\t\t}\n\n\t\tthis.acceptChoiceBtn.addEventListener('click', () => {\n\t\t\tthis.onDefineCards.notify()\n\n\t\t\tthis.submitCardCheckChoose.notify();\n\t\t});\n\n\t\tthis.battleField.addEventListener('click', (event) => {\n\t\t\tthis.showPlayerDeck.notify(event.target);\n\n\t\t\tthis.openCloseOverlay(event.target)\n\t\t});\n\n\t\tthis.playersDeckClose.addEventListener('click', (event) => {\n\t\t\tthis.onClosePileCards.notify();\n\n\t\t\tthis.openCloseOverlay(event.target);\n\t\t});\n\n\t\tthis.endTurnBtn.addEventListener('click', () => this.endTurn.notify());\n\n\t\tthis.soundOffOnIcon.addEventListener('click', () => this.soundOffOn.notify());\n\n\t\tthis.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\n\t\t\tthis.showMenu()\n\t\t});\n\n\t\tthis.menu.addEventListener('click', (event) => this.navigateGame(event.target));\n\n\t\t[...this.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', forbidClick);\n\n\t\twindow.addEventListener('beforeunload', warningUnload);\n\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.drawCards(card, place));\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.selectionEnd.attach(() => this.selectionEndUpdate());\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.removeCards.attach((cards, place) => this.extraCardsToRemove(cards, place));\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.choosePlayerInfo.attach((text) => this.playerChooseInfoUpdate(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.updatePlayersNames.attach((name1, name2) => this.playerNameUpdate(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.updatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.playerModelsUpdate(modelPlayer1, modelPlayer2));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.removeActionCard.attach((card) => this.deleteActionCard(card));\n\n\t\tthis.boardModel.createAnimation.attach((querySelector, amount) => this.createAnimation(querySelector, amount));\n\n\t\tthis.gameModel.endTurnAnimation.attach((btnSide, textInfo) => this.endTurnAnimation(btnSide, textInfo));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tif (localStorage.getItem('gameData')) {\n\t\t\tthis.checkRestoreGame();\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.onLoadCreate.notify();\n\t\t}\n\t};\n\n\tdrawCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.deckWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.cardInHandField.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.cardsChooseCounter.textContent = '0';\n\n\t\tthis.cardsChooseCounter.style = 'color: white';\n\t};\n\n\textraCardsToRemove(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.deckWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.cardInHandField.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteActionCard(card) {\n\t\tthis.cardInHandField.removeChild(card);\n\t}\n\n\tcounterUpdate(info) {\n\t\tthis.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\tselectionEndUpdate() {\n\t\tthis.deckWrapper.style.display = 'none';\n\n\t\tthis.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\tplayerChooseInfoUpdate(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\tplayerNameUpdate(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\tplayerModelsUpdate(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif(this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\tcreateAnimation(querySelector, amount) {\n\t\tcreateCardAnimation(querySelector, amount);\n\t}\n\n\tendTurnAnimation(btnSide, textInfo) {\n\t\tendTurnAnimation(btnSide);\n\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tthis.playersTurnInfo.textContent = textInfo;\n\t}\n\n\tshowMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateGame(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tthis.saveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.showMenu();\n\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckRestoreGame() {\n\t\t// const hash = window.location.hash;\n\t\t// const state = decodeURIComponent(hash.substr(1));\n\n\t\t// if (state === 'restoredGame') {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-animation');\n\t\t\tthis.playersDeckClose.classList.add('hidden');\n\n\t\t\tconst divEl = document.createElement('div');\n\n\t\t\tdivEl.className = 'confirm-continue';\n\t\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\t\tconst choiceYes = document.createElement('button');\n\n\t\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\t\tchoiceYes.textContent = 'Yes';\n\n\t\t\tconst choiceNo = document.createElement('button');\n\n\t\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\t\tchoiceNo.textContent = 'No';\n\n\t\t\tdivEl.appendChild(choiceYes);\n\t\t\tdivEl.appendChild(choiceNo);\n\n\t\t\tthis.playersOverlay.appendChild(divEl);\n\n\t\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.doContinueDecision(event.target));\n\t\t// }\n\t}\n\n\tdoContinueDecision(eventTarget) {\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\tthis.playersOverlay.removeChild(divEl);\n\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\t\t\t\tthis.playersDeckClose.classList.remove('hidden');\n\n\t\t\t\tthis.onLoadCreate.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-animation');\n\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\tdragCardStartAnimation(eventTarget) {\n\t\tplaySoundEffect('.drag-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\tsetTimeout(() => eventTarget.classList.add('invisible'), 0);\n\n\t\t\tthis.cardsPlayField.classList.add('pulse-animation');\n\t\t}\n\t}\n\n\tdragCardEndAnimation(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tif (eventTarget !== this.cardInHandField) {\n\t\t\teventTarget.classList.remove('invisible');\n\t\t}\n\n\t\tthis.deletePlayfieldAnimation();\n\t}\n\n\tdragCardEnterAnimation(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.cardsPlayField.classList.add('pulse-animation-enter');\n\t}\n\n\tdeletePlayfieldAnimation() {\n\t\tthis.cardsPlayField.classList.remove('pulse-animation-enter');\n\n\t\tthis.cardsPlayField.classList.remove('pulse-animation');\n\t}\n\n\t// подсветка выбранных карт\n\tcardChooseAnim(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.deckWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio')\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.counterUpdate(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandAdd(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandRemove(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHandField) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\topenCloseOverlay(target) {\n\t\tif(target.classList.contains('player-1__pile-of-card') || target.classList.contains('player-2__pile-of-card')) {\n\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\tthis.playersOverlay.classList.add('fade-in-pile-animation');\n\n\t\t\tplaySoundEffect('.overlay-open-audio');\n\t\t}\n\n\t\tif(target.classList.contains('players-overlay__close')) {\n\t\t\tthis.playersOverlay.classList.remove('fade-in-pile-animation');\n\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\tplaySoundEffect('.overlay-close-audio');\n\t\t}\n\t}\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.defineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('submitCardCheckChoose')) {\n\t\t\tthis.boardView.submitCardCheckChoose.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('touchCardStart')) {\n\t\t\tthis.boardView.touchCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.startRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tactionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\n\t\tthis.gameModel.setTextTurnInfo();\n\t}\n\n\tonSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tstartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tplaySoundEffect,\n\tcreateCardAnimation,\n\tdiscardCardAnimation,\n\tnotEnoughStaminaAnimation\n} from '../animation_and_sound_effects/animation.js';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.playerViewUpdate = new Events();\n\t\tthis.cardDraw = new Events();\n\t\tthis.cardDiscard = new Events();\n\t\tthis.actionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.playerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.playerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t(this.gameModel.playerOneTurn) ? notEnoughStaminaAnimation('player1') : notEnoughStaminaAnimation()\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnimation('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.cardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnimation(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tthis.cardDiscard.notify(element)\n\t\t}\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judgment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.actionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import Events from './eventsModel';\nimport {\n\tattackAnimation, attackInDirectionAnimation, blockAnimation,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standardAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport {animationCollectionImages} from './preloadImages';\n\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tconst playerContainer = container;\n\n\t\tthis.updateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.playerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.playerViewUpdate.attach((state) => {\n\t\t\tif (state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.actionAnimation.attach(() => this.doAnimation());\n\t\tthis.playerTwoModel.actionAnimation.attach(() => this.doAnimation());\n\n\t\tthis.gameModel.selectionEnd.attach(() => {\n\t\t\tthis.updateViewHP();\n\t\t\tthis.updateViewDef();\n\t\t\tthis.updateViewStamina();\n\t\t});\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\tupdateViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\tupdateViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerOneDefenceValue.classList.remove('defend-value-positive-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-negative-animation');\n\t\tthis.playerTwoDefenceValue.classList.remove('defend-value-positive-animation');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defend-value-positive-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-negative-animation', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defend-value-positive-animation', 0);\n\t\t}\n\t};\n\n\tupdateViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damage-number-animation', resultContent);\n\t};\n\n\tdoAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smash-attack-animation', animationCollectionImages.smash);\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.reachHeaven);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.anger);\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateViewStamina();\n\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandardAttackAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.bloodletting);\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\n\t\t\t\tthis.updateViewHP();\n\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.refreshStamina);\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimation(activePlayerUI, 'shield-animation', animationCollectionImages.defend);\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\t\t\t\t\tstandardAttackAnimation(passivePlayerUI, 'anger-attack-animation', animationCollectionImages.mageEffect);\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack-animation', animationCollectionImages.warriorAttack, 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimation(activePlayerUI, 'refresh-skill-animation', animationCollectionImages.serpentRing);\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warrior-ultimate-animation', animationCollectionImages.flash, '.flash-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.daggersSvg, '.backstab-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mage-ultimate-animation', animationCollectionImages.mageAttack, '.mage-ultimate-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judgment':\n\t\t\t\tattackInDirectionAnimation(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogue-ultimate-animation', animationCollectionImages.judgmentSvg, '.judj-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('doCardAction')) {\n\t\t\tthis.boardView.doCardAction.attach((priority) => this.playCard(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('updateInitialValue')) {\n\t\t\tthis.playersView.updateInitialValue.attach(() => this.updateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tplayCard(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tupdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tonSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {playPauseBackgroundAudio} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.createCard(card, place));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('dropEvent')) {\n\t\t\tthis.boardView.dropEvent.attach(() => this.deleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.createCardsInHand());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.showPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onClosePileCards')) {\n\t\t\tthis.boardView.onClosePileCards.attach(() => this.deleteOverlayCards());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionContinue')) {\n\t\t\tthis.gameModel.selectionContinue.attach(() => this.createCard());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionEnd')) {\n\t\t\tthis.gameModel.selectionEnd.attach((restoredCards) => this.createCardsInHand(restoredCards));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player1.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player2.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player1.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player2.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('soundOffOn')) {\n\t\t\tthis.boardView.soundOffOn.attach(() => this.turnOnOfSound());\n\t\t}\n\t}\n\n\tcreateCard() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tcreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tdeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\tdeleteOverlayCards() {\n\t\tthis.boardModel.removeExtraCards('overlay');\n\t}\n\n\taddCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tshowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tturnOnOfSound() {\n\t\tplayPauseBackgroundAudio();\n\t}\n}\n","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, endGame} from './modules/observerModel';\n\nconst gameObserver = new Game();\n\nconst boardModel = new Board(gameObserver);\n\nconst boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nconst player1 = new Players(gameObserver, boardModel);\n\nconst player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(playersView.playerOneHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(playersView.playerTwoHPValue, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(boardView.battleField, {\n\tattributes: true\n});\n\nexport {gameObserver, boardModel, boardView, player1, player2};\n"],"sourceRoot":""}
{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","skillCollection","warrior","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","rogue","mage","Math","floor","random","shakeAnimation","queryElement","direction","element","document","querySelector","classList","remove","setTimeout","add","createCardAnim","amount","elementAnim","i","contains","playSoundEffect","discardCardAnim","blockAnimationEffect","className","src","container","parentElement","image","createElement","appendChild","removeChild","attackAnimation","style","transform","standartAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","attackAnimationEffect","querySelectorAll","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","playersInfo","dragCard","tempCard","selectionEnd","selectionContinue","choosePlayerInfo","updatePlayersNames","updatePlayersModels","init","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","object","temp","localStorage","getItem","JSON","parse","notify","playerOneName","playerTwoName","player1","player2","cards","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","datainfo","search","j","eventTarget","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","console","log","setItem","stringify","activePlayerHand","tempData","divEl","Board","model","gameModel","decWrapper","btnAccept","cardsChooseCounter","battleField","endTurn","playersTurnInfo","cardsPlayField","soundOffOn","playersOverlay","playersDeck","playersDeckClose","showDeckPlayer1","showDeckPlayer2","menu","menuIcon","onCreateCards","onCounterChange","removeCards","removeActionCard","createAnimation","endTurnAnimation","playerClassInfo","removeExtraCards","createCards","target","state","card","appendPlace","draggable","elDiv","setAttribute","backgroundImage","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","toggle","counterInfo","number","color","event","preventDefault","textContent","BoardView","board","game","selector","forbidClick","stopPropagation","boardSelector","onLoadCreate","onDefineCards","onAnimCards","submitCardCheckChoose","cardInHandChoosen","grabCardStart","grabCardEnd","preventDrag","dropEvent","doCardAction","showPlayerDeck","saveGameProgres","onRestoreGameData","onConcede","addEventListener","showMenu","navigateGame","getElementsByTagName","button","window","returnValue","attach","drawCards","counterUpdate","selectionEndUpdate","extraCardsToRemove","text","playerChooseInfoUpdate","name1","name2","playerNameUpdate","modelPlayer1","modelPlayer2","playerModelsUpdate","deleteActionCard","side","checkRestoreGame","display","player1Model","player2Model","data","turnAnnouncer","removeProperty","left","right","endTurnAnim","menuList","split","title","location","hash","decodeURIComponent","doConcede","substr","choiceYes","choiceNo","doContinueDecision","GameController","view","boardView","defineCards","doCardCheckChoose","actionCard","doEndTurn","onSaveGameData","startRestoreData","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","playerViewUpdate","cardDraw","cardDiscard","actionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","test","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","player","PlayersView","playerOneModel","playerTwoModel","playerContainer","updateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","updateViewHP","updateViewStamina","doAnimation","updateViewDef","width","passivePlayerUI","content","calcDP","activePlayerUI","updateDamageNumbers","amountEffect","effectStorage","elem","multipleAttackAnimation","PlayersController","playerView","playersView","priority","playCard","onSavePlayerData","doAction","updateInitialValues","BoardController","playerModel1","playerModel2","createCard","cardAnimBoard","cardAnimHand","grabedCardAnim","createCardsInHand","setPlayersTurnInfo","showPlayersDeck","closePlayersDeck","restoredCards","addCardInHand","deleteRandomCard","turnOnOfSound","createCardsForChoose","cardChooseAnim","cardChooseAnimInHandAdd","cardChooseAnimInHandRemove","pullRandomCardsInHand","dragCardStart","dragCardEnd","dragPreventAction","deletePlayedCard","showCardsForPlayers","openCloseOverlay","showWhichTurn","backAudio","paused","pause","player1HPstatus","player2HPstatus","battleground","winConditionObserver","MutationObserver","mutations","childNodes","removeItem","saveConcedeConditionObserver","removeEventListener","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, 'images/cards/warrior/Strike.png', 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, 'images/cards/warrior/Bash.png', 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, 'images/cards/warrior/Anger.png', 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 50) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, 'images/cards/warrior/BodySlam.png', 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfecedStrike = new Cards(4, 'attackAddEffect', 1, 6, 'images/cards/warrior/PerfectedStrike.png', 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, 'images/cards/warrior/Bludgeon.png', 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, 'images/cards/warrior/Defend_R.png', 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, 'images/cards/warrior/Armaments.png', 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, 'images/cards/warrior/IronWave.png', 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, 'images/cards/warrior/Warcry.png', 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, 'images/cards/warrior/Bloodletting.png', 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, 'images/cards/warrior/Entrench.png', 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, 'images/cards/rogue/Strike_G.png', 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, 'images/cards/rogue/R_dagger-throw.png', 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, 'images/cards/rogue/Flechettes.png', 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, 'images/cards/rogue/RiddleWithHoles.png', 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, 'images/cards/rogue/Slice.png', 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, 'images/cards/rogue/QuickSlash.png', 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, 'images/cards/rogue/Survivor.png', 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, 'images/cards/rogue/Deflect.png', 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 2, 'images/cards/rogue/Backflip.png', 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, 'images/cards/rogue/Prepared.png', 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, 'images/cards/rogue/Expertise.png', 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, 'images/cards/rogue/Dash.png', 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, 'images/cards/mage/Strike_P.png', 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, 'images/cards/mage/CutThroughFate.png', 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, 'images/cards/mage/ReachHeaven.png', 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, 'images/cards/mage/SignatureMove.png', 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, 'images/cards/mage/Tantrum.png', 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judjment = new Cards(5, 'attackAddEffect', 2, 0, 'images/cards/mage/Judgment.png', 'judjment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, 'images/cards/mage/MasterReality.png', 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, 'images/cards/mage/Defend_P.png', 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, 'images/cards/mage/Meditate.png', 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, 'images/cards/mage/ThirdEye.png', 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, 'images/cards/mage/Nirvana.png', 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, 'images/cards/mage/Alpha.png', 'alpha');\n\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfecedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judjment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n","// animation through all menu loading black screen\nfunction loading(target) {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n}\n\n// starting play backgorundMusic\nfunction switchPlayPause() {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.soundIcon');\n\tlet backAudio;\n\n\tif (state == 'battle-field') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t}\n}\n\nconst checkBackgroundAudio = (function (querySelector) {\n\tconst currentHash = [];\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\treturn function () {\n\t\tcurrentHash.push(decodeURIComponent(window.location.hash.substr(1)));\n\n\t\tconst soundOffOn = document.querySelector(querySelector);\n\n\t\tif (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.play();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.play();\n\t\t\taudio.pause();\n\t\t}\n\n\t\tif ([...allAudio].every(element => element.paused)) {\n\t\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t\t} else {\n\t\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t\t}\n\t};\n}('.soundIcon'));\n\n// shake display when character choosed\nfunction shakeAnimation(queryElement, direction = 'horizontal') {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shakeX');\n\t\t\tsetTimeout(() => element.classList.add('shakeX'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeX'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shakeY');\n\t\t\tsetTimeout(() => element.classList.add('shakeY'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeY'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shakeMix');\n\t\t\tsetTimeout(() => element.classList.add('shakeMix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeMix'), 400);\n\t\t\tbreak;\n\t}\n}\n\nfunction createCardAnim(querySelector, amount) {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('cardsDrawAnim')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('cardsDrawAnim');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('cardsDrawAnim');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('cardsDrawAnim'));\n\t}\n}\n\nfunction discardCardAnim(querySelector) {\n\tquerySelector.classList.add('cardDiscard');\n}\n\nfunction endTurnAnim(side) {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '5%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '5%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('endTurnAnim'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('endTurnAnim'), 1000);\n}\n\nfunction blockAnimationEffect(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n}\n\nfunction attackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n}\n\nfunction multipleAttackAnimation(querySelector, className, src, amountEffect) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tlet effectStorage = [];\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tconst image = document.createElement('img');\n\t\teffectStorage.push(image);\n\t}\n\n\teffectStorage.forEach((elem, index) => {\n\t\telem.src = src;\n\n\t\tif (index === 1) {\n\t\t\telem.style.transform = 'rotate(30deg)';\n\t\t} else if (index === 2) {\n\t\t\telem.style.transform = 'rotate(315deg)';\n\t\t}\n\n\t\telem.className = className;\n\n\t\tsetTimeout(() => {\n\t\t\tcontainer.appendChild(elem);\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\tsetTimeout(() => container.removeChild(elem), 400);\n\t\t}, index * 300);\n\t});\n}\n\nfunction standartAttackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n}\n\nfunction ultimateSkillAnimation(querySelector, className, src, audio) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.overlay__close');\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\tshakeAnimation(querySelector)\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out');\n\n\t}, 1350);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in');\n\t\toverlay.classList.remove('fade-out');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1500);\n}\n\nfunction playSoundEffect(querySelector) {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n}\n\nfunction attackAnimationEffect(querySelector, direction) {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attackRight');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackRight'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attackLeft');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackLeft'), 1000);\n\t\t\tbreak;\n\t}\n}\n\nfunction damageNumbersAnimation(querySelector, className, content) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n}\n\nexport {\n\tloading, switchPlayPause, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnim, endTurnAnim, blockAnimationEffect, attackAnimation,\n\tplaySoundEffect, attackAnimationEffect, multipleAttackAnimation, discardCardAnim,\n\tstandartAttackAnimation, ultimateSkillAnimation, damageNumbersAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.selectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.selectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.choosePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.updatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.updatePlayersModels = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.updatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.updatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.selectionEnd.notify();\n\t\t} else {\n\t\t\tthis.selectionContinue.notify();\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.selectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {createCardAnim, playSoundEffect, endTurnAnim} from '../animation_and_sound_effects/animation.js';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\n\t\tthis.decWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.btnAccept = document.querySelector('.accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = document.querySelector('.count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = document.querySelector('.battle-field');            // play field\n\t\tthis.endTurn = document.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = document.querySelector('.players-action');\n\t\tthis.cardsPlayField = document.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOn = document.querySelector('.soundIcon');\n\n\t\tthis.playersOverlay = document.querySelector('.players-overlay');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = document.querySelector('.overlay__close');\n\n\t\tthis.showDeckPlayer1 = document.querySelector('.player-1__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\t\tthis.showDeckPlayer2 = document.querySelector('.player-2__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\n\t\tthis.menu = document.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = document.querySelector('.battle-field-nav__icon');\n\n\t\t// создаем событие на создание карт\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onCounterChange = new Events();\n\t\tthis.removeCards = new Events();\n\t\tthis.removeActionCard = new Events();\n\t\tthis.createAnimation = new Events();\n\t\tthis.endTurnAnimation = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.removeExtraCards('overlay');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target.classList.contains('player-1__pile-of-car')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\n\t\t\t// createCardAnim('.players-overlay__cards', 'overlay');\n\t\t}\n\n\t\tif (target.classList.contains('player-2__pile-of-car')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\n\t\t\t// createCardAnim('.players-overlay__cards', 'overlay');\n\t\t}\n\t}\n\n\topenCloseOverlay(state) {\n\t\tswitch (state) {\n\t\t\tcase 'open':\n\t\t\t\tthis.playersOverlay.classList.remove('hidden');\n\n\t\t\t\tplaySoundEffect('.overlay-open-audio');\n\n\t\t\t\tbreak;\n\t\t\tcase 'close':\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\n\t\t\t\tplaySoundEffect('.overlay-close-audio');\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = document.createElement('div');\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\t\telDiv.style.backgroundImage = `url(${card.icon})`;\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.decWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.removeCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.removeActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.removeActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// подсветка выбранных карт\n\tcardChooseAnim(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.decWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio')\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.onCounterChange.notify(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandAdd(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandRemove(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\tdragCardStart(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\tsetTimeout(() => target.classList.add('invisible'), 0);\n\t\t}\n\n\t\tplaySoundEffect('.drag-audio');\n\t}\n\n\t//у ираем стили для перетаскивания\n\tdragCardEnd(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('invisible');\n\t\t}\n\t}\n\n\tdragPreventAction(event) {\n\t\tevent.preventDefault();\n\t}\n\n\tshowWhichTurn() {\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerOneName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('left');\n\n\t\t\t// endTurnAnim('left');\n\t\t} else {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerTwoName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('right');\n\n\t\t\t// endTurnAnim('right');\n\t\t}\n\t}\n}\n","import Events from './eventsModel';\nimport {createCardAnim, endTurnAnim, playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {gameObserver, player1} from '../game';\nimport {player2} from '../game';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.forbidClick = event => event.stopPropagation();\n\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на анимацию(подсветку выбора карт)\n\t\tthis.onAnimCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.submitCardCheckChoose = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.cardInHandChoosen = new Events();\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.grabCardStart = new Events();\n\n\t\tthis.grabCardEnd = new Events();\n\n\t\tthis.preventDrag = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.dropEvent = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.doCardAction = new Events();\n\n\t\tthis.endTurn = new Events();\n\n\t\tthis.showPlayerDeck = new Events();\n\n\t\tthis.soundOffOn = new Events();\n\n\t\tthis.saveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.onDefineCards.notify());\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.submitCardCheckChoose.notify());\n\n\t\t// событие клик подстветка выбора карт\n\t\tthis.boardModel.decWrapper.addEventListener('click', (event) => this.onAnimCards.notify(event.target));\n\n\t\t// показываем карты какие наюрал игрок на этапе выбора\n\t\tthis.boardModel.battleField.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\tthis.boardModel.playersDeckClose.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\t// анимация карт в руке при наведении\n\t\tthis.boardModel.cardInHand.addEventListener('mouseover', (event) => this.cardInHandChoosen.notify(event.target, 'focus'));\n\n\t\tthis.boardModel.cardInHand.addEventListener('mouseout', (event) => this.cardInHandChoosen.notify(event.target, 'blur'));\n\n\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\tthis.boardModel.cardInHand.addEventListener('dragstart', (event) => this.grabCardStart.notify(event.target, 'focus'));\n\n\t\tthis.boardModel.cardInHand.addEventListener('dragend', (event) => this.grabCardEnd.notify(event.target, 'blur'));\n\n\t\t// prevent default behavior\n\t\tthis.boardModel.cardsPlayField.addEventListener('dragenter', (event) => this.preventDrag.notify(event));\n\n\t\tthis.boardModel.cardsPlayField.addEventListener('dragover', (event) => this.preventDrag.notify(event));\n\n\t\t// играем карты\n\t\tthis.boardModel.cardsPlayField.addEventListener('drop', () => this.dropEvent.notify());\n\n\t\tthis.boardModel.cardsPlayField.addEventListener('drop', () => this.doCardAction.notify(this.gameModel.playerOneTurn));\n\n\t\tthis.boardModel.endTurn.addEventListener('click', () => this.endTurn.notify());\n\n\t\tthis.boardModel.soundOffOn.addEventListener('click', () => this.soundOffOn.notify());\n\n\t\tthis.boardModel.menuIcon.addEventListener('click', () => this.showMenu());\n\n\t\tthis.boardModel.menuIcon.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\n\t\tthis.boardModel.menu.addEventListener('click', (event) => this.navigateGame(event.target));\n\n\t\t[...this.boardModel.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', this.forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', this.forbidClick);\n\n\t\twindow.addEventListener('beforeunload', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.returnValue = '';\n\t\t});\n\n\n\t\t// подписываемся на событие в модели\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.drawCards(card, place));\n\n\t\t// модель меняет количество набранных карт отображаем\n\t\tthis.boardModel.onCounterChange.attach((info) => this.counterUpdate(info));\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.selectionEnd.attach(() => this.selectionEndUpdate());\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.removeCards.attach((cards, place) => this.extraCardsToRemove(cards, place));\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.choosePlayerInfo.attach((text) => this.playerChooseInfoUpdate(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.updatePlayersNames.attach((name1, name2) => this.playerNameUpdate(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.updatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.playerModelsUpdate(modelPlayer1, modelPlayer2));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.removeActionCard.attach((card) => this.deleteActionCard(card));\n\n\t\tthis.boardModel.createAnimation.attach((querySelector, amount) => this.createAnimation(querySelector, amount));\n\n\t\tthis.boardModel.endTurnAnimation.attach((side) => this.endTurnAnimation(side));\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tthis.onLoadCreate.notify();\n\t\tthis.checkRestoreGame();\n\t};\n\n\tdrawCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.boardModel.decWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.boardModel.cardInHand.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.boardModel.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.boardModel.cardsChooseCounter.textContent = '0';\n\n\t\tthis.boardModel.cardsChooseCounter.style = 'color: white';\n\t};\n\n\textraCardsToRemove(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.decWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.cardInHand.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteActionCard(card) {\n\t\tthis.boardModel.cardInHand.removeChild(card);\n\t}\n\n\tcounterUpdate(info) {\n\t\tthis.boardModel.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.boardModel.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\tselectionEndUpdate() {\n\t\tthis.boardModel.decWrapper.style.display = 'none';\n\n\t\tthis.boardModel.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.card-counter').style.display = 'none';\n\t}\n\n\tplayerChooseInfoUpdate(text) {\n\t\tthis.boardSelector.querySelector('.player-name-choosing').textContent = text;\n\t}\n\n\tplayerNameUpdate(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\tplayerModelsUpdate(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif(this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\tcreateAnimation(querySelector, amount) {\n\t\tcreateCardAnim(querySelector, amount);\n\t}\n\n\tendTurnAnimation(side) {\n\t\tendTurnAnim(side);\n\t}\n\n\tshowMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateGame(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.saveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckRestoreGame() {\n\t\tconst hash = window.location.hash;\n\t\tconst state = decodeURIComponent(hash.substr(1));\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.overlay__close');\n\n\t\tif (state === 'restoredGame') {\n\t\t\toverlay.classList.remove('hidden');\n\t\t\toverlay.classList.add('fade-in');\n\t\t\toverlayClose.classList.add('hidden');\n\n\t\t\tconst divEl = document.createElement('div');\n\n\t\t\tdivEl.className = 'confirm-continue';\n\t\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\t\tconst choiceYes = document.createElement('button');\n\n\t\t\tchoiceYes.className = 'accept';\n\t\t\tchoiceYes.textContent = 'Yes';\n\n\t\t\tconst choiceNo = document.createElement('button');\n\n\t\t\tchoiceNo.className = 'reject';\n\t\t\tchoiceNo.textContent = 'No';\n\n\t\t\tdivEl.appendChild(choiceYes);\n\t\t\tdivEl.appendChild(choiceNo);\n\n\t\t\toverlay.appendChild(divEl);\n\n\t\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.doContinueDecision(event.target));\n\t\t}\n\t}\n\n\tdoContinueDecision(eventTarget) {\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'reject':\n\t\t\t\toverlay.removeChild(divEl);\n\n\t\t\t\toverlay.classList.add('hidden');\n\t\t\t\toverlayClose.classList.remove('hidden');\n\n\t\t\t\tbreak;\n\t\t\tcase 'accept':\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.defineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('submitCardCheckChoose')) {\n\t\t\tthis.boardView.submitCardCheckChoose.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.startRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tactionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\t}\n\n\tonSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tstartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {playSoundEffect, createCardAnim, discardCardAnim} from '../animation_and_sound_effects/animation.js';\nimport {player1} from '../game';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.playerViewUpdate = new Events();\n\t\tthis.cardDraw = new Events();\n\t\tthis.cardDiscard = new Events();\n\t\tthis.actionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.playerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.playerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.cardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\t// setTimeout(() => this.cardDiscard.notify(element), 300)\n\t\t\tthis.cardDiscard.notify(element)\n\t\t}\n\t}\n\n\t// we take condition only for card \"expertise\"\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judjment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.actionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import {\n\tattackAnimation, attackAnimationEffect, blockAnimationEffect,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standartAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport Events from './eventsModel';\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tconst playerContainer = container;\n\n\t\tthis.updateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.actionAnimation.attach(() => this.doAnimation());\n\t\tthis.playerTwoModel.actionAnimation.attach(() => this.doAnimation());\n\n\t\tthis.gameModel.selectionEnd.attach(() => {\n\t\t\tthis.updateViewHP();\n\t\t\tthis.updateViewDef();\n\t\t\tthis.updateViewStamina();\n\t\t})\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\tupdateViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\tupdateViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerOneDefenceValue.classList.remove('defendValuePositive');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValuePositive');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValuePositive', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValuePositive', 0);\n\t\t}\n\t};\n\n\tupdateViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damageNumberAnimate', resultContent);\n\t};\n\n\tdoAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack', 'images/attack-effects/warrior-attack.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', 'images/attack-effects/smash.png');\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/anger.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/reach-heaven.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/anger.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateViewStamina();\n\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandartAttackAnimation(activePlayerUI, 'shield', 'images/attack-effects/bloodletting.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\n\t\t\t\tthis.updateViewHP();\n\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', 'images/attack-effects/refresh-stamina.svg');\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', 'images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', 'images/attack-effects/mageEffect.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack', 'images/attack-effects/warrior-attack.png', 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', 'images/attack-effects/serpent_ring.png');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warriorUltimate', 'images/attack-effects/flash.png', '.flash-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', 'images/attack-effects/daggers.svg', '.backstab-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mageUltimate', 'images/attack-effects/mage-attack.png', '.mage-ultimate-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judjment':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', 'images/attack-effects/judjment.svg', '.judj-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('doCardAction')) {\n\t\t\tthis.boardView.doCardAction.attach((priority) => this.playCard(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('updateInitialValue')) {\n\t\t\tthis.playersView.updateInitialValue.attach(() => this.updateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tplayCard(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tupdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tonSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {switchPlayPause} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.createCard(card, place));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onAnimCards')) {\n\t\t\tthis.boardView.onAnimCards.attach((event) => this.cardAnimBoard(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('cardInHandChoosen')) {\n\t\t\tthis.boardView.cardInHandChoosen.attach((event, state) => this.cardAnimHand(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardEnd')) {\n\t\t\tthis.boardView.grabCardEnd.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('preventDrag')) {\n\t\t\tthis.boardView.preventDrag.attach((event) => this.preventDrag(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('dropEvent')) {\n\t\t\tthis.boardView.dropEvent.attach(() => this.deleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.createCardsInHand());\n\t\t\tthis.boardView.endTurn.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.showPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.closePlayersDeck(event));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionContinue')) {\n\t\t\tthis.gameModel.selectionContinue.attach(() => this.createCard());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionEnd')) {\n\t\t\tthis.gameModel.selectionEnd.attach((restoredCards) => this.createCardsInHand(restoredCards));\n\t\t\tthis.gameModel.selectionEnd.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player1.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player2.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player1.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player2.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('soundOffOn')) {\n\t\t\tthis.boardView.soundOffOn.attach(() => this.turnOnOfSound());\n\t\t}\n\t}\n\n\tcreateCard() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tcardAnimBoard(event) {\n\t\tthis.boardModel.cardChooseAnim(event);\n\t}\n\n\tcardAnimHand(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandAdd(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandRemove(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tgrabedCardAnim(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.dragCardStart(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.dragCardEnd(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpreventDrag(event) {\n\t\tthis.boardModel.dragPreventAction(event);\n\t}\n\n\tdeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\taddCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tshowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tclosePlayersDeck(event) {\n\t\tif (event == this.boardModel.showDeckPlayer1 || event == this.boardModel.showDeckPlayer2) {\n\t\t\tthis.boardModel.openCloseOverlay('open');\n\t\t}\n\t\tif (event == this.boardModel.playersDeckClose) {\n\t\t\tthis.boardModel.openCloseOverlay('close');\n\t\t}\n\t}\n\n\tsetPlayersTurnInfo() {\n\t\tthis.boardModel.showWhichTurn();\n\t}\n\n\tturnOnOfSound() {\n\t\tswitchPlayPause();\n\t}\n}\n","import {boardModel} from '../game';\nimport {gameObserver} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {boardView} from '../game';\n\nconst player1HPstatus = document.querySelector('.player-1__hp');\nconst player2HPstatus = document.querySelector('.player-2__hp');\nconst battleground = document.querySelector('.battle-field');\n\nfunction endGame(mutations) {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n}\n\nfunction allowSaveConcede() {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  boardView.forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  boardView.forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nexport {player1HPstatus, player2HPstatus, endGame, battleground, allowSaveConcede}","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, battleground, endGame, player1HPstatus, player2HPstatus} from './modules/observerModel';\n\nexport const gameObserver = new Game();\n\nexport const boardModel = new Board(gameObserver);\n\nexport const boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nexport const player1 = new Players(gameObserver, boardModel);\n\nexport const player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(player1HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(player2HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(battleground, {\n\tattributes: true\n});"],"sourceRoot":""}
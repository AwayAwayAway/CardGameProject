{"version":3,"sources":["webpack://cardgameproject/webpack/bootstrap","webpack://cardgameproject/webpack/runtime/define property getters","webpack://cardgameproject/webpack/runtime/hasOwnProperty shorthand","webpack://cardgameproject/./js/modules/eventsModel.js","webpack://cardgameproject/./js/modules/cardsModel.js","webpack://cardgameproject/./js/cards.js","webpack://cardgameproject/./js/animation_and_sound_effects/animation.js","webpack://cardgameproject/./js/modules/gameModel.js","webpack://cardgameproject/./js/modules/boardModel.js","webpack://cardgameproject/./js/modules/boardView.js","webpack://cardgameproject/./js/modules/gameController.js","webpack://cardgameproject/./js/modules/playerModel.js","webpack://cardgameproject/./js/modules/playerView.js","webpack://cardgameproject/./js/modules/playerController.js","webpack://cardgameproject/./js/modules/boardController.js","webpack://cardgameproject/./js/modules/observerModel.js","webpack://cardgameproject/./js/game.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Events","this","listeners","listener","push","arg1","arg2","forEach","index","Cards","id","type","cost","effect","icon","name","sideEffect","skillCollection","warrior","gameObserver","activePlayer","healthPoints","defendPoints","boardModel","cardInHand","children","length","passivePlayer","rogue","mage","Math","floor","random","shakeAnimation","queryElement","direction","element","document","querySelector","classList","remove","setTimeout","add","createCardAnim","amount","elementAnim","i","contains","playSoundEffect","discardCardAnim","attackAnimationEffect","container","blockAnimationEffect","className","src","parentElement","image","createElement","appendChild","removeChild","attackAnimation","style","transform","window","navigator","vibrate","standartAttackAnimation","ultimateSkillAnimation","audio","overlay","overlayClose","soundEffect","currentTime","play","querySelectorAll","Game","playerOneTurn","playerTwoTurn","playerOneClass","playerTwoClass","playerOnePullOfCards","playerTwoPullOfCards","playersInfo","dragCard","tempCard","selectionEnd","selectionContinue","choosePlayerInfo","updatePlayersNames","updatePlayersModels","init","setPlayersChoiceInfo","setPlayersClasses","setPlayersNames","setPlayersModels","setTextChooseInfo","setActivePassivePlayer","object","temp","localStorage","getItem","JSON","parse","notify","playerOneName","playerTwoName","player1","player2","cards","counter","getElementsByClassName","tempCardChoosePlayer","dataset","info","checkOnSelectedCards","setTurnPriority","checkCardsSelectionEnd","datainfo","search","j","eventTarget","find","map","activePlayerCardsHand","saveActivePlayerCardsHand","savePlayerData","console","log","setItem","stringify","activePlayerHand","tempData","divEl","Board","model","gameModel","decWrapper","btnAccept","cardsChooseCounter","battleField","endTurn","playersTurnInfo","cardsPlayField","soundOffOn","playersOverlay","playersDeck","playersDeckClose","showDeckPlayer1","showDeckPlayer2","menu","menuIcon","onCreateCards","onCounterChange","removeCards","removeActionCard","createAnimation","endTurnAnimation","notEnoughStamina","playerClassInfo","removeExtraCards","createCards","target","state","card","appendPlace","draggable","elDiv","setAttribute","backgroundImage","tempIndex","n","indexOf","place","orderToRemove","condition","staminaPoints","toggle","counterInfo","number","color","event","preventDefault","textContent","BoardView","board","game","selector","boardSelector","forbidClick","stopPropagation","touchEvent","self","coordinateY","touches","pageY","touchCardStart","addEventListener","touchEnd","comparison","parseFloat","changedTouches","dropEvent","doCardAction","removeEventListener","onLoadCreate","onDefineCards","onAnimCards","submitCardCheckChoose","cardInHandChoosen","grabCardStart","grabCardEnd","preventDrag","showPlayerDeck","saveGameProgres","onRestoreGameData","onConcede","showMenu","navigateGame","getElementsByTagName","button","returnValue","attach","drawCards","counterUpdate","selectionEndUpdate","extraCardsToRemove","text","playerChooseInfoUpdate","name1","name2","playerNameUpdate","modelPlayer1","modelPlayer2","playerModelsUpdate","deleteActionCard","side","checkRestoreGame","display","player1Model","player2Model","data","turnAnnouncer","removeProperty","left","right","endTurnAnim","menuList","split","title","location","hash","decodeURIComponent","doConcede","substr","choiceYes","choiceNo","doContinueDecision","a","GameController","view","boardView","defineCards","doCardCheckChoose","actionCard","doEndTurn","onSaveGameData","startRestoreData","definePlayersCardSet","initActionCard","turnEndsNextPlayerTurn","saveGameData","doRestoreGameData","Players","playerViewUpdate","cardDraw","cardDiscard","actionAnimation","initialHP","initialDP","updateView","standartAttack","attackDrawDiscard","sideEffectAttack","standartDefend","sideEffectDefend","defendDrawDiscard","defendWithAttack","randomCardDraw","randomDiscard","test","abs","undefined","randomCardDiscard","massiveRandomDraw","cardRemove","player","PlayersView","playerOneModel","playerTwoModel","playerContainer","updateInitialValue","playerOneHPValue","playerOneDefenceValue","playerOneStaminaValue","playerOneHP","playerTwoHPValue","playerTwoDefenceValue","playerTwoStaminaValue","playerTwoHP","updateViewHP","updateViewStamina","doAnimation","updateViewDef","width","passivePlayerUI","content","calcDP","activePlayerUI","updateDamageNumbers","amountEffect","effectStorage","elem","multipleAttackAnimation","PlayersController","playerView","playersView","priority","playCard","onSavePlayerData","doAction","updateInitialValues","BoardController","playerModel1","playerModel2","createCard","cardAnimBoard","cardAnimHand","grabedCardAnim","createCardsInHand","setPlayersTurnInfo","showPlayersDeck","closePlayersDeck","restoredCards","addCardInHand","deleteRandomCard","turnOnOfSound","createCardsForChoose","cardChooseAnim","cardChooseAnimInHandAdd","cardChooseAnimInHandRemove","pullRandomCardsInHand","dragCardStart","dragCardEnd","dragPreventAction","deletePlayedCard","showCardsForPlayers","openCloseOverlay","showWhichTurn","backAudio","paused","pause","player1HPstatus","player2HPstatus","battleground","winConditionObserver","MutationObserver","mutations","childNodes","removeItem","saveConcedeConditionObserver","start","observe","childList","subtree","characterData","attributes"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default class Events {\n\tconstructor() {\n\t\tthis.listeners = [];\n\t}\n\n\tattach(listener) {\n\t\tthis.listeners.push(listener);\n\t}\n\n\tnotify(arg1, arg2) {\n\t\tthis.listeners.forEach((listener, index) => {\n\t\t\tthis.listeners[index](arg1, arg2);\n\t\t});\n\t}\n}\n","export default class Cards {\n\tconstructor(id, type, cost, effect, icon, name, sideEffect) {\n\t\tthis.id = id;\n\t\tthis.cost = cost;\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.icon = icon;\n\t\tthis.name = name;\n\t\tthis.sideEffect = sideEffect;\n\t}\n}\n","import Cards from './modules/cardsModel';\nimport {gameObserver} from './game';\nimport {boardModel} from './game';\n\n//START CREATING WARRIOR'S CARDS\nconst strike_w = new Cards(0, 'attack', 1, 6, './images/cards/warrior/Strike.png', 'strike_w');\n\nconst bash = new Cards(1, 'attack', 1, 8, './images/cards/warrior/Bash.png', 'bash');\n\nconst anger = new Cards(2, 'attackAddEffect', 1, 6, './images/cards/warrior/Anger.png', 'anger',\n\t() => {\n\t\tlet effect;\n\t\tif (gameObserver.activePlayer.healthPoints < 50) {\n\t\t\teffect = 13;\n\t\t} else {\n\t\t\teffect = 6;\n\t\t}\n\t\treturn effect;\n\t});\n\nconst bodySlam = new Cards(3, 'attackAddEffect', 2, 0, './images/cards/warrior/BodySlam.png', 'bodySlam', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints > 0) {\n\t\teffect = gameObserver.activePlayer.defendPoints;\n\t} else {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst perfecedStrike = new Cards(4, 'attackAddEffect', 1, 6, './images/cards/warrior/PerfectedStrike.png', 'perfectedStrike', () => 6 + boardModel.cardInHand.children.length);\n\nconst bludgeon = new Cards(5, 'attackAddEffect', 3, 12, './images/cards/warrior/Bludgeon.png', 'bludgeon', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints > 50) {\n\t\teffect = 17;\n\t} else {\n\t\teffect = 12;\n\t}\n\treturn effect;\n});\n\nconst defend_w = new Cards(6, 'defend', 1, 5, './images/cards/warrior/Defend_R.png', 'defend_w');\n\nconst armaments = new Cards(7, 'defendAddEffect', 1, 5, './images/cards/warrior/Armaments.png', 'armaments', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints === 0) {\n\t\teffect = 7;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst ironWave = new Cards(8, 'defendAndAttack', 1, 5, './images/cards/warrior/IronWave.png', 'ironWave', () => 5);\n\nconst warcry = new Cards(9, 'defendDrawDiscard', 0, 1, './images/cards/warrior/Warcry.png', 'warcry');\n\nconst bloodletting = new Cards(10, 'defendDrawDiscard', 0, 3, './images/cards/warrior/Bloodletting.png', 'bloodletting');\n\nconst entrench = new Cards(11, 'defendAddEffect', 2, 2, './images/cards/warrior/Entrench.png', 'entrench', () => gameObserver.activePlayer.defendPoints * 2 - gameObserver.activePlayer.defendPoints);\n\n//START CREATING ROGUE'S CARDS\nconst strike_r = new Cards(0, 'attack', 1, 6, './images/cards/rogue/Strike_G.png', 'strike_r');\n\nconst daggerThrow = new Cards(1, 'attackDrawDiscard', 1, 9, './images/cards/rogue/R_dagger-throw.png', 'daggerThrow');\n\nconst flechettes = new Cards(2, 'attackAddEffect', 1, 3, './images/cards/rogue/Flechettes.png', 'flechettes', () => 3 * boardModel.cardInHand.children.length);\n\nconst riddleWithHoles = new Cards(3, 'attackAddEffect', 2, 7, './images/cards/rogue/RiddleWithHoles.png', 'riddleWithHoles');\n\nconst slice = new Cards(4, 'attack', 0, 4, './images/cards/rogue/Slice.png', 'slice');\n\nconst quickSlash = new Cards(5, 'attackDrawDiscard', 1, 7, './images/cards/rogue/QuickSlash.png', 'quickSlash');\n\nconst survivor = new Cards(6, 'defendDrawDiscard', 1, 8, './images/cards/rogue/Survivor.png', 'survivor');\n\nconst deflect = new Cards(7, 'defend', 0, 4, './images/cards/rogue/Deflect.png', 'deflect');\n\nconst backFlip = new Cards(8, 'defendDrawDiscard', 1, 2, './images/cards/rogue/Backflip.png', 'backFlip', () => 5);\n\nconst prepared = new Cards(9, 'defendDrawDiscard', 0, 1, './images/cards/rogue/Prepared.png', 'prepared');\n\nconst expertise = new Cards(10, 'defendDrawDiscard', 1, 5, './images/cards/rogue/Expertise.png', 'expertise');\n\nconst dash = new Cards(11, 'defendAndAttack', 2, 10, './images/cards/rogue/Dash.png', 'dash', () => 8);\n\n//START CREATING MAGE'S CARDS\nconst strike_m = new Cards(0, 'attack', 1, 6, './images/cards/mage/Strike_P.png', 'strike_m');\n\nconst cutThroughFate = new Cards(1, 'attackDrawDiscard', 1, 7, './images/cards/mage/CutThroughFate.png', 'cutThroughFate', () => 2);\n\nconst reachHeaven = new Cards(2, 'attack', 2, 12, './images/cards/mage/ReachHeaven.png', 'reachHeaven');\n\nconst signatureMove = new Cards(3, 'attackAddEffect', 2, 0, './images/cards/mage/SignatureMove.png', 'signatureMove', () => gameObserver.passivePlayer.defendPoints);\n\nconst tantrum = new Cards(4, 'attackAddEffect', 1, 3, './images/cards/mage/Tantrum.png', 'tantrum', () => 3 + (Math.floor(Math.random() * (6 - 1)) + 1));\n\nconst judjment = new Cards(5, 'attackAddEffect', 2, 0, './images/cards/mage/Judgment.png', 'judjment', () => {\n\tlet effect;\n\tif (gameObserver.passivePlayer.healthPoints <= 15) {\n\t\teffect = 0;\n\t}\n\treturn effect;\n});\n\nconst masterReality = new Cards(6, 'defendAddEffect', 1, 5, './images/cards/mage/MasterReality.png', 'masterReality', () => {\n\tlet effect;\n\tif (gameObserver.activePlayer.defendPoints == 0) {\n\t\teffect = 10;\n\t} else {\n\t\teffect = 5;\n\t}\n\treturn effect;\n});\n\nconst defend_m = new Cards(7, 'defend', 1, 5, './images/cards/mage/Defend_P.png', 'defend_m');\n\nconst meditate = new Cards(8, 'defendAddEffect', 1, 3, './images/cards/mage/Meditate.png', 'meditate');\n\nconst thirdEye = new Cards(9, 'defendDrawDiscard', 1, 7, './images/cards/mage/ThirdEye.png', 'thirdEye');\n\nconst nirvana = new Cards(10, 'defendAddEffect', 1, 0, './images/cards/mage/Nirvana.png', 'nirvana', () => gameObserver.passivePlayer.defendPoints);\n\nconst alpha = new Cards(11, 'defendDrawDiscard', 1, 4, './images/cards/mage/Alpha.png', 'alpha');\n\n\nexport const skillCollection = {\n\twarrior: [strike_w, bash, anger, bodySlam, perfecedStrike, bludgeon, defend_w, armaments, ironWave, warcry, bloodletting, entrench],\n\trogue: [strike_r, daggerThrow, flechettes, riddleWithHoles, slice, quickSlash, survivor, deflect, backFlip, prepared, expertise, dash],\n\tmage: [strike_m, cutThroughFate, reachHeaven, signatureMove, tantrum, judjment, masterReality, defend_m, meditate, thirdEye, nirvana, alpha]\n};\n","// animation through all menu loading black screen\nfunction loading(target) {\n\tswitch (target) {\n\t\tcase 'mainMenuLoad':\n\t\t\tlet mainEl = document.createElement('div');\n\n\t\t\tmainEl.className = 'back-main-menu-anim';\n\n\t\t\tdocument.body.insertBefore(mainEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(mainEl), 1100);\n\t\t\tbreak;\n\t\tcase 'chooseMenuLoad':\n\t\t\tlet chooseEl = document.createElement('div');\n\n\t\t\tchooseEl.className = 'go-to-choose-menu-anim';\n\n\t\t\tdocument.body.insertBefore(chooseEl, document.querySelector('.wrapper-main-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(chooseEl), 1100);\n\t\t\tbreak;\n\t\tcase 'battleFieldLoad':\n\t\t\tlet battleEl = document.createElement('div');\n\n\t\t\tbattleEl.className = 'start-game-anim';\n\n\t\t\tdocument.body.insertBefore(battleEl, document.querySelector('.wrapper-choose-menu'));\n\n\t\t\tsetTimeout(() => document.body.removeChild(battleEl), 1100);\n\t\t\tbreak;\n\t}\n}\n\n// starting play backgorundMusic\nfunction switchPlayPause() {\n\tconst hash = window.location.hash;\n\tconst state = decodeURIComponent(hash.substr(1));\n\tconst soundOffOn = document.querySelector('.soundIcon');\n\tlet backAudio;\n\n\tif (state == 'battle-field' || state == 'restoredGame') {\n\t\tbackAudio = document.querySelector('.background-music-battlefield');\n\t} else {\n\t\tbackAudio = document.querySelector('.background-music-main-menu');\n\t}\n\n\tif (backAudio.paused) {\n\t\tbackAudio.play();\n\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t} else {\n\t\tbackAudio.pause();\n\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t}\n}\n\n//# добавить вибрацию\nconst checkBackgroundAudio = (function (querySelector) {\n\tconst currentHash = [];\n\tconst mainAudio = document.querySelector('.background-music-main-menu');\n\tconst audio = document.querySelector('.background-music-battlefield');\n\tconst allAudio = document.querySelectorAll('.music');\n\n\treturn function () {\n\t\tcurrentHash.push(decodeURIComponent(window.location.hash.substr(1)));\n\n\t\tconst soundOffOn = document.querySelector(querySelector);\n\n\t\tif (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'battle-field' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.play();\n\t\t} else if (currentHash[currentHash.length - 1] === 'restoredGame' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'restoredGame' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.play();\n\t\t} else if (currentHash[currentHash.length - 1] === 'main-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' ||  currentHash[currentHash.length - 2] === 'restoredGame' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'main-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' ||  currentHash[currentHash.length - 2] === 'restoredGame' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.play();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' ||  currentHash[currentHash.length - 2] === 'restoredGame' && [...allAudio].some(element => element.paused)) {\n\t\t\tmainAudio.play();\n\t\t\taudio.pause();\n\t\t} else if (currentHash[currentHash.length - 1] === 'choose-menu' &&\n\t\t\tcurrentHash[currentHash.length - 2] === 'battle-field' ||  currentHash[currentHash.length - 2] === 'restoredGame' && [...allAudio].every(element => element.paused)) {\n\t\t\tmainAudio.pause();\n\t\t\taudio.pause();\n\t\t}\n\n\t\tif ([...allAudio].every(element => element.paused)) {\n\t\t\tsoundOffOn.className = 'fas fa-volume-mute soundIcon';\n\t\t} else {\n\t\t\tsoundOffOn.className = 'fas fa-volume-up soundIcon';\n\t\t}\n\t};\n}('.soundIcon'));\n\n// shake display when character choosed\nfunction shakeAnimation(queryElement, direction = 'horizontal') {\n\tconst element = document.querySelector(queryElement);\n\n\tswitch (direction) {\n\t\tcase 'horizontal':\n\t\t\telement.classList.remove('shakeX');\n\t\t\tsetTimeout(() => element.classList.add('shakeX'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeX'), 400);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\telement.classList.remove('shakeY');\n\t\t\tsetTimeout(() => element.classList.add('shakeY'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeY'), 400);\n\t\t\tbreak;\n\t\tcase 'mix':\n\t\t\telement.classList.remove('shakeMix');\n\t\t\tsetTimeout(() => element.classList.add('shakeMix'), 0);\n\t\t\tsetTimeout(() => element.classList.remove('shakeMix'), 400);\n\t\t\tbreak;\n\t}\n}\n\nfunction createCardAnim(querySelector, amount) {\n\tlet elementAnim = document.querySelector(querySelector);\n\n\tswitch (amount) {\n\t\tcase 'single':\n\t\t\tfor (let i = 0; i < [...elementAnim.children].length; i++) {\n\t\t\t\tif (elementAnim.children[i].classList.contains('cardsDrawAnim')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\telementAnim.children[i].classList.add('cardsDrawAnim');\n\n\t\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'multiple':\n\t\t\t[...elementAnim.children].forEach((element, index) => setTimeout(() => {\n\t\t\t\telement.classList.add('cardsDrawAnim');\n\n\t\t\t\tplaySoundEffect('.push-card-audio');\n\t\t\t}, 250 * index));\n\t\t\tbreak;\n\t\tcase 'overlay':\n\t\t\t[...elementAnim.children].forEach(element => element.classList.add('cardsDrawAnim'));\n\t}\n}\n\nfunction discardCardAnim(querySelector) {\n\tquerySelector.classList.add('cardDiscard');\n}\n\nfunction endTurnAnim(side) {\n\tconst button = document.querySelector('.end-of-turn-btn');\n\tconst turnAnnouncer = document.querySelector('.players-action');\n\n\tturnAnnouncer.classList.add('players-turn-info');\n\n\tswitch (side) {\n\t\tcase 'left':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('right');\n\t\t\t\tbutton.style.left = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tsetTimeout(() => {\n\t\t\t\tbutton.style.removeProperty('left');\n\t\t\t\tbutton.style.right = '2%';\n\t\t\t}, 500);\n\t\t\tbreak;\n\t}\n\n\tsetTimeout(() => button.classList.add('endTurnAnim'), 1300);\n\n\tsetTimeout(() => turnAnnouncer.classList.remove('players-turn-info'), 2100);\n\n\tsetTimeout(() => button.classList.remove('endTurnAnim'), 1000);\n}\n\nfunction attackAnimationEffect(querySelector, direction) {\n\tconst container = document.querySelector(querySelector);\n\n\tswitch (direction) {\n\t\tcase 'right':\n\t\t\tcontainer.classList.add('attackRight');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackRight'), 1000);\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tcontainer.classList.add('attackLeft');\n\n\t\t\tsetTimeout(() => container.classList.remove('attackLeft'), 1000);\n\t\t\tbreak;\n\t}\n}\n\nfunction blockAnimationEffect(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\tsetTimeout(() => container.removeChild(image), 1000);\n}\n\nfunction attackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.style.transform = `rotate(${Math.floor(Math.random() * (360 - 1) + 1)}deg)`;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 600);\n}\n\nfunction standartAttackAnimation(querySelector, className, src) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\tcontainer.appendChild(image);\n\n\twindow.navigator.vibrate([400]);\n\n\tsetTimeout(() => container.removeChild(image), 400);\n}\n\nfunction multipleAttackAnimation(querySelector, className, src, amountEffect) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tlet effectStorage = [];\n\n\tfor (let i = 0; i < amountEffect; i++) {\n\t\tconst image = document.createElement('img');\n\t\teffectStorage.push(image);\n\t}\n\n\teffectStorage.forEach((elem, index) => {\n\t\telem.src = src;\n\n\t\tif (index === 1) {\n\t\t\telem.style.transform = 'rotate(30deg)';\n\t\t} else if (index === 2) {\n\t\t\telem.style.transform = 'rotate(315deg)';\n\t\t}\n\n\t\telem.className = className;\n\n\t\tsetTimeout(() => {\n\t\t\tcontainer.appendChild(elem);\n\n\t\t\twindow.navigator.vibrate([200]);\n\n\t\t\tplaySoundEffect('.strike-attack-audio');\n\n\t\t\tsetTimeout(() => container.removeChild(elem), 400);\n\t\t}, index * 300);\n\t});\n}\n\nfunction ultimateSkillAnimation(querySelector, className, src, audio) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\tconst overlay = document.querySelector('.players-overlay');\n\tconst overlayClose = document.querySelector('.players-overlay__close');\n\tconst image = document.createElement('img');\n\n\timage.src = src;\n\timage.className = className;\n\n\toverlay.classList.remove('hidden');\n\toverlay.classList.add('fade-in');\n\toverlayClose.classList.add('hidden');\n\n\tsetTimeout(() => {\n\t\tcontainer.appendChild(image);\n\n\t\twindow.navigator.vibrate(800);\n\n\t\tshakeAnimation(querySelector)\n\n\t\tplaySoundEffect(audio);\n\t}, 200);\n\n\tsetTimeout(() => {\n\t\tcontainer.removeChild(image);\n\t\toverlay.classList.add('fade-out');\n\n\t}, 1250);\n\n\tsetTimeout(() => {\n\t\toverlay.classList.add('hidden');\n\t\toverlay.classList.remove('fade-in');\n\t\toverlay.classList.remove('fade-out');\n\t\toverlayClose.classList.remove('hidden');\n\t}, 1600);\n}\n\nfunction playSoundEffect(querySelector) {\n\tconst soundEffect = document.querySelector(querySelector);\n\n\tif (!soundEffect) {\n\t\treturn;\n\t}\n\n\tsoundEffect.currentTime = 0;\n\n\tsoundEffect.play();\n}\n\nfunction damageNumbersAnimation(querySelector, className, content) {\n\tconst container = document.querySelector(querySelector).parentElement;\n\n\tconst divEl = document.createElement('div');\n\tdivEl.textContent = content;\n\tdivEl.className = className;\n\n\tcontainer.appendChild(divEl);\n\n\tsetTimeout(() => container.removeChild(divEl), 1500);\n}\n\nexport {\n\tloading, switchPlayPause, checkBackgroundAudio, shakeAnimation,\n\tcreateCardAnim, endTurnAnim, blockAnimationEffect, attackAnimation,\n\tplaySoundEffect, attackAnimationEffect, multipleAttackAnimation, discardCardAnim,\n\tstandartAttackAnimation, ultimateSkillAnimation, damageNumbersAnimation\n};\n\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {player1, player2} from '../game';\nimport {playSoundEffect, shakeAnimation} from '../animation_and_sound_effects/animation.js';\n\nexport default class Game {\n\tconstructor() {\n\t\tthis.activePlayer = null;               //активный игрок на данный момент кто будет наносить урон\n\t\tthis.passivePlayer = null;               //пассивный игрок на данный момент кто будет получать урон\n\n\t\tthis.playerOneTurn = true;\n\t\tthis.playerTwoTurn = false;\n\n\t\tthis.playerOneClass = null;    // сохраняет класс игрока будем реализовывать выбор скилов под класс\n\t\tthis.playerTwoClass = null;\n\n\t\tthis.playerOnePullOfCards = [];\n\t\tthis.playerTwoPullOfCards = [];\n\n\t\tthis.playersInfo = {};  //info from local storage about choose menu\n\n\t\tthis.dragCard = null;\n\t\tthis.tempCard = null; // карта которая играется\n\n\t\t// событие выбор карт завершен\n\t\tthis.selectionEnd = new Events();\n\n\t\t// событие выбор карт продолжается\n\t\tthis.selectionContinue = new Events();\n\n\t\t// событие изменить кто выбирает карты\n\t\tthis.choosePlayerInfo = new Events();\n\n\t\t// событие установить никнеймы игрокам\n\t\tthis.updatePlayersNames = new Events();\n\n\t\t// событие установить модельки персонажей игрокам\n\t\tthis.updatePlayersModels = new Events();\n\t}\n\n\tstart() {\n\t\tthis.init();\n\t};\n\n\tinit() {\n\t\tthis.setPlayersChoiceInfo('playersInfo');\n\t\tthis.setPlayersClasses();\n\t\tthis.setPlayersNames();\n\t\tthis.setPlayersModels();\n\t\tthis.setTextChooseInfo();\n\t\tthis.setActivePassivePlayer();\n\t};\n\n\t// забираем инфу о выборе игроками персонажей и их никнеймов и парсим json\n\tsetPlayersChoiceInfo(object) {\n\t\tlet temp = localStorage.getItem(object);\n\n\t\tthis.playersInfo = JSON.parse(temp);\n\t};\n\n\t// устанавливаем класы игроками из объекта\n\tsetPlayersClasses() {\n\t\tthis.playerOneClass = this.playersInfo.playerOneClass;\n\n\t\tthis.playerTwoClass = this.playersInfo.playerTwoClass;\n\t};\n\n\t// устанавливаем никнеймы игрокам из объекта\n\tsetPlayersNames() {\n\t\tthis.updatePlayersNames.notify(this.playersInfo.playerOneName, this.playersInfo.playerTwoName);\n\t};\n\n\t// устанавливаем модельки игроков согласно выбору\n\tsetPlayersModels() {\n\t\tthis.updatePlayersModels.notify(this.playersInfo.playerOneClass, this.playersInfo.playerTwoClass);\n\t};\n\n\t// показываем какой игрок выбирает карты\n\tsetTextChooseInfo() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerOneName} is choosing`);\n\t\t} else {\n\t\t\tthis.choosePlayerInfo.notify(`${this.playersInfo.playerTwoName} is choosing`);\n\t\t}\n\t};\n\n\t// линкуем player1 & player2 в gamemodel\n\tsetActivePassivePlayer() {\n\t\tif(this.playerOneTurn) {\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t} else {\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t}\n\t};\n\n\t// пулим карты выбранные ироком на старте игры в gameControl, этими картами игроки будут играть дальше\n\tdefinePlayersCardSet() {\n\t\tlet cards = document.querySelectorAll('.cards');\n\n\t\t//счетчик выбранных карт\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\tplaySoundEffect('.confirm-failed-audio');\n\t\t\tshakeAnimation('.players-draw-info__accept', 'horizontal');\n\t\t\treturn;\n\t\t}\n\n\t\tlet tempCardChoosePlayer = [];\n\n\t\t//пушим карты 1го игрока в массив\n\t\tif (this.playerOneTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerOneClass);\n\t\t}\n\n\t\t//пушим карты 2го игрока в массив\n\t\tif (this.playerTwoTurn) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tif (cards[i].classList.contains('card-to-select')) {\n\t\t\t\t\ttempCardChoosePlayer.push(cards[i].dataset.info);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempCardChoosePlayer, this.playerTwoClass);\n\t\t}\n\n\t\tplaySoundEffect('.confirm-audio');\n\n\t\t//меняем очередность выбора для игроков\n\t\tthis.setTurnPriority();\n\n\t\tthis.checkCardsSelectionEnd();\n\t};\n\n\t// передаем массив из выбранных согласно ID карты и класс выбранного персонажа для поиска в SkillCollection его типа карт\n\tcheckOnSelectedCards(datainfo, search) {\n\t\tlet temp = [];\n\n\t\tfor (let i = 0; i < skillCollection[search].length; i++) {\n\t\t\tfor (let j = 0; j < datainfo.length; j++) {\n\t\t\t\tif (skillCollection[search][i]['id'] == datainfo[j]) {\n\t\t\t\t\ttemp.push(skillCollection[search][i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn temp;\n\t};\n\n\t//проверяем игроки набрали карты скрываем меню выбора карт, открываем игровое поле\n\tcheckCardsSelectionEnd() {\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\t// если выбрано больше или недобор указанных карт запрещает пулить в переменную\n\t\tif (counter < 8 || counter >= 9) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.playerOnePullOfCards.length > 1 && this.playerTwoPullOfCards.length > 1) {\n\t\t\tthis.selectionEnd.notify();\n\t\t} else {\n\t\t\tthis.selectionContinue.notify();\n\t\t\tthis.setTextChooseInfo();\n\t\t}\n\t};\n\n\t//узнаем какая карта была взята для игры и сыграна\n\tinitActionCard(eventTarget) {\n\t\tthis.dragCard = eventTarget;\n\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.tempCard = this.playerOnePullOfCards.find(element => element.id == this.dragCard.dataset.info);\n\t\t} else {\n\t\t\tthis.tempCard = this.playerTwoPullOfCards.find((element) => element.id == this.dragCard.dataset.info);\n\t\t}\n\t};\n\n\t//конец хода меняет инфо о активном игроке и обновляет выносливость\n\tturnEndsNextPlayerTurn() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t\tthis.activePlayer = player2;\n\t\t\tthis.passivePlayer = player1;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t\tthis.activePlayer = player1;\n\t\t\tthis.passivePlayer = player2;\n\t\t}\n\t};\n\n\t// устанавливаем приоритет хода игрока\n\tsetTurnPriority() {\n\t\tif (this.playerOneTurn) {\n\t\t\tthis.playerOneTurn = false;\n\t\t\tthis.playerTwoTurn = true;\n\t\t} else {\n\t\t\tthis.playerOneTurn = true;\n\t\t\tthis.playerTwoTurn = false;\n\t\t}\n\t};\n\n\tsaveGameData() {\n\t\tconst info = {\n\t\t\tplayerOneTurn: this.playerOneTurn,\n\t\t\tplayerTwoTurn: this.playerTwoTurn,\n\t\t\tplayerOnePullOfCards: this.playerOnePullOfCards.map((element) => element.id),\n\t\t\tplayerTwoPullOfCards: this.playerTwoPullOfCards.map((element) => element.id),\n\t\t\tactivePlayerCardsHand: this.saveActivePlayerCardsHand(),\n\t\t\tplayer1: player1.savePlayerData(),\n\t\t\tplayer2: player2.savePlayerData()\n\t\t}\n\n\t\tconsole.log(info);\n\n\t\tlocalStorage.setItem('gameData', JSON.stringify(info));\n\t}\n\n\tsaveActivePlayerCardsHand() {\n\t\tconst cardInfo = document.querySelector('.card-in-hand-field');\n\t\tconst cardID = [...cardInfo.children].map((element) => element.dataset.info)\n\n\t\treturn cardID\n\t}\n\n\tdoRestoreGameData() {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\t\tlet activePlayerHand;\n\n\t\tthis.playerOneTurn = tempData.playerOneTurn;\n\t\tthis.playerTwoTurn = tempData.playerTwoTurn;\n\n\t\tthis.playerOnePullOfCards = this.checkOnSelectedCards(tempData.playerOnePullOfCards, this.playerOneClass);\n\t\tthis.playerTwoPullOfCards = this.checkOnSelectedCards(tempData.playerTwoPullOfCards, this.playerTwoClass);\n\n\t\tif(this.playerOneTurn){\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerOneClass);\n\t\t} else {\n\t\t\tactivePlayerHand = this.checkOnSelectedCards(tempData.activePlayerCardsHand, this.playerTwoClass);\n\t\t}\n\n\t\tthis.setActivePassivePlayer();\n\n\t\tplayer1.doRestorePlayerData('player1');\n\t\tplayer2.doRestorePlayerData('player2');\n\n\t\tthis.selectionEnd.notify(activePlayerHand);\n\n\t\toverlay.removeChild(divEl);\n\n\t\toverlay.classList.add('hidden');\n\t\toverlayClose.classList.remove('hidden');\n\t}\n}\n\n\n\n","import Events from './eventsModel';\nimport {skillCollection} from '../cards';\nimport {createCardAnim, playSoundEffect, endTurnAnim} from '../animation_and_sound_effects/animation.js';\n\nexport default class Board {\n\tconstructor(model) {\n\t\tthis.gameModel = model;\n\n\t\tthis.decWrapper = document.querySelector('.cards-choose-field');        // field for cards at the start when players are choosing\n\t\tthis.btnAccept = document.querySelector('.players-draw-info__accept');               // player accept cards he chose\n\t\tthis.cardsChooseCounter = document.querySelector('.players-draw-info__count');             // counter for amount of cards have been chosen(needs for alert)\n\t\tthis.cardInHand = document.querySelector('.card-in-hand-field');              // field for cards in hand each player\n\t\tthis.battleField = document.querySelector('.battle-field');            // play field\n\t\tthis.endTurn = document.querySelector('.end-of-turn-btn');             // end turn button\n\t\tthis.playersTurnInfo = document.querySelector('.players-action');\n\t\tthis.cardsPlayField = document.querySelector('.play-field');           // area for cards to drop and play their actions\n\t\tthis.soundOffOn = document.querySelector('.soundIcon');\n\n\t\tthis.playersOverlay = document.querySelector('.players-overlay');\n\t\tthis.playersDeck = document.querySelector('.players-overlay__cards');\n\t\tthis.playersDeckClose = document.querySelector('.players-overlay__close');\n\n\t\tthis.showDeckPlayer1 = document.querySelector('.player-1__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\t\tthis.showDeckPlayer2 = document.querySelector('.player-2__pile-of-car');           // возможность в игре посмотреть какие карты ты выбрал\n\n\t\tthis.menu = document.querySelector('.battle-field-nav');\n\t\tthis.menuIcon = document.querySelector('.battle-field-nav__icon');\n\n\t\t// создаем событие на создание карт\n\t\tthis.onCreateCards = new Events();\n\t\tthis.onCounterChange = new Events();\n\t\tthis.removeCards = new Events();\n\t\tthis.removeActionCard = new Events();\n\t\tthis.createAnimation = new Events();\n\t\tthis.endTurnAnimation = new Events();\n\t\tthis.notEnoughStamina = new Events();\n\t}\n\n\t// создаем деку в начале игры для игрока согласно классу\n\tcreateCardsForChoose(playerClassInfo) {\n\t\tthis.removeExtraCards('board');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerOneClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tskillCollection[playerClassInfo.playerTwoClass].forEach((element) => this.createCards(element, 'board'));\n\n\t\t\t\tthis.createAnimation.notify('.cards-choose-field', 'multiple');\n\n\t\t\t\t// createCardAnim('.cards-choose-field', 'multiple');\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tshowCardsForPlayers(eventTarget) {\n\t\tthis.removeExtraCards('overlay');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target.classList.contains('player-1__pile-of-car')) {\n\t\t\tthis.gameModel.playerOnePullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\n\t\tif (target.classList.contains('player-2__pile-of-car')) {\n\t\t\tthis.gameModel.playerTwoPullOfCards.forEach((element) => this.createCards(element, 'overlay'));\n\n\t\t\tthis.createAnimation.notify('.players-overlay__cards', 'overlay')\n\t\t}\n\t}\n\n\topenCloseOverlay(state) {\n\t\tswitch (state) {\n\t\t\tcase 'open':\n\t\t\t\tthis.playersOverlay.classList.remove('hidden');\n\t\t\t\tthis.playersOverlay.classList.add('fade-in-pile');\n\n\t\t\t\tplaySoundEffect('.overlay-open-audio');\n\n\t\t\t\tbreak;\n\t\t\tcase 'close':\n\t\t\t\tthis.playersOverlay.classList.add('hidden');\n\t\t\t\tthis.playersOverlay.classList.remove('fade-in-pile');\n\n\t\t\t\tplaySoundEffect('.overlay-close-audio');\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCards(card, appendPlace, draggable = false) {\n\t\tlet elDiv = document.createElement('div');\n\n\t\telDiv.setAttribute('class', 'cards');\n\t\telDiv.setAttribute('data-info', `${card.id}`);\n\t\telDiv.style.backgroundImage = `url(${card.icon})`;\n\n\t\tif (draggable) {\n\t\t\telDiv.setAttribute('draggable', 'true');\n\t\t}\n\n\t\tthis.onCreateCards.notify(elDiv, appendPlace);\n\t}\n\n\t// кидаем карты в руку\n\tpullRandomCardsInHand() {\n\t\tthis.removeExtraCards('hand');\n\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < 4; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);   // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) == -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// создаем карты в руке согласно игрока чей ход\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerOnePullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.createCards(this.gameModel.playerTwoPullOfCards[tempIndex[i]], 'hand', true);\n\t\t\t}\n\n\t\t\tthis.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t}\n\t}\n\n\t// убираем лишние карты с доски или из руки\n\tremoveExtraCards(place) {\n\t\tlet orderToRemove = [];\n\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\torderToRemove = [...this.decWrapper.children];\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\torderToRemove = [...this.cardInHand.children];\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\torderToRemove = [...this.playersDeck.children];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.removeCards.notify(orderToRemove, place);\n\t}\n\n\t//удаляем сыгранные карты из руки с проверкой\n\tdeletePlayedCard(condition, card) {\n\t\tif (this.gameModel.tempCard.cost > this.gameModel.activePlayer.staminaPoints) {\n\t\t\tthis.notEnoughStamina.notify();\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (condition) {\n\t\t\tcase 'playedCard':\n\t\t\t\tthis.removeActionCard.notify(this.gameModel.dragCard);\n\t\t\t\tbreak;\n\t\t\tcase 'randomCard':\n\t\t\t\tthis.removeActionCard.notify(card);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// подсветка выбранных карт\n\tcardChooseAnim(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.decWrapper) {\n\t\t\ttarget.classList.toggle('card-to-select');\n\t\t}\n\n\t\tif (target.classList.contains('card-to-select')) {\n\t\t\tplaySoundEffect('.card-selected-audio')\n\t\t}\n\n\t\tlet counter = document.getElementsByClassName('card-to-select').length;\n\n\t\tlet counterInfo = {};\n\n\t\tcounterInfo.number = counter;\n\n\t\tif (counter > 8) {\n\t\t\tcounterInfo.color = 'red';\n\t\t} else if (counter == 8) {\n\t\t\tcounterInfo.color = 'green';\n\t\t} else if (counter > 0 && counter < 8) {\n\t\t\tcounterInfo.color = 'cyan';\n\t\t} else {\n\t\t\tcounterInfo.color = 'white';\n\t\t}\n\n\t\tthis.onCounterChange.notify(counterInfo);\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandAdd(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.add('card-to-action');\n\t\t}\n\t}\n\n\t//анимация выбора только одной карты для игры в руке\n\tcardChooseAnimInHandRemove(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('card-to-action');\n\t\t}\n\t}\n\n\t//добавляем стили для перетаскивания\n\tdragCardStart(eventTarget) {\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\tsetTimeout(() => target.classList.add('invisible'), 0);\n\t\t}\n\n\t\tplaySoundEffect('.drag-audio');\n\t}\n\n\t//у ираем стили для перетаскивания\n\tdragCardEnd(eventTarget) {\n\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\tlet target = eventTarget;\n\n\t\tif (target !== this.cardInHand) {\n\t\t\ttarget.classList.remove('invisible');\n\t\t}\n\t}\n\n\tdragPreventAction(event) {\n\t\tevent.preventDefault();\n\t}\n\n\tshowWhichTurn() {\n\t\tplaySoundEffect('.end-turn-audio');\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerOneName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('left');\n\t\t} else {\n\t\t\tthis.playersTurnInfo.textContent = `${this.gameModel.playersInfo.playerTwoName}'s Turn`;\n\n\t\t\tthis.endTurnAnimation.notify('right');\n\t\t}\n\t}\n}\n","import Events from './eventsModel';\nimport {createCardAnim, endTurnAnim, playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {gameObserver, player1} from '../game';\nimport {player2} from '../game';\n\nexport default class BoardView {\n\tconstructor(board, game, selector) {\n\t\tthis.boardModel = board;\n\n\t\tthis.gameModel = game;\n\n\t\tthis.boardSelector = selector;\n\n\t\tthis.forbidClick = event => event.stopPropagation();\n\n\t\tthis.touchEvent = event => {\n\t\t\tconst self = this;\n\t\t\tconst coordinateY = event.touches[0].pageY;\n\t\t\tconst eventTarget = event.target;\n\n\t\t\tif(event.target.classList.contains('cards')) {\n\t\t\t\tthis.touchCardStart.notify(event.target);\n\n\t\t\t\tevent.target.classList.add('touchStartAnim');\n\n\t\t\t\tplaySoundEffect('.drag-audio')\n\n\t\t\t\tfunction closure() {\n\t\t\t\t\tconst coordinate = coordinateY;\n\t\t\t\t\tconst target = eventTarget;\n\n\t\t\t\t\tself.boardSelector.addEventListener('touchend',  function touchEnd (event) {\n\t\t\t\t\t\tconst comparison = parseFloat(coordinateY)  - parseFloat(event.changedTouches[0].pageY);\n\n\t\t\t\t\t\teventTarget.classList.remove('touchStartAnim');\n\n\t\t\t\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\n\t\t\t\t\t\tif(comparison > 170) {\n\t\t\t\t\t\t\tself.dropEvent.notify()\n\t\t\t\t\t\t\tself.doCardAction.notify(self.gameModel.playerOneTurn)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.removeEventListener('touchend', touchEnd);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tclosure();\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onLoadCreate = new Events;\n\n\t\t// событие для this.gameModel закинуть в масиив выбранные карты\n\t\tthis.onDefineCards = new Events;\n\n\t\t// событие на анимацию(подсветку выбора карт)\n\t\tthis.onAnimCards = new Events;\n\n\t\t// событие на проверку набрали ли игроки карты\n\t\tthis.submitCardCheckChoose = new Events;\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.cardInHandChoosen = new Events();\n\n\t\t// навели убрали мышку на карту в руке\n\t\tthis.grabCardStart = new Events();\n\n\t\tthis.grabCardEnd = new Events();\n\n\t\tthis.preventDrag = new Events();\n\n\t\tthis.touchCardStart = new Events();\n\n\t\t//удаляем сыгранную карту\n\t\tthis.dropEvent = new Events();\n\n\t\t// выполняем действие карты\n\t\tthis.doCardAction = new Events();\n\n\t\tthis.endTurn = new Events();\n\n\t\tthis.showPlayerDeck = new Events();\n\n\t\tthis.soundOffOn = new Events();\n\n\t\tthis.saveGameProgres = new Events();\n\n\t\tthis.onRestoreGameData = new Events();\n\n\t\tthis.onConcede = new Events();\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.onDefineCards.notify());\n\n\t\tthis.boardModel.btnAccept.addEventListener('click', () => this.submitCardCheckChoose.notify());\n\n\t\t// событие клик подстветка выбора карт\n\t\tthis.boardModel.decWrapper.addEventListener('click', (event) => this.onAnimCards.notify(event.target));\n\n\t\t// показываем карты какие наюрал игрок на этапе выбора\n\t\tthis.boardModel.battleField.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\tthis.boardModel.playersDeckClose.addEventListener('click', (event) => this.showPlayerDeck.notify(event.target));\n\n\t\tif(\"ontouchstart\" in window) {\n\t\t\tthis.boardModel.cardInHand.addEventListener('touchstart', (event) => this.touchEvent(event));\n\t\t} else {\n\t\t\t// анимация карт в руке при наведении\n\t\t\tthis.boardModel.cardInHand.addEventListener('mouseover', (event) => this.cardInHandChoosen.notify(event.target, 'focus'));\n\n\t\t\tthis.boardModel.cardInHand.addEventListener('mouseout', (event) => this.cardInHandChoosen.notify(event.target, 'blur'));\n\n\t\t\t// анимация карт при перетаскивании плюс узнаем какую карту перетавскиваем\n\t\t\tthis.boardModel.cardInHand.addEventListener('dragstart', (event) => this.grabCardStart.notify(event.target, 'focus'));\n\n\t\t\tthis.boardModel.cardInHand.addEventListener('dragend', (event) => this.grabCardEnd.notify(event.target, 'blur'));\n\n\t\t\t// prevent default behavior\n\t\t\tthis.boardModel.cardsPlayField.addEventListener('dragenter', (event) => this.preventDrag.notify(event));\n\n\t\t\tthis.boardModel.cardsPlayField.addEventListener('dragover', (event) => this.preventDrag.notify(event));\n\n\t\t\t// играем карты\n\t\t\tthis.boardModel.cardsPlayField.addEventListener('drop', () => {\n\t\t\t\tthis.dropEvent.notify();\n\t\t\t\tthis.doCardAction.notify(this.gameModel.playerOneTurn);\n\t\t\t})\n\t\t}\n\n\t\tthis.boardModel.endTurn.addEventListener('click', () => this.endTurn.notify());\n\n\t\tthis.boardModel.soundOffOn.addEventListener('click', () => this.soundOffOn.notify());\n\n\t\tthis.boardModel.menuIcon.addEventListener('click', () => {\n\t\t\tplaySoundEffect('.btn-click-audio');\n\t\t\tthis.showMenu()\n\t\t});\n\n\t\tthis.boardModel.menu.addEventListener('click', (event) => this.navigateGame(event.target));\n\n\t\t[...this.boardModel.menu.getElementsByTagName('li')].forEach((button) => {\n\t\t\tbutton.addEventListener('mouseover', () => playSoundEffect('.btn-hover-audio'));\n\t\t\tbutton.addEventListener('click', () => playSoundEffect('.btn-click-audio'));\n\t\t});\n\n\t\tthis.boardSelector.querySelector('.save-progress').addEventListener('click', this.forbidClick);\n\n\t\tthis.boardSelector.querySelector('.concede').addEventListener('click', this.forbidClick);\n\n\t\twindow.addEventListener('beforeunload', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.returnValue = '';\n\t\t});\n\n\n\t\t// подписываемся на событие в модели\n\t\t// this.boardModel создала карты надо их отобразить\n\t\tthis.boardModel.onCreateCards.attach((card, place) => this.drawCards(card, place));\n\n\t\t// модель меняет количество набранных карт отображаем\n\t\tthis.boardModel.onCounterChange.attach((info) => this.counterUpdate(info));\n\n\t\t// событие this.gameModel проверяет набранны ли у игроков карты\n\t\tthis.gameModel.selectionEnd.attach(() => this.selectionEndUpdate());\n\n\t\t// событие на удаление лишних карт\n\t\tthis.boardModel.removeCards.attach((cards, place) => this.extraCardsToRemove(cards, place));\n\n\t\t// событие на отображение инфо кто выбирает карты\n\t\tthis.gameModel.choosePlayerInfo.attach((text) => this.playerChooseInfoUpdate(text));\n\n\t\t// событие на отображение никнеймов игроков\n\t\tthis.gameModel.updatePlayersNames.attach((name1, name2) => this.playerNameUpdate(name1, name2));\n\n\t\t// событие на отображение моделек персонажей\n\t\tthis.gameModel.updatePlayersModels.attach((modelPlayer1, modelPlayer2) => this.playerModelsUpdate(modelPlayer1, modelPlayer2));\n\n\t\t// удаление сыгранной карты\n\t\tthis.boardModel.removeActionCard.attach((card) => this.deleteActionCard(card));\n\n\t\tthis.boardModel.createAnimation.attach((querySelector, amount) => this.createAnimation(querySelector, amount));\n\n\t\tthis.boardModel.endTurnAnimation.attach((side) => this.endTurnAnimation(side));\n\n\t\tthis.boardModel.notEnoughStamina.attach(() => this.notEnoughStamina());\n\t}\n\n\t// need for start render cards when page is loaded\n\tinit() {\n\t\tthis.onLoadCreate.notify();\n\t\tthis.checkRestoreGame();\n\t};\n\n\tdrawCards(card, place) {\n\t\tswitch (place) {\n\t\t\tcase 'board':\n\t\t\t\tthis.boardModel.decWrapper.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'hand':\n\t\t\t\tthis.boardModel.cardInHand.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t\tcase 'overlay':\n\t\t\t\tthis.boardModel.playersDeck.appendChild(card);\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.boardModel.cardsChooseCounter.textContent = '0';\n\n\t\tthis.boardModel.cardsChooseCounter.style = 'color: white';\n\t};\n\n\textraCardsToRemove(cards, place) {\n\n\t\tif (place == 'board' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.decWrapper.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'hand' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.cardInHand.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (place == 'overlay' && cards.length > 0) {\n\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\tthis.boardModel.playersDeck.removeChild(cards[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteActionCard(card) {\n\t\tthis.boardModel.cardInHand.removeChild(card);\n\t}\n\n\tcounterUpdate(info) {\n\t\tthis.boardModel.cardsChooseCounter.textContent = info.number;\n\n\t\tthis.boardModel.cardsChooseCounter.style = `color: ${info.color}`;\n\t};\n\n\tselectionEndUpdate() {\n\t\tthis.boardModel.decWrapper.style.display = 'none';\n\n\t\tthis.boardModel.battleField.classList.remove('hidden');\n\n\t\tthis.boardSelector.querySelector('.players-draw-info').style.display = 'none';\n\t}\n\n\tplayerChooseInfoUpdate(text) {\n\t\tthis.boardSelector.querySelector('.players-draw-info__name').textContent = text;\n\t}\n\n\tplayerNameUpdate(name1, name2) {\n\t\tthis.boardSelector.querySelector('.player-1__name').textContent = name1;\n\n\t\tthis.boardSelector.querySelector('.player-2__name').textContent = name2;\n\t}\n\n\tplayerModelsUpdate(modelPlayer1, modelPlayer2) {\n\t\tconst player1Model = this.boardSelector.querySelector('.player-1__model');\n\t\tconst player2Model = this.boardSelector.querySelector('.player-2__model');\n\n\t\tplayer1Model.type = 'image/svg+xml';\n\t\tplayer2Model.type = 'image/svg+xml';\n\n\t\tswitch (modelPlayer1) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer1Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer1Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer1Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\n\t\tswitch (modelPlayer2) {\n\t\t\tcase 'warrior':\n\t\t\t\tplayer2Model.data = 'images/models/viking.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'rogue':\n\t\t\t\tplayer2Model.data = 'images/models/rogue.svg';\n\n\t\t\t\tbreak;\n\t\t\tcase 'mage':\n\t\t\t\tplayer2Model.data = 'images/models/mage.svg';\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('models not found');\n\t\t}\n\t}\n\n\tdoConcede() {\n\t\tif(this.gameModel.playerOneTurn) {\n\t\t\tthis.onConcede.notify('player1');\n\t\t} else {\n\t\t\tthis.onConcede.notify('player2');\n\t\t}\n\t}\n\n\tcreateAnimation(querySelector, amount) {\n\t\tcreateCardAnim(querySelector, amount);\n\t}\n\n\tendTurnAnimation(side) {\n\t\tendTurnAnim(side);\n\t}\n\n\tshowMenu() {\n\t\tconst menuIcon = this.boardSelector.querySelector('.battle-field-nav__icon');\n\t\tconst menuList = this.boardSelector.querySelector('.battle-field-nav__list');\n\n\t\tif (menuIcon.classList.contains('fa-times-circle')) {\n\t\t\tmenuList.classList.add('hidden');\n\t\t\tmenuIcon.className = 'fas fa-bars battle-field-nav__icon';\n\t\t} else {\n\t\t\tmenuList.classList.remove('hidden');\n\t\t\tmenuIcon.className = 'far fa-times-circle battle-field-nav__icon';\n\t\t}\n\t}\n\n\tnavigateGame(eventTarget) {\n\t\tswitch (eventTarget.className.split(' ')[0]) {\n\t\t\tcase 'return-to-main-menu':\n\t\t\t\tdocument.title = 'Main menu';\n\t\t\t\tlocation.hash = decodeURIComponent('main-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'return-to-choose-menu':\n\t\t\t\tdocument.title = 'Choose menu';\n\t\t\t\tlocation.hash = decodeURIComponent('choose-menu');\n\n\t\t\t\tbreak;\n\t\t\tcase 'save-progress':\n\t\t\t\tthis.saveGameProgres.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'concede':\n\t\t\t\tthis.doConcede();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckRestoreGame() {\n\t\tconst hash = window.location.hash;\n\t\tconst state = decodeURIComponent(hash.substr(1));\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\n\t\tif (state === 'restoredGame') {\n\t\t\toverlay.classList.remove('hidden');\n\t\t\toverlay.classList.add('fade-in');\n\t\t\toverlayClose.classList.add('hidden');\n\n\t\t\tconst divEl = document.createElement('div');\n\n\t\t\tdivEl.className = 'confirm-continue';\n\t\t\tdivEl.textContent = 'Do you want to continue the last game?';\n\n\t\t\tconst choiceYes = document.createElement('button');\n\n\t\t\tchoiceYes.className = 'confirm-continue__accept';\n\t\t\tchoiceYes.textContent = 'Yes';\n\n\t\t\tconst choiceNo = document.createElement('button');\n\n\t\t\tchoiceNo.className = 'confirm-continue__reject';\n\t\t\tchoiceNo.textContent = 'No';\n\n\t\t\tdivEl.appendChild(choiceYes);\n\t\t\tdivEl.appendChild(choiceNo);\n\n\t\t\toverlay.appendChild(divEl);\n\n\t\t\tthis.boardSelector.querySelector('.confirm-continue').addEventListener('click', (event) => this.doContinueDecision(event.target));\n\t\t}\n\t}\n\n\tdoContinueDecision(eventTarget) {\n\t\tconst overlay = document.querySelector('.players-overlay');\n\t\tconst overlayClose = document.querySelector('.players-overlay__close');\n\t\tconst divEl = document.querySelector('.confirm-continue');\n\n\t\tswitch (eventTarget.className) {\n\t\t\tcase 'confirm-continue__reject':\n\t\t\t\toverlay.removeChild(divEl);\n\n\t\t\t\toverlay.classList.add('hidden');\n\t\t\t\toverlayClose.classList.remove('hidden');\n\n\t\t\t\tbreak;\n\t\t\tcase 'confirm-continue__accept':\n\t\t\t\tthis.onRestoreGameData.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tnotEnoughStamina() {\n\t\tthis.gameModel.a\n\t}\n\n}\n","export default class GameController {\n\tconstructor(model, view) {\n\t\tthis.gameModel = model;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onDefineCards')) {\n\t\t\tthis.boardView.onDefineCards.attach(() => this.defineCards());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('submitCardCheckChoose')) {\n\t\t\tthis.boardView.submitCardCheckChoose.attach(() => this.doCardCheckChoose());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('touchCardStart')) {\n\t\t\tthis.boardView.touchCardStart.attach((eventTarget) => this.actionCard(eventTarget));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSaveGameData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onRestoreGameData')) {\n\t\t\tthis.boardView.onRestoreGameData.attach(() => this.startRestoreData());\n\t\t}\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, запоминаем что выбрал в масси\n\tdefineCards() {\n\t\tthis.gameModel.definePlayersCardSet();\n\t}\n\n\t// событие на кнопку подтверждения выбора карт, проверяем оба игрока сделали выбор\n\tdoCardCheckChoose() {\n\t\tthis.gameModel.checkCardsSelectionEnd();\n\t}\n\n\tactionCard(eventTarget) {\n\t\tthis.gameModel.initActionCard(eventTarget);\n\t}\n\n\tdoEndTurn() {\n\t\tthis.gameModel.turnEndsNextPlayerTurn();\n\t}\n\n\tonSaveGameData() {\n\t\tthis.gameModel.saveGameData();\n\t}\n\n\tstartRestoreData() {\n\t\tthis.gameModel.doRestoreGameData()\n\t}\n}\n","import Events from './eventsModel';\nimport {playSoundEffect, createCardAnim, discardCardAnim} from '../animation_and_sound_effects/animation.js';\nimport {player1} from '../game';\n\nexport default class Players {\n\tconstructor(game, board) {\n\t\tthis.healthPoints = 100;\n\t\tthis.staminaPoints = 4;\n\t\tthis.defendPoints = 7;\n\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\n\t\tthis.playerViewUpdate = new Events();\n\t\tthis.cardDraw = new Events();\n\t\tthis.cardDiscard = new Events();\n\t\tthis.actionAnimation = new Events();\n\n\t\tthis.initialHP = 100;\n\t\tthis.initialDP = 7;\n\t}\n\n\tendTurn() {\n\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\tthis.gameModel.passivePlayer.staminaPoints = 4;\n\n\t\tthis.updateView();\n\t}\n\n\tupdateView(state) {\n\t\tif(state) {\n\t\t\tthis.playerViewUpdate.notify('concede');\n\t\t} else {\n\t\t\tthis.playerViewUpdate.notify();\n\t\t}\n\n\t};\n\n\tupdateInitialValues() {\n\t\tthis.initialHP = this.healthPoints;\n\t\tthis.initialDP = this.defendPoints;\n\t};\n\n\tdoAction() {\n\t\tif (this.gameModel.activePlayer.staminaPoints < this.gameModel.tempCard.cost) {\n\t\t\tplaySoundEffect('.card-grab-cancel-audio');\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.type) {\n\t\t\tcase 'attack':\n\t\t\t\tthis.standartAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackDrawDiscard':\n\t\t\t\tthis.attackDrawDiscard(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'attackAddEffect':\n\t\t\t\tthis.sideEffectAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend':\n\t\t\t\tthis.standartDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAddEffect':\n\t\t\t\tthis.sideEffectDefend(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendDrawDiscard':\n\t\t\t\tthis.defendDrawDiscard(this.gameModel.tempCard);\n\n\n\t\t\t\tbreak;\n\t\t\tcase 'defendAndAttack':\n\t\t\t\tthis.defendWithAttack(this.gameModel.tempCard);\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trandomCardDraw() {\n\t\tlet randomCardDraw = Math.floor(Math.random() * this.gameModel.playerOnePullOfCards.length);\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[randomCardDraw]);\n\t\t} else {\n\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[randomCardDraw]);\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\trandomCardDiscard() {\n\t\tlet randomDiscard = Math.floor(Math.random() * this.boardModel.cardInHand.children.length);\n\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(this.boardModel.cardInHand.children[randomDiscard]);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\tsetTimeout(() => this.cardDiscard.notify(this.boardModel.cardInHand.children[randomDiscard]), 300)\n\t\t}\n\t}\n\n\tcardRemove(element) {\n\t\t//it will be error if you use DaggerThrow as the last card in hand so w check on this\n\t\tif (this.boardModel.cardInHand.children.length > 0) {\n\t\t\tdiscardCardAnim(element);\n\n\t\t\tplaySoundEffect('.discard-card-audio');\n\n\t\t\t// setTimeout(() => this.cardDiscard.notify(element), 300)\n\t\t\tthis.cardDiscard.notify(element)\n\t\t}\n\t}\n\n\t// we take condition only for card \"expertise\"\n\tmassiveRandomDraw(card, condition) {\n\t\tlet tempIndex = [];\n\n\t\t//делаем проверку чтобы карты в руке не повторялись\n\t\tfor (let i = 0; i < card.effect - condition; i++) {                  // количество карт в руку\n\t\t\tlet n = Math.floor(Math.random() * 8);            // количество набранных карт\n\t\t\tif (tempIndex.indexOf(n) === -1) {\n\t\t\t\ttempIndex.push(n);\n\t\t\t} else {\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerOnePullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < tempIndex.length; i++) {\n\t\t\t\tthis.cardDraw.notify(this.gameModel.playerTwoPullOfCards[tempIndex[i]]);\n\t\t\t}\n\t\t}\n\n\t\tcreateCardAnim('.card-in-hand-field', 'single');\n\t}\n\n\tstandartAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectAttack(card) {\n\t\t// some of cards have special side effects, so we do additional if check\n\t\t// to make for them special methods\n\n\t\tif (card.name == 'riddleWithHoles') {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'judjment') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (sideEffect == undefined) {\n\t\t\t\tthis.actionAnimation.notify();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gameModel.passivePlayer.healthPoints = sideEffect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// some of cards havee common side effect so we can group it in one method\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - sideEffect;\n\n\t\t\t\tif (test < 0) {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\t\ttest = Math.abs(test);\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (sideEffect) {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= sideEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tattackDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tif (card.name == 'daggerThrow') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\t\t\tsetTimeout(() => this.randomCardDraw(), 800)\n\t\t}\n\n\t\tif (card.name == 'quickSlash') {\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tif (card.name == 'cutThroughFate') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.randomCardDraw(),600)\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tstandartDefend(card) {\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsideEffectDefend(card) {\n\t\tif (card.name == 'nirvana') {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints = sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'meditate') {\n\t\t\tlet test = this.gameModel.activePlayer.staminaPoints - card.cost + card.effect;\n\n\t\t\tif (test > 4) {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints = 4;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\t\t\t\tthis.gameModel.activePlayer.staminaPoints += card.effect;\n\t\t\t}\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.sideEffect) {\n\t\t\tlet sideEffect = card.sideEffect();\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\t\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\t\tthis.actionAnimation.notify();\n\t\t}\n\t};\n\n\tdefendWithAttack(card) {\n\t\tif (this.gameModel.passivePlayer.defendPoints) {\n\t\t\tlet test = this.gameModel.passivePlayer.defendPoints - card.effect;\n\n\t\t\tif (test < 0) {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = 0;\n\n\t\t\t\ttest = Math.abs(test);\n\t\t\t\tthis.gameModel.passivePlayer.healthPoints -= test;\n\t\t\t} else {\n\t\t\t\tthis.gameModel.passivePlayer.defendPoints = test;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gameModel.passivePlayer.healthPoints -= card.effect;\n\t\t}\n\n\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tdefendDrawDiscard(card) {\n\t\t// some of cards have special side effect, so we do additional if check\n\t\t// to make for them special methods\n\t\t// if (this.gameModel.activePlayer.staminaPoints < card.cost) {\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (card.name == 'prepared') {\n\t\t\tthis.randomCardDiscard();\n\t\t\tsetTimeout(() =>this.randomCardDraw(), 300)\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'warcry') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'survivor') {\n\t\t\tsetTimeout(() => this.randomCardDiscard(), 300)\n\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\t\t}\n\n\t\tif (card.name == 'bloodletting') {\n\t\t\tthis.randomCardDraw();\n\n\t\t\tthis.gameModel.activePlayer.healthPoints -= card.effect;\n\n\t\t\tthis.actionAnimation.notify();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (card.name == 'expertise') {\n\t\t\tthis.massiveRandomDraw(card, this.boardModel.cardInHand.children.length);\n\t\t}\n\n\t\tif (card.name == 'alpha') {\n\n\t\t\t// убираем лишние карты из руки\n\t\t\tfor (let i = 0; i < this.boardModel.cardInHand.children.length; i++) {\n\t\t\t\tif (this.boardModel.cardInHand.children[i].classList.contains('cards')) {\n\t\t\t\t\tthis.cardRemove(this.boardModel.cardInHand.children[i]);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.massiveRandomDraw(card, 0);\n\t\t}\n\n\t\tif (card.name == 'backFlip') {\n\t\t\tlet sideEffect = card.sideEffect();\n\t\t\tthis.gameModel.activePlayer.defendPoints += sideEffect;\n\n\t\t\tsetTimeout(() => this.massiveRandomDraw(card, 0), 300)\n\t\t}\n\n\t\tif (card.name == 'thirdEye') {\n\t\t\tthis.gameModel.activePlayer.defendPoints += card.effect;\n\n\t\t\tthis.randomCardDraw();\n\t\t}\n\n\t\tthis.gameModel.activePlayer.staminaPoints -= card.cost;\n\n\t\tthis.actionAnimation.notify();\n\t};\n\n\tsavePlayerData() {\n\t\treturn {\n\t\t\thealthPoints: this.healthPoints,\n\t\t\tstaminaPoints: this.staminaPoints,\n\t\t\tdefendPoints: this.defendPoints,\n\t\t\tinitialHP: this.initialHP,\n\t\t\tinitialDP: this.initialDP\n\t\t}\n\t}\n\n\tdoRestorePlayerData(player) {\n\t\tconst temp = localStorage.getItem('gameData');\n\t\tconst tempData = JSON.parse(temp);\n\n\t\tthis.healthPoints = tempData[player].healthPoints;\n\t\tthis.staminaPoints = tempData[player].staminaPoints;\n\t\tthis.defendPoints = tempData[player].defendPoints;\n\t\tthis.initialHP = tempData[player].initialHP;\n\t\tthis.initialDP = tempData[player].initialDP;\n\t}\n\n\tconcede() {\n\t\tthis.healthPoints = 0;\n\n\t\tthis.updateView('concede')\n\t}\n}\n","import {\n\tattackAnimation, attackAnimationEffect, blockAnimationEffect,\n\tplaySoundEffect, shakeAnimation, multipleAttackAnimation, standartAttackAnimation,\n\tultimateSkillAnimation, damageNumbersAnimation\n} from '../animation_and_sound_effects/animation';\nimport Events from './eventsModel';\n\nexport default class PlayersView {\n\tconstructor(playerOneModel, playerTwoModel, gameModel, container) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.gameModel = gameModel;\n\t\tconst playerContainer = container;\n\n\t\tthis.updateInitialValue = new Events();\n\n\t\tthis.playerOneHPValue = playerContainer.querySelector('.player-1__hp-value');\n\t\tthis.playerOneDefenceValue = playerContainer.querySelector('.player-1__defence-value');\n\t\tthis.playerOneStaminaValue = playerContainer.querySelector('.player-1__stamina-value');\n\t\tthis.playerOneHP = playerContainer.querySelector('.player-1__hp-bar-inner');\n\n\t\tthis.playerTwoHPValue = playerContainer.querySelector('.player-2__hp-value');\n\t\tthis.playerTwoDefenceValue = playerContainer.querySelector('.player-2__defence-value');\n\t\tthis.playerTwoStaminaValue = playerContainer.querySelector('.player-2__stamina-value');\n\t\tthis.playerTwoHP = playerContainer.querySelector('.player-2__hp-bar-inner');\n\n\t\tthis.playerOneModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\t\tthis.playerTwoModel.playerViewUpdate.attach((state) => {\n\t\t\tif(state) {\n\t\t\t\tthis.updateViewHP();\n\t\t\t} else {\n\t\t\t\tthis.updateViewStamina();\n\t\t\t}\n\t\t});\n\n\t\tthis.playerOneModel.actionAnimation.attach(() => this.doAnimation());\n\t\tthis.playerTwoModel.actionAnimation.attach(() => this.doAnimation());\n\n\t\tthis.gameModel.selectionEnd.attach(() => {\n\t\t\tthis.updateViewHP();\n\t\t\tthis.updateViewDef();\n\t\t\tthis.updateViewStamina();\n\t\t})\n\t}\n\n\t// устанавливаем первые параметры здоровье, защита, стамина\n\tupdateViewHP() {\n\t\tthis.playerOneHPValue.textContent = this.playerOneModel.healthPoints;\n\n\t\tthis.playerOneHP.style.width = this.playerOneModel.healthPoints + '%';\n\n\t\tthis.playerTwoHPValue.textContent = this.playerTwoModel.healthPoints;\n\n\t\tthis.playerTwoHP.style.width = this.playerTwoModel.healthPoints + '%';\n\t};\n\n\tupdateViewDef() {\n\t\tthis.playerOneDefenceValue.textContent = this.playerOneModel.defendPoints;\n\n\t\tthis.playerTwoDefenceValue.textContent = this.playerTwoModel.defendPoints;\n\n\t\tthis.playerOneDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerOneDefenceValue.classList.remove('defendValuePositive');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValueNegative');\n\t\tthis.playerTwoDefenceValue.classList.remove('defendValuePositive');\n\n\t\tif (this.playerOneModel.initialDP > this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerOneModel.initialDP < this.playerOneModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerOneDefenceValue.className = 'player-1__defence-value defendValuePositive', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP > this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValueNegative', 0);\n\t\t}\n\n\t\tif (this.playerTwoModel.initialDP < this.playerTwoModel.defendPoints) {\n\t\t\tsetTimeout(() => this.playerTwoDefenceValue.className = 'player-2__defence-value defendValuePositive', 0);\n\t\t}\n\t};\n\n\tupdateViewStamina() {\n\t\tthis.playerOneStaminaValue.textContent = this.playerOneModel.staminaPoints;\n\n\t\tthis.playerTwoStaminaValue.textContent = this.playerTwoModel.staminaPoints;\n\t};\n\n\tupdateDamageNumbers(passivePlayerUI) {\n\t\tlet calcDP = this.gameModel.passivePlayer.initialDP - this.gameModel.passivePlayer.defendPoints;\n\t\tconst calcHP = this.gameModel.passivePlayer.initialHP - this.gameModel.passivePlayer.healthPoints;\n\n\t\tif (calcDP <= 0) {\n\t\t\tcalcDP = 0;\n\t\t}\n\t\tconst resultContent = calcHP + calcDP;\n\n\t\tdamageNumbersAnimation(passivePlayerUI, 'damageNumberAnimate', resultContent);\n\t};\n\n\tdoAnimation() {\n\t\tlet activePlayerUI;\n\t\tlet passivePlayerUI;\n\t\tlet direction;\n\n\t\tif (this.gameModel.playerOneTurn) {\n\t\t\tactivePlayerUI = '.player-1__model';\n\t\t\tpassivePlayerUI = '.player-2__model';\n\t\t\tdirection = 'right';\n\t\t} else {\n\t\t\tactivePlayerUI = '.player-2__model';\n\t\t\tpassivePlayerUI = '.player-1__model';\n\t\t\tdirection = 'left';\n\t\t}\n\n\t\tswitch (this.gameModel.tempCard.name) {\n\t\t\tcase 'strike_w':\n\t\t\tcase 'bash':\n\t\t\tcase 'strike_r':\n\t\t\tcase 'quickSlash':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\tattackAnimation(passivePlayerUI, 'attack', './images/attack-effects/warrior-attack.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.strike-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'defend_w':\n\t\t\tcase 'armaments':\n\t\t\tcase 'entrench':\n\t\t\tcase 'deflect':\n\t\t\tcase 'backFlip':\n\t\t\tcase 'defend_m':\n\t\t\tcase 'nirvana':\n\t\t\tcase 'masterReality':\n\t\t\tcase 'thirdEye':\n\t\t\tcase 'survivor':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', './images/icons/Icon_Block.png');\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bodySlam':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', './images/attack-effects/smash.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'slice':\n\t\t\tcase 'strike_m':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', './images/attack-effects/smash.png');\n\n\t\t\t\tplaySoundEffect('.mage-punch-audio');\n\n\t\t\t\tshakeAnimation(passivePlayerUI);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'daggerThrow':\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tattackAnimation(passivePlayerUI, 'smashAttack', './images/attack-effects/smash.png');\n\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'anger':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', './images/attack-effects/anger.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.anger-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'reachHeaven':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', './images/attack-effects/reach-heaven.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-strong-audio');\n\t\t\t\t}, 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'ironWave':\n\t\t\tcase 'dash':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', './images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', './images/attack-effects/anger.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bash-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateViewStamina();\n\t\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'bloodletting':\n\t\t\t\tstandartAttackAnimation(activePlayerUI, 'shield', './images/attack-effects/bloodletting.png');\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tshakeAnimation(activePlayerUI);\n\t\t\t\t\tplaySoundEffect('.bloodletting-audio');\n\t\t\t\t}, 200);\n\n\n\t\t\t\tthis.updateViewHP();\n\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'warcry':\n\t\t\t\tshakeAnimation(activePlayerUI);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'meditate':\n\t\t\tcase 'alpha':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', './images/attack-effects/refresh-stamina.svg');\n\n\t\t\t\tplaySoundEffect('.meditate-audio');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'cutThroughFate':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'shield', './images/icons/Icon_Block.png');\n\n\t\t\t\tplaySoundEffect('.defend-audio');\n\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\t\t\t\t\tstandartAttackAnimation(passivePlayerUI, 'angerAttack', './images/attack-effects/mageEffect.png');\n\t\t\t\t\tshakeAnimation(passivePlayerUI);\n\t\t\t\t\tplaySoundEffect('.mage-attack-audio');\n\n\t\t\t\t\tthis.updateViewHP();\n\t\t\t\t\tthis.updateViewDef();\n\t\t\t\t\tthis.updateInitialValue.notify();\n\t\t\t\t}, 400);\n\n\t\t\t\tbreak;\n\t\t\tcase 'perfectedStrike':\n\t\t\tcase 'tantrum':\n\t\t\tcase 'flechettes':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tmultipleAttackAnimation(passivePlayerUI, 'attack', './images/attack-effects/warrior-attack.png', 3);\n\n\t\t\t\tsetTimeout(() => shakeAnimation(passivePlayerUI), 200);\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'expertise':\n\t\t\t\tblockAnimationEffect(activePlayerUI, 'expertice', './images/attack-effects/serpent_ring.png');\n\n\t\t\t\tthis.updateViewStamina();\n\n\t\t\t\tbreak;\n\t\t\tcase 'bludgeon':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tplaySoundEffect('.warcry-audio');\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'warriorUltimate', './images/attack-effects/flash.png', '.flash-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'riddleWithHoles':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', './images/attack-effects/daggers.svg', '.backstab-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'signatureMove':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'mageUltimate', './images/attack-effects/mage-attack.png', '.mage-ultimate-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t\tcase 'judjment':\n\t\t\t\tattackAnimationEffect(activePlayerUI, direction);\n\n\t\t\t\tultimateSkillAnimation(passivePlayerUI, 'rogueUltimate', './images/attack-effects/judjment.svg', '.judj-audio');\n\n\t\t\t\tthis.updateViewHP();\n\t\t\t\tthis.updateViewDef();\n\t\t\t\tthis.updateViewStamina();\n\t\t\t\tthis.updateDamageNumbers(passivePlayerUI);\n\t\t\t\tthis.updateInitialValue.notify();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import {player1, player2} from '../game';\n\nexport default class PlayersController {\n\tconstructor(playerOneModel, playerTwoModel, boardView, playerView) {\n\t\tthis.playerOneModel = playerOneModel;\n\t\tthis.playerTwoModel = playerTwoModel;\n\t\tthis.boardView = boardView;\n\t\tthis.playersView = playerView;\n\n\t\tif (this.boardView.hasOwnProperty('doCardAction')) {\n\t\t\tthis.boardView.doCardAction.attach((priority) => this.playCard(priority));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.doEndTurn());\n\t\t}\n\n\t\tif (this.playersView.hasOwnProperty('updateInitialValue')) {\n\t\t\tthis.playersView.updateInitialValue.attach(() => this.updateInitialValue());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('saveGameProgres')) {\n\t\t\tthis.boardView.saveGameProgres.attach(() => this.onSavePlayerData());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onConcede')) {\n\t\t\tthis.boardView.onConcede.attach((player) => this.doConcede(player));\n\t\t}\n\t}\n\n\tplayCard(priority) {\n\t\tif (priority) {\n\t\t\tthis.playerOneModel.doAction();\n\t\t} else {\n\t\t\tthis.playerTwoModel.doAction();\n\t\t}\n\t}\n\n\tdoEndTurn() {\n\t\tthis.playerOneModel.endTurn();\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tupdateInitialValue() {\n\t\tthis.playerOneModel.updateInitialValues();\n\t\tthis.playerTwoModel.updateInitialValues();\n\t}\n\n\tonSavePlayerData() {\n\t\tthis.playerOneModel.savePlayerData();\n\t\tthis.playerTwoModel.savePlayerData();\n\t}\n\n\tdoConcede(player) {\n\t\tif (player === 'player1') {\n\t\t\tplayer1.concede();\n\t\t} else {\n\t\t\tplayer2.concede();\n\t\t}\n\t}\n}\n","import {switchPlayPause} from '../animation_and_sound_effects/animation.js';\n\nexport default class BoardController {\n\tconstructor(game, board, playerModel1, playerModel2, view) {\n\t\tthis.gameModel = game;\n\t\tthis.boardModel = board;\n\t\tthis.player1 = playerModel1;\n\t\tthis.player2 = playerModel2;\n\t\tthis.boardView = view;\n\n\t\tif (this.boardView.hasOwnProperty('onLoadCreate')) {\n\t\t\tthis.boardView.onLoadCreate.attach((card, place) => this.createCard(card, place));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('onAnimCards')) {\n\t\t\tthis.boardView.onAnimCards.attach((event) => this.cardAnimBoard(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('cardInHandChoosen')) {\n\t\t\tthis.boardView.cardInHandChoosen.attach((event, state) => this.cardAnimHand(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardStart')) {\n\t\t\tthis.boardView.grabCardStart.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('grabCardEnd')) {\n\t\t\tthis.boardView.grabCardEnd.attach((event, state) => this.grabedCardAnim(event, state));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('preventDrag')) {\n\t\t\tthis.boardView.preventDrag.attach((event) => this.preventDrag(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('dropEvent')) {\n\t\t\tthis.boardView.dropEvent.attach(() => this.deleteActionCard());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('endTurn')) {\n\t\t\tthis.boardView.endTurn.attach(() => this.createCardsInHand());\n\t\t\tthis.boardView.endTurn.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.showPlayersDeck(event));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('showPlayerDeck')) {\n\t\t\tthis.boardView.showPlayerDeck.attach((event) => this.closePlayersDeck(event));\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionContinue')) {\n\t\t\tthis.gameModel.selectionContinue.attach(() => this.createCard());\n\t\t}\n\n\t\tif (this.gameModel.hasOwnProperty('selectionEnd')) {\n\t\t\tthis.gameModel.selectionEnd.attach((restoredCards) => this.createCardsInHand(restoredCards));\n\t\t\tthis.gameModel.selectionEnd.attach(() => this.setPlayersTurnInfo());\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player1.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDraw')) {\n\t\t\tthis.player2.cardDraw.attach((card) => this.addCardInHand(card));\n\t\t}\n\n\t\tif (this.player1.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player1.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.player2.hasOwnProperty('cardDiscard')) {\n\t\t\tthis.player2.cardDiscard.attach((card) => this.deleteRandomCard(card));\n\t\t}\n\n\t\tif (this.boardView.hasOwnProperty('soundOffOn')) {\n\t\t\tthis.boardView.soundOffOn.attach(() => this.turnOnOfSound());\n\t\t}\n\t}\n\n\tcreateCard() {\n\t\tthis.boardModel.createCardsForChoose(this.gameModel);\n\t}\n\n\tcardAnimBoard(event) {\n\t\tthis.boardModel.cardChooseAnim(event);\n\t}\n\n\tcardAnimHand(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandAdd(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.cardChooseAnimInHandRemove(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateCardsInHand(restoredCards) {\n\t\tif(restoredCards) {\n\t\t\trestoredCards.forEach(element => this.boardModel.createCards(element, 'hand', true));\n\n\t\t\tthis.boardModel.createAnimation.notify('.card-in-hand-field', 'multiple');\n\t\t} else {\n\t\t\tthis.boardModel.pullRandomCardsInHand();\n\t\t}\n\t}\n\n\tgrabedCardAnim(event, state) {\n\t\tswitch (state) {\n\t\t\tcase 'focus':\n\t\t\t\tthis.boardModel.dragCardStart(event);\n\t\t\t\tbreak;\n\t\t\tcase 'blur':\n\t\t\t\tthis.boardModel.dragCardEnd(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpreventDrag(event) {\n\t\tthis.boardModel.dragPreventAction(event);\n\t}\n\n\tdeleteActionCard() {\n\t\tthis.boardModel.deletePlayedCard('playedCard');\n\t}\n\n\tdeleteRandomCard(card) {\n\t\tthis.boardModel.deletePlayedCard('randomCard', card);\n\t}\n\n\taddCardInHand(card) {\n\t\tthis.boardModel.createCards(card, 'hand', true);\n\t}\n\n\tshowPlayersDeck(eventTarget) {\n\t\tthis.boardModel.showCardsForPlayers(eventTarget);\n\t}\n\n\tclosePlayersDeck(event) {\n\t\tif (event == this.boardModel.showDeckPlayer1 || event == this.boardModel.showDeckPlayer2) {\n\t\t\tthis.boardModel.openCloseOverlay('open');\n\t\t}\n\t\tif (event == this.boardModel.playersDeckClose) {\n\t\t\tthis.boardModel.openCloseOverlay('close');\n\t\t}\n\t}\n\n\tsetPlayersTurnInfo() {\n\t\tthis.boardModel.showWhichTurn();\n\t}\n\n\tturnOnOfSound() {\n\t\tswitchPlayPause();\n\t}\n}\n","import {boardModel} from '../game';\nimport {gameObserver} from '../game';\nimport {playSoundEffect} from '../animation_and_sound_effects/animation';\nimport {boardView} from '../game';\n\nconst player1HPstatus = document.querySelector('.player-1__hp');\nconst player2HPstatus = document.querySelector('.player-2__hp');\nconst battleground = document.querySelector('.battle-field');\n\nfunction endGame(mutations) {\n\tif (mutations[0]['target'].classList.contains('player-1__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerTwoName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n\n\tif (mutations[0]['target'].classList.contains('player-2__hp-value') && mutations[0].target.childNodes[0].data <= 0) {\n\t\tdocument.querySelector('.players-action').textContent = `${gameObserver.playersInfo.playerOneName} is a winner`;\n\n\t\tboardModel.cardInHand.classList.add('hidden');\n\n\t\tplaySoundEffect('.victory-audio');\n\n\t\tlocalStorage.removeItem('gameData');\n\t}\n}\n\nfunction allowSaveConcede() {\n\tdocument.querySelector('.save-progress').removeEventListener('click',  boardView.forbidClick);\n\tdocument.querySelector('.concede').removeEventListener('click',  boardView.forbidClick);\n\n\tdocument.querySelector('.save-progress').classList.add('save-progress-allow');\n\tdocument.querySelector('.concede').classList.add('concede-allow');\n}\n\nexport {player1HPstatus, player2HPstatus, endGame, battleground, allowSaveConcede}","import Game from './modules/gameModel';\nimport Board from './modules/boardModel';\nimport BoardView from './modules/boardView';\nimport GameController from './modules/gameController';\nimport Players from './modules/playerModel';\nimport PlayersView from './modules/playerView';\nimport PlayersController from './modules/playerController';\nimport BoardController from './modules/boardController';\nimport {allowSaveConcede, battleground, endGame, player1HPstatus, player2HPstatus} from './modules/observerModel';\n\nexport const gameObserver = new Game();\n\nexport const boardModel = new Board(gameObserver);\n\nexport const boardView = new BoardView(boardModel, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst gameController = new GameController(gameObserver, boardView);\n\nexport const player1 = new Players(gameObserver, boardModel);\n\nexport const player2 = new Players(gameObserver, boardModel);\n\nconst playersView = new PlayersView(player1, player2, gameObserver, document.querySelector('.wrapper-battle'));\n\nconst playersController = new PlayersController(player1, player2, boardView, playersView);\n\nconst boardController = new BoardController(gameObserver, boardModel, player1, player2, boardView);\n\nconst winConditionObserver = new MutationObserver(endGame);\n\nconst saveConcedeConditionObserver = new MutationObserver(allowSaveConcede);\n\ngameObserver.start();\n\nboardView.init();\n\nwinConditionObserver.observe(player1HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nwinConditionObserver.observe(player2HPstatus, {\n\tchildList: true,\n\tsubtree: true,\n\tcharacterData: true\n});\n\nsaveConcedeConditionObserver.observe(battleground, {\n\tattributes: true\n});\n"],"sourceRoot":""}
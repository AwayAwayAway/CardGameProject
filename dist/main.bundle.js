!function(){"use strict";var e={d:function(a,t){for(var n in t)e.o(t,n)&&!e.o(a,n)&&Object.defineProperty(a,n,{enumerable:!0,get:t[n]})},o:function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}};function a(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.d({},{_g:function(){return Y},EG:function(){return X},oY:function(){return K},Tb:function(){return z},lK:function(){return J}});var t=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners=[]}var t,n;return t=e,(n=[{key:"attach",value:function(e){this.listeners.push(e)}},{key:"notify",value:function(e,a){var t=this;this.listeners.forEach((function(n,r){t.listeners[r](e,a)}))}}])&&a(t.prototype,n),e}(),n=function e(a,t,n,r,i,o,s){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=a,this.cost=n,this.type=t,this.effect=r,this.icon=i,this.name=o,this.sideEffect=s};function r(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=new(function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.skillCollectionLinks={warrior:{strike_w:"./images/cards/warrior/strike.png",bash:"./images/cards/warrior/bash.png",anger:"./images/cards/warrior/anger.png",bodySlam:"./images/cards/warrior/bodySlam.png",perfectedStrike:"./images/cards/warrior/perfectedStrike.png",bludgeon:"./images/cards/warrior/bludgeon.png",defend_w:"./images/cards/warrior/defend_w.png",armaments:"./images/cards/warrior/armaments.png",ironWave:"./images/cards/warrior/ironWave.png",warcry:"./images/cards/warrior/warcry.png",bloodletting:"./images/cards/warrior/bloodletting.png",entrench:"./images/cards/warrior/entrench.png"},rogue:{strike_r:"./images/cards/rogue/strike_G.png",daggerThrow:"./images/cards/rogue/r_dagger-throw.png",flechettes:"./images/cards/rogue/flechettes.png",riddleWithHoles:"./images/cards/rogue/riddleWithHoles.png",slice:"./images/cards/rogue/slice.png",quickSlash:"./images/cards/rogue/quickSlash.png",survivor:"./images/cards/rogue/survivor.png",deflect:"./images/cards/rogue/deflect.png",backFlip:"./images/cards/rogue/backflip.png",prepared:"./images/cards/rogue/prepared.png",expertise:"./images/cards/rogue/expertise.png",dash:"./images/cards/rogue/dash.png"},mage:{strike_m:"./images/cards/mage/strike_P.png",cutThroughFate:"./images/cards/mage/cutThroughFate.png",reachHeaven:"./images/cards/mage/reachHeaven.png",signatureMove:"./images/cards/mage/signatureMove.png",tantrum:"./images/cards/mage/tantrum.png",judgment:"./images/cards/mage/judgment.png",masterReality:"./images/cards/mage/masterReality.png",defend_m:"./images/cards/mage/defend_P.png",meditate:"./images/cards/mage/meditate.png",thirdEye:"./images/cards/mage/thirdEye.png",nirvana:"./images/cards/mage/nirvana.png",alpha:"./images/cards/mage/alpha.png"}},this.animationCollectionLinks={anger:"./images/attack-effects/anger.png",bloodletting:"./images/attack-effects/bloodletting.png",daggersSvg:"./images/attack-effects/daggers.svg",flash:"./images/attack-effects/flash.png",judgmentSvg:"./images/attack-effects/judgment.svg",mageAttack:"./images/attack-effects/mage-attack.png",mageEffect:"./images/attack-effects/mage-effect.png",reachHeaven:"./images/attack-effects/reach-heaven.png",refreshStamina:"./images/attack-effects/refresh-stamina.svg",serpentRing:"./images/attack-effects/serpent-ring.png",smash:"./images/attack-effects/smash.png",warriorAttack:"./images/attack-effects/warrior-attack.png",warriorSmash:"./images/attack-effects/warrior-smash.png",defend:"./images/icons/icon_Block.png"},this.audioCollectionLinks={anger:"./sounds/anger.ogg",backStab:"./sounds/backstab.ogg",bashAttack:"./sounds/bash-attack.ogg",battleMainTheme:"./sounds/battle-main-theme.ogg",bloodletting:"./sounds/bloodletting.ogg",btnClick:"./sounds/btn-click.ogg",btnHover:"./sounds/btn-hover.ogg",cardRelease:"./sounds/card-grab-cancel.ogg",cardGrab:"./sounds/card-grabbed.ogg",cardSelected:"./sounds/card-selected.ogg",confirmSucces:"./sounds/confirm.ogg",confirmFailed:"./sounds/confirm-failed.ogg",defend:"./sounds/defend.ogg",discardCard:"./sounds/discard-card.ogg",endTurn:"./sounds/end-turn.ogg",expertise:"./sounds/expertice.ogg",flash:"./sounds/flash.ogg",ironWave:"./sounds/ironwave.ogg",judj:"./sounds/judj.ogg",mageAttack:"./sounds/mage-attack.ogg",magePunch:"./sounds/mage-punch.ogg",mageSelected:"./sounds/mage-selected.ogg",mageStrong:"./sounds/mage-strong.ogg",mageUltimate:"./sounds/mage-ultimate.ogg",mainMenuTheme:"./sounds/main-menu-theme.ogg",meditate:"./sounds/meditate.ogg",overlayClose:"./sounds/overlay-close.ogg",overlayOpen:"./sounds/overlay-open.ogg",pushCard:"./sounds/push-card.ogg",rogueAttack:"./sounds/rogue-attack.ogg",rogueSelected:"./sounds/rogue-selected.ogg",strikeAttack:"./sounds/strike-attack.ogg",victory:"./sounds/victory.ogg",warcry:"./sounds/warcry.ogg",warriorSelected:"./sounds/warrior-selected.ogg"},this.cards=null,this.animation=null,this.audio=null,this.init()}var a,t;return a=e,(t=[{key:"init",value:function(){this.cards={warrior:this.preloadSkillImages(this.skillCollectionLinks.warrior),rogue:this.preloadSkillImages(this.skillCollectionLinks.rogue),mage:this.preloadSkillImages(this.skillCollectionLinks.mage)},this.animation=this.preloadSkillImages(this.animationCollectionLinks),this.audio=this.preloadAudio(this.audioCollectionLinks)}},{key:"preloadSkillImages",value:function(e){var a={};for(var t in e)if(/(svg)$/gi.test(t)){var n=document.createElement("object");n.data=e[t],a[t]=n}else{var r=new Image;r.src=e[t],a[t]=r}return a}},{key:"preloadAudio",value:function(e){var a={};for(var t in e){var n=new Audio;n.src=e[t],a[t]=n}return a}}])&&r(a.prototype,t),e}()),o={warrior:[new n(0,"attack",1,6,i.cards.warrior.strike_w,"strike_w"),new n(1,"attack",1,8,i.cards.warrior.bash,"bash"),new n(2,"attackAddEffect",1,6,i.cards.warrior.anger,"anger",(function(){return K.activePlayer.healthPoints<40?13:6})),new n(3,"attackAddEffect",2,0,i.cards.warrior.bodySlam,"bodySlam",(function(){return K.activePlayer.defendPoints>0?K.activePlayer.defendPoints:0})),new n(4,"attackAddEffect",1,6,i.cards.warrior.perfectedStrike,"perfectedStrike",(function(){return 6+Y.cardInHand.children.length})),new n(5,"attackAddEffect",3,12,i.cards.warrior.bludgeon,"bludgeon",(function(){return K.passivePlayer.healthPoints>50?17:12})),new n(6,"defend",1,5,i.cards.warrior.defend_w,"defend_w"),new n(7,"defendAddEffect",1,5,i.cards.warrior.armaments,"armaments",(function(){return 0===K.activePlayer.defendPoints?7:5})),new n(8,"defendAndAttack",1,5,i.cards.warrior.ironWave,"ironWave",(function(){return 5})),new n(9,"defendDrawDiscard",0,1,i.cards.warrior.warcry,"warcry"),new n(10,"defendDrawDiscard",0,3,i.cards.warrior.bloodletting,"bloodletting"),new n(11,"defendAddEffect",2,2,i.cards.warrior.entrench,"entrench",(function(){return 2*K.activePlayer.defendPoints-K.activePlayer.defendPoints}))],rogue:[new n(0,"attack",1,6,i.cards.rogue.strike_r,"strike_r"),new n(1,"attackDrawDiscard",1,9,i.cards.rogue.daggerThrow,"daggerThrow"),new n(2,"attackAddEffect",1,3,i.cards.rogue.flechettes,"flechettes",(function(){return 3*Y.cardInHand.children.length})),new n(3,"attackAddEffect",2,7,i.cards.rogue.riddleWithHoles,"riddleWithHoles"),new n(4,"attack",0,4,i.cards.rogue.slice,"slice"),new n(5,"attackDrawDiscard",1,7,i.cards.rogue.quickSlash,"quickSlash"),new n(6,"defendDrawDiscard",1,8,i.cards.rogue.survivor,"survivor"),new n(7,"defend",0,4,i.cards.rogue.deflect,"deflect"),new n(8,"defendDrawDiscard",1,1,i.cards.rogue.backFlip,"backFlip",(function(){return 5})),new n(9,"defendDrawDiscard",0,1,i.cards.rogue.prepared,"prepared"),new n(10,"defendDrawDiscard",1,5,i.cards.rogue.expertise,"expertise"),new n(11,"defendAndAttack",2,10,i.cards.rogue.dash,"dash",(function(){return 8}))],mage:[new n(0,"attack",1,6,i.cards.mage.strike_m,"strike_m"),new n(1,"attackDrawDiscard",1,7,i.cards.mage.cutThroughFate,"cutThroughFate",(function(){return 2})),new n(2,"attack",2,12,i.cards.mage.reachHeaven,"reachHeaven"),new n(3,"attackAddEffect",2,0,i.cards.mage.signatureMove,"signatureMove",(function(){return K.passivePlayer.defendPoints})),new n(4,"attackAddEffect",1,3,i.cards.mage.tantrum,"tantrum",(function(){return 3+(Math.floor(5*Math.random())+1)})),new n(5,"attackAddEffect",2,0,i.cards.mage.judgment,"judgment",(function(){var e;return K.passivePlayer.healthPoints<=15&&(e=0),e})),new n(6,"defendAddEffect",1,5,i.cards.mage.masterReality,"masterReality",(function(){return 0==K.activePlayer.defendPoints?10:5})),new n(7,"defend",1,5,i.cards.mage.defend_m,"defend_m"),new n(8,"defendAddEffect",1,3,i.cards.mage.meditate,"meditate"),new n(9,"defendDrawDiscard",1,7,i.cards.mage.thirdEye,"thirdEye"),new n(10,"defendAddEffect",1,0,i.cards.mage.nirvana,"nirvana",(function(){return K.passivePlayer.defendPoints})),new n(11,"defendDrawDiscard",1,4,i.cards.mage.alpha,"alpha")]};function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return d(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}var l=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal",t=document.querySelector(e);switch(a){case"horizontal":t.classList.remove("shake-x"),setTimeout((function(){return t.classList.add("shake-x")}),0),setTimeout((function(){return t.classList.remove("shake-x")}),400);break;case"vertical":t.classList.remove("shake-y"),setTimeout((function(){return t.classList.add("shake-y")}),0),setTimeout((function(){return t.classList.remove("shake-y")}),400);break;case"mix":t.classList.remove("shake-mix"),setTimeout((function(){return t.classList.add("shake-mix")}),0),setTimeout((function(){return t.classList.remove("shake-mix")}),400)}},c=function(e,a){var t=document.querySelector(e);switch(a){case"single":for(var n=0;n<s(t.children).length;n++)t.children[n].classList.contains("card-draw-animation")||(t.children[n].classList.add("card-draw-animation"),g(i.audio.pushCard));break;case"multiple":s(t.children).forEach((function(e,a){return setTimeout((function(){e.classList.add("card-draw-animation"),g(i.audio.pushCard)}),250*a)}));break;case"overlay":s(t.children).forEach((function(e){return e.classList.add("card-draw-animation")}))}},u=function(e){e.classList.add("card-discard-animation")},h=function(e,a){var t=document.querySelector(e);switch(a){case"right":t.classList.add("attack-right-animation"),setTimeout((function(){return t.classList.remove("attack-right-animation")}),1e3);break;case"left":t.classList.add("attack-left-animation"),setTimeout((function(){return t.classList.remove("attack-left-animation")}),1e3)}},f=function(e,a,t){var n=document.querySelector(".".concat(a));n&&n.parentElement.removeChild(n);var r=document.querySelector(e).parentElement,i=t;i.className=a,r.appendChild(i)},m=function(e,a,t){var n=document.querySelector(e).parentElement,r=t;r.style.transform="rotate(".concat(Math.floor(359*Math.random()+1),"deg)"),r.className=a,n.appendChild(r),window.navigator.vibrate([400]),setTimeout((function(){return n.removeChild(r)}),600)},y=function(e,a,t){var n=document.querySelector(e).parentElement,r=t;r.className=a,n.appendChild(r),window.navigator.vibrate([400]),setTimeout((function(){return n.removeChild(r)}),400)},p=function(e,a,t,n){var r=document.querySelector(e).parentElement,i=document.querySelector(".players-overlay"),o=document.querySelector(".players-overlay__close"),s=t;s.className=a,i.classList.remove("hidden"),i.classList.add("fade-in-animation"),o.classList.add("hidden"),setTimeout((function(){r.appendChild(s),window.navigator.vibrate(800),l(e),g(n)}),200),setTimeout((function(){r.removeChild(s),i.classList.add("fade-out-animation")}),1250),setTimeout((function(){i.classList.add("hidden"),i.classList.remove("fade-in-animation"),i.classList.remove("fade-out-animation"),o.classList.remove("hidden")}),1850)},g=function(e){var a=e;a&&(a.currentTime=0,a.play())},v=function(e){var a,t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div");"player1"===e?(a=document.querySelector(".player-1__model").parentElement,t.className="not-enough-stamina-player-1 fade-in-animation",n.className="not-enough-stamina-player-1__first-bubble",r.className="not-enough-stamina-player-1__second-bubble",i.className="not-enough-stamina-player-1__third-bubble"):(a=document.querySelector(".player-2__model").parentElement,t.className="not-enough-stamina-player-2 fade-in-animation",n.className="not-enough-stamina-player-2__first-bubble",r.className="not-enough-stamina-player-2__second-bubble",i.className="not-enough-stamina-player-2__third-bubble"),i.innerHTML='Not enough <span style = "color: brown;"> Energy</span>',t.appendChild(n),t.appendChild(r),t.appendChild(i),a.appendChild(t),setTimeout((function(){return t.classList.add("fade-out-animation")}),1500),setTimeout((function(){return a.removeChild(t)}),2e3)};function C(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function w(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.activePlayer=null,this.passivePlayer=null,this.playerOneTurn=!0,this.playerTwoTurn=!1,this.playerOneClass=null,this.playerTwoClass=null,this.playerOnePullOfCards=[],this.playerTwoPullOfCards=[],this.restoredGameData=null,this.playersInfo={},this.dragCard=null,this.tempCard=null,this.onSelectionEnd=new t,this.onSelectionContinue=new t,this.onChangePlayerInfo=new t,this.onUpdatePlayersNames=new t,this.onUpdatePlayersModels=new t,this.onEndTurnAnimation=new t,this.onGameStart=new t,this.onRestoredGameFailed=new t,this.onSaveGameData=new t}var a,n;return a=e,(n=[{key:"start",value:function(){"restoredGame"===window.location.hash.substr(1)?this.readGameDataFromServer():this.init()}},{key:"init",value:function(){this.onGameStart.notify(),this.setPlayersChoiceInfo("playersInfo"),this.setPlayersClasses(),this.setPlayersNames(),this.setPlayersModels(),this.setTextChooseInfo(),this.setActivePassivePlayer()}},{key:"setPlayersChoiceInfo",value:function(e){var a=localStorage.getItem(e);this.playersInfo=JSON.parse(a)}},{key:"setPlayersClasses",value:function(){this.playerOneClass=this.playersInfo.playerOneClass,this.playerTwoClass=this.playersInfo.playerTwoClass}},{key:"setPlayersNames",value:function(){this.onUpdatePlayersNames.notify(this.playersInfo.playerOneName,this.playersInfo.playerTwoName)}},{key:"setPlayersModels",value:function(){this.onUpdatePlayersModels.notify(this.playersInfo.playerOneClass,this.playersInfo.playerTwoClass)}},{key:"setTextChooseInfo",value:function(){this.playerOneTurn?this.onChangePlayerInfo.notify("".concat(this.playersInfo.playerOneName," is choosing")):this.onChangePlayerInfo.notify("".concat(this.playersInfo.playerTwoName," is choosing"))}},{key:"setTextTurnInfo",value:function(){this.playerOneTurn?this.onEndTurnAnimation.notify("left","".concat(this.playersInfo.playerOneName,"'s Turn")):this.onEndTurnAnimation.notify("right","".concat(this.playersInfo.playerTwoName,"'s Turn"))}},{key:"setActivePassivePlayer",value:function(){this.playerOneTurn?(this.activePlayer=z,this.passivePlayer=J):(this.activePlayer=J,this.passivePlayer=z)}},{key:"definePlayersCardSet",value:function(){var e=document.getElementsByClassName("card-to-select").length;if(e<8||e>=9)return g(i.audio.confirmFailed),void l(".players-draw-info__accept","horizontal");this.pushCardsIntoCollection(),this.setTurnPriority(),this.checkCardsSelectionEnd()}},{key:"pushCardsIntoCollection",value:function(){var e=document.querySelectorAll(".cards"),a=[];if(this.playerOneTurn){for(var t=0;t<e.length;t++)e[t].classList.contains("card-to-select")&&a.push(e[t].dataset.info);this.playerOnePullOfCards=this.checkOnSelectedCards(a,this.playerOneClass)}else{for(var n=0;n<e.length;n++)e[n].classList.contains("card-to-select")&&a.push(e[n].dataset.info);this.playerTwoPullOfCards=this.checkOnSelectedCards(a,this.playerTwoClass)}g(i.audio.confirmSucces)}},{key:"checkOnSelectedCards",value:function(e,a){for(var t=[],n=0;n<o[a].length;n++)for(var r=0;r<e.length;r++)o[a][n].id==e[r]&&t.push(o[a][n]);return t}},{key:"checkCardsSelectionEnd",value:function(){var e=document.getElementsByClassName("card-to-select").length;e<8||e>=9||(this.playerOnePullOfCards.length>1&&this.playerTwoPullOfCards.length>1?(this.onSelectionEnd.notify(),this.setTextTurnInfo()):(this.onSelectionContinue.notify(),this.setTextChooseInfo()))}},{key:"initActionCard",value:function(e){var a=this;this.dragCard=e,this.playerOneTurn?this.tempCard=this.playerOnePullOfCards.find((function(e){return e.id==a.dragCard.dataset.info})):this.tempCard=this.playerTwoPullOfCards.find((function(e){return e.id==a.dragCard.dataset.info}))}},{key:"setTurnPriority",value:function(){this.playerOneTurn?(this.playerOneTurn=!1,this.playerTwoTurn=!0,this.activePlayer=J,this.passivePlayer=z):(this.playerOneTurn=!0,this.playerTwoTurn=!1,this.activePlayer=z,this.passivePlayer=J)}},{key:"saveGameData",value:function(){var e={playerOneTurn:this.playerOneTurn,playerTwoTurn:this.playerTwoTurn,playerOnePullOfCards:this.playerOnePullOfCards.map((function(e){return e.id})),playerTwoPullOfCards:this.playerTwoPullOfCards.map((function(e){return e.id})),activePlayerCardsHand:this.saveActivePlayerCardsHand(),player1:z.savePlayerData(),player2:J.savePlayerData(),player1Name:this.playersInfo.playerOneName,player2Name:this.playersInfo.playerTwoName,player1Class:this.playersInfo.playerOneClass,player2Class:this.playersInfo.playerTwoClass};this.saveGameDataToServer(e)}},{key:"saveActivePlayerCardsHand",value:function(){return(e=document.querySelector(".card-in-hand-field").children,function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return C(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){return e.dataset.info}));var e}},{key:"doRestoreGameData",value:function(){var e,a=document.querySelector(".players-overlay"),t=document.querySelector(".players-overlay__close"),n=document.querySelector(".confirm-continue");this.playerOneTurn=this.restoredGameData.playerOneTurn,this.playerTwoTurn=this.restoredGameData.playerTwoTurn,this.playersInfo.playerOneClass=this.restoredGameData.player1Class,this.playersInfo.playerTwoClass=this.restoredGameData.player2Class,this.playersInfo.playerOneName=this.restoredGameData.player1Name,this.playersInfo.playerTwoName=this.restoredGameData.player2Name,this.playerOnePullOfCards=this.checkOnSelectedCards(this.restoredGameData.playerOnePullOfCards,this.restoredGameData.player1Class),this.playerTwoPullOfCards=this.checkOnSelectedCards(this.restoredGameData.playerTwoPullOfCards,this.restoredGameData.player2Class),e=this.playerOneTurn?this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand,this.restoredGameData.player1Class):this.checkOnSelectedCards(this.restoredGameData.activePlayerCardsHand,this.restoredGameData.player2Class),z.doRestorePlayerData(this.restoredGameData,"player1"),J.doRestorePlayerData(this.restoredGameData,"player2"),this.setActivePassivePlayer(),this.setTextTurnInfo(),this.setPlayersClasses(),this.setPlayersNames(),this.setPlayersModels(),this.onSelectionEnd.notify(e),a.removeChild(n),a.classList.add("hidden"),t.classList.remove("hidden")}},{key:"saveGameDataToServer",value:function(e){var a=this;fetch("https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2",{method:"PUT",headers:{"X-Parse-Application-Id":"uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7","X-Parse-REST-API-Key":"UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm","Content-Type":"application/json"},body:JSON.stringify({gameSaved:e})}).then((function(e){e.ok?(console.log("OK"),a.onSaveGameData.notify(!0)):(console.log("Not OK, save error"),a.onSaveGameData.notify(!1))}))}},{key:"readGameDataFromServer",value:function(){var e=this,a=this;fetch("https://parseapi.back4app.com/classes/CardGameContainer/",{method:"GET",headers:{"X-Parse-Application-Id":"uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7","X-Parse-REST-API-Key":"UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm"}}).then((function(a){if(a.ok)return a.json();e.onRestoredGameFailed.notify()})).then((function(e){e.results[0].gameSaved.hasOwnProperty("gameFinished")?a.init():(a.restoredGameData=e.results[0].gameSaved,a.onGameStart.notify(!0))}))}}])&&w(a.prototype,n),e}();function k(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return P(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function S(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var T=function(){function e(a){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameModel=a,this.currentHand=null,this.deckWrapper=document.querySelector(".cards-choose-field"),this.cardInHand=document.querySelector(".card-in-hand-field"),this.playersDeck=document.querySelector(".players-overlay__cards"),this.onCreateCards=new t,this.onRemoveCards=new t,this.onRemoveActionCard=new t,this.onCreateCardAnimation=new t}var a,n;return a=e,(n=[{key:"createCardsForChoose",value:function(e){var a=this;this.removeExtraCards("board"),this.gameModel.playerOneTurn?setTimeout((function(){o[e.playerOneClass].forEach((function(e){return a.createCards(e,"board")})),a.onCreateCardAnimation.notify(".cards-choose-field","multiple")}),500):setTimeout((function(){o[e.playerTwoClass].forEach((function(e){return a.createCards(e,"board")})),a.onCreateCardAnimation.notify(".cards-choose-field","multiple")}),500)}},{key:"showCardsForPlayers",value:function(e){var a=this;this.currentHand=k(this.cardInHand.children),e.classList.contains("player-1__pile-of-card")&&(this.gameModel.playerOnePullOfCards.forEach((function(e){return a.createCards(e,"overlay")})),this.onCreateCardAnimation.notify(".players-overlay__cards","overlay")),e.classList.contains("player-2__pile-of-card")&&(this.gameModel.playerTwoPullOfCards.forEach((function(e){return a.createCards(e,"overlay")})),this.onCreateCardAnimation.notify(".players-overlay__cards","overlay"))}},{key:"createCards",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.icon;n.setAttribute("class","cards"),n.setAttribute("data-info","".concat(e.id)),t?n.setAttribute("draggable","true"):n.setAttribute("draggable","false"),this.onCreateCards.notify(n,a)}},{key:"pullRandomCardsInHand",value:function(){this.removeExtraCards("hand");for(var e=[],a=0;a<4;a++){var t=Math.floor(8*Math.random());-1==e.indexOf(t)?e.push(t):a--}if(this.gameModel.playerOneTurn){for(var n=0;n<e.length;n++)this.createCards(this.gameModel.playerOnePullOfCards[e[n]],"hand",!0);this.onCreateCardAnimation.notify(".card-in-hand-field","multiple")}else{for(var r=0;r<e.length;r++)this.createCards(this.gameModel.playerTwoPullOfCards[e[r]],"hand",!0);this.onCreateCardAnimation.notify(".card-in-hand-field","multiple")}}},{key:"restoreHand",value:function(){var e=this;0===k(this.cardInHand.children).length&&(this.currentHand.forEach((function(e){e.className="cards cards-restored",e.setAttribute("draggable","true")})),this.currentHand.forEach((function(a){return e.cardInHand.appendChild(a)})))}},{key:"removeExtraCards",value:function(e){var a=[];switch(e){case"board":a=k(this.deckWrapper.children);break;case"hand":a=k(this.cardInHand.children);break;case"overlay":a=k(this.playersDeck.children)}this.onRemoveCards.notify(a,e)}},{key:"deletePlayedCard",value:function(e,a){if(!(this.gameModel.tempCard.cost>this.gameModel.activePlayer.staminaPoints))switch(e){case"playedCard":this.onRemoveActionCard.notify(this.gameModel.dragCard);break;case"randomCard":this.onRemoveActionCard.notify(a)}}}])&&S(a.prototype,n),e}(),D=function(){document.querySelector(".save-progress").addEventListener("click",E),document.querySelector(".concede").addEventListener("click",E),document.querySelector(".save-progress").classList.remove("save-progress-allow"),document.querySelector(".concede").classList.remove("concede-allow")},M=function(){X.cardInHandField.classList.add("hidden"),X.endTurnBtn.classList.add("hidden"),X.playerOneCollection.classList.add("hidden"),X.playerTwoCollection.classList.add("hidden"),document.querySelector(".background-music-battlefield").pause(),g(i.audio.victory)},O=function(){var e=document.createElement("div");e.className="play-again",e.textContent="Do you want to play one more battle?";var a=document.createElement("button");a.className="play-again__accept",a.textContent="Yes";var t=document.createElement("button");t.className="play-again__reject",t.textContent="No",e.appendChild(a),e.appendChild(t),X.boardSelector.appendChild(e),a.addEventListener("click",(function(){window.removeEventListener("beforeunload",A),window.location.reload()})),t.addEventListener("click",(function(){window.removeEventListener("beforeunload",A),X.playersTurnInfo.display="none",e.style.display="none",document.title="Main menu",location.hash=decodeURIComponent("main-menu")}))},A=function(e){e.preventDefault(),e.returnValue=""},E=function(e){return e.stopPropagation()};function I(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function _(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var L=function(){function e(a,n,r){var o,s=this;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.boardModel=a,this.gameModel=n,this.boardSelector=r,this.deckWrapper=this.boardSelector.querySelector(".cards-choose-field"),this.acceptChoiceBtn=this.boardSelector.querySelector(".players-draw-info__accept"),this.cardsChooseCounter=this.boardSelector.querySelector(".players-draw-info__count"),this.cardInHandField=this.boardSelector.querySelector(".card-in-hand-field"),this.battleField=this.boardSelector.querySelector(".battle-field"),this.endTurnBtn=this.boardSelector.querySelector(".end-of-turn-btn"),this.playersTurnInfo=this.boardSelector.querySelector(".players-action"),this.cardsPlayField=this.boardSelector.querySelector(".play-field"),this.soundOffOnIcon=this.boardSelector.querySelector(".sound-icon"),this.playersOverlay=this.boardSelector.querySelector(".players-overlay"),this.playersDeck=this.boardSelector.querySelector(".players-overlay__cards"),this.playersDeckClose=this.boardSelector.querySelector(".players-overlay__close"),this.menu=this.boardSelector.querySelector(".battle-field-nav"),this.menuIcon=this.boardSelector.querySelector(".battle-field-nav__icon"),this.playerOneCollection=this.boardSelector.querySelector(".player-1__pile-of-card"),this.playerTwoCollection=this.boardSelector.querySelector(".player-2__pile-of-card"),this.touchEvent=function(e){e.preventDefault();var a=s,t=e.touches[0].pageY,n=e.target;e.target.classList.contains("cards")&&(s.onTouchCardStart.notify(e.target),e.target.classList.add("touch-start-animation"),g(i.audio.cardGrab),a.boardSelector.addEventListener("touchend",(function e(r){var o=parseFloat(t)-parseFloat(r.changedTouches[0].pageY);n.classList.remove("touch-start-animation"),g(i.audio.cardRelease),o>170&&(a.onDropCard.notify(),a.onDropCardAction.notify(a.gameModel.playerOneTurn)),this.removeEventListener("touchend",e)})))},this.onLoadCreate=new t,this.onDefineCards=new t,this.onCheckChosenCards=new t,this.onGrabCardStart=new t,this.onTouchCardStart=new t,this.onDropCard=new t,this.onDropCardAction=new t,this.onEndTurn=new t,this.onClosePileCards=new t,this.onShowPlayerDeck=new t,this.onSoundSwitch=new t,this.onSaveGameProgress=new t,this.onRestoreGameData=new t,this.onRestoreGameDataRejected=new t,this.onConcede=new t,"ontouchstart"in window?(this.cardInHandField.addEventListener("touchstart",(function(e){return s.touchEvent(e)})),this.deckWrapper.addEventListener("touchstart",(function(e){return s.renderCardSelected(e)}))):(this.deckWrapper.addEventListener("click",(function(e){return s.renderCardSelected(e)})),this.cardInHandField.addEventListener("mouseover",(function(e){return s.renderCardSelectedInHand(e.target)})),this.cardInHandField.addEventListener("mouseout",(function(e){return s.renderCardSelectedOutHand(e.target)})),this.cardInHandField.addEventListener("dragstart",(function(e){return s.renderDragCardStart(e.target)})),this.cardInHandField.addEventListener("dragstart",(function(e){return s.onGrabCardStart.notify(e.target)})),this.cardInHandField.addEventListener("dragend",(function(e){return s.renderDragCardEnd(e.target)})),this.cardsPlayField.addEventListener("dragenter",(function(e){return s.renderDragCardEnterDrop(e)})),this.cardsPlayField.addEventListener("dragover",(function(e){return e.preventDefault()})),this.cardsPlayField.addEventListener("drop",(function(e){e.preventDefault(),s.onDropCard.notify(),s.onDropCardAction.notify(s.gameModel.playerOneTurn),s.removeDropFieldAnimation()}))),this.acceptChoiceBtn.addEventListener("click",(function(){s.onDefineCards.notify(),s.onCheckChosenCards.notify()})),this.battleField.addEventListener("click",(function(e){s.onShowPlayerDeck.notify(e.target),s.renderPlayerCardCollection(e.target)})),this.playersDeckClose.addEventListener("click",(function(e){s.onClosePileCards.notify(),s.renderPlayerCardCollection(e.target)})),this.endTurnBtn.addEventListener("click",(function(){return s.onEndTurn.notify()})),this.soundOffOnIcon.addEventListener("click",(function(){return s.onSoundSwitch.notify()})),this.menuIcon.addEventListener("click",(function(){g(i.audio.btnClick),s.renderBattleMenu()})),this.menu.addEventListener("click",(function(e){return s.navigateOnBattlefield(e.target)})),(o=this.menu.getElementsByTagName("li"),function(e){if(Array.isArray(e))return I(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,a){if(e){if("string"==typeof e)return I(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,a):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e.addEventListener("mouseover",(function(){return g(i.audio.btnHover)})),e.addEventListener("click",(function(){return g(i.audio.btnClick)}))})),this.boardSelector.querySelector(".save-progress").addEventListener("click",E),this.boardSelector.querySelector(".concede").addEventListener("click",E),window.addEventListener("beforeunload",A),this.gameModel.onSelectionEnd.attach((function(){return s.renderBattlefield()})),this.gameModel.onChangePlayerInfo.attach((function(e){return s.renderPlayerChooseInfo(e)})),this.gameModel.onUpdatePlayersNames.attach((function(e,a){return s.renderPlayerName(e,a)})),this.gameModel.onUpdatePlayersModels.attach((function(e,a){return s.renderPlayerModels(e,a)})),this.boardModel.onCreateCards.attach((function(e,a){return s.renderCards(e,a)})),this.boardModel.onRemoveCards.attach((function(e,a){return s.renderDeletedCards(e,a)})),this.boardModel.onRemoveActionCard.attach((function(e){return s.renderDeletedActionCard(e)})),this.boardModel.onCreateCardAnimation.attach((function(e,a){return s.renderCreateCardAnimation(e,a)})),this.gameModel.onEndTurnAnimation.attach((function(e,a){return s.renderEndTurnAnimation(e,a)})),this.gameModel.onGameStart.attach((function(e){return s.init(e)})),this.gameModel.onRestoredGameFailed.attach((function(){return s.renderRestoreError()})),this.gameModel.onSaveGameData.attach((function(e){return s.renderSaveGameResult(e)}))}var a,n;return a=e,(n=[{key:"init",value:function(e){e?this.renderRestoreNotification():this.onLoadCreate.notify()}},{key:"renderCards",value:function(e,a){switch(a){case"board":this.deckWrapper.appendChild(e);break;case"hand":this.cardInHandField.appendChild(e);break;case"overlay":this.playersDeck.appendChild(e)}this.cardsChooseCounter.textContent="0",this.cardsChooseCounter.style="color: white"}},{key:"renderCreateCardAnimation",value:function(e,a){c(e,a)}},{key:"renderCardSelected",value:function(e){e.preventDefault();var a=e.target;a!==this.deckWrapper&&a.classList.toggle("card-to-select"),a.classList.contains("card-to-select")&&g(i.audio.cardSelected);var t=document.getElementsByClassName("card-to-select").length,n={};n.number=t,n.color=t>8?"red":8==t?"green":t>0&&t<8?"cyan":"white",this.renderCardCounterInfo(n)}},{key:"renderCardSelectedInHand",value:function(e){var a=e;a!==this.cardInHandField&&a.classList.add("card-to-action")}},{key:"renderCardSelectedOutHand",value:function(e){var a=e;a!==this.cardInHandField&&a.classList.remove("card-to-action")}},{key:"renderDeletedCards",value:function(e,a){if("board"==a&&e.length>0)for(var t=0;t<e.length;t++)this.deckWrapper.removeChild(e[t]);if("hand"==a&&e.length>0)for(var n=0;n<e.length;n++)this.cardInHandField.removeChild(e[n]);if("overlay"==a&&e.length>0)for(var r=0;r<e.length;r++)this.playersDeck.removeChild(e[r])}},{key:"renderDeletedActionCard",value:function(e){this.cardInHandField.removeChild(e)}},{key:"renderBattlefield",value:function(){this.deckWrapper.style.display="none",this.battleField.classList.remove("hidden"),this.boardSelector.querySelector(".players-draw-info").style.display="none"}},{key:"renderCardCounterInfo",value:function(e){this.cardsChooseCounter.textContent=e.number,this.cardsChooseCounter.style="color: ".concat(e.color)}},{key:"renderPlayerChooseInfo",value:function(e){this.boardSelector.querySelector(".players-draw-info__name").textContent=e}},{key:"renderPlayerName",value:function(e,a){this.boardSelector.querySelector(".player-1__name").textContent=e,this.boardSelector.querySelector(".player-2__name").textContent=a}},{key:"renderPlayerModels",value:function(e,a){var t=this.boardSelector.querySelector(".player-1__model"),n=this.boardSelector.querySelector(".player-2__model");switch(t.type="image/svg+xml",n.type="image/svg+xml",e){case"warrior":t.data="images/models/viking.svg";break;case"rogue":t.data="images/models/rogue.svg";break;case"mage":t.data="images/models/mage.svg";break;default:console.log("models not found")}switch(a){case"warrior":n.data="images/models/viking.svg";break;case"rogue":n.data="images/models/rogue.svg";break;case"mage":n.data="images/models/mage.svg";break;default:console.log("models not found")}}},{key:"renderEndTurnAnimation",value:function(e,a){!function(e){var a=document.querySelector(".end-of-turn-btn"),t=document.querySelector(".players-action");switch(t.classList.add("players-turn-info"),e){case"left":setTimeout((function(){a.style.removeProperty("right"),a.style.left="2%"}),500);break;case"right":setTimeout((function(){a.style.removeProperty("left"),a.style.right="2%"}),500)}a.style.display="flex",setTimeout((function(){return a.classList.add("end-turn-animation")}),1300),setTimeout((function(){return t.classList.remove("players-turn-info")}),2100),setTimeout((function(){return a.classList.remove("end-turn-animation")}),2e3)}(e),g(i.audio.endTurn),this.playersTurnInfo.textContent=a}},{key:"renderBattleMenu",value:function(){var e=this.boardSelector.querySelector(".battle-field-nav__icon"),a=this.boardSelector.querySelector(".battle-field-nav__list");e.classList.contains("fa-times-circle")?(a.classList.add("hidden"),e.className="fas fa-bars battle-field-nav__icon"):(a.classList.remove("hidden"),e.className="far fa-times-circle battle-field-nav__icon")}},{key:"navigateOnBattlefield",value:function(e){switch(e.className.split(" ")[0]){case"return-to-main-menu":this.renderBattleMenu(),document.title="Main menu",location.hash=decodeURIComponent("main-menu");break;case"return-to-choose-menu":this.renderBattleMenu(),document.title="Choose menu",location.hash=decodeURIComponent("choose-menu");break;case"save-progress":this.onSaveGameProgress.notify();break;case"concede":this.renderBattleMenu(),this.doConcede()}}},{key:"renderRestoreNotification",value:function(){var e=this;this.playersOverlay.classList.remove("hidden"),this.playersOverlay.classList.add("fade-in-animation"),this.playersDeckClose.classList.add("hidden");var a=document.createElement("div");a.className="confirm-continue",a.textContent="Do you want to continue the last game?";var t=document.createElement("button");t.className="confirm-continue__accept",t.textContent="Yes";var n=document.createElement("button");n.className="confirm-continue__reject",n.textContent="No",a.appendChild(t),a.appendChild(n),this.playersOverlay.appendChild(a),this.boardSelector.querySelector(".confirm-continue").addEventListener("click",(function(a){return e.renderRestoreGameDecision(a.target)}))}},{key:"renderRestoreGameDecision",value:function(e){var a=document.querySelector(".confirm-continue");switch(e.className){case"confirm-continue__reject":this.playersOverlay.removeChild(a),this.playersOverlay.classList.add("hidden"),this.playersDeckClose.classList.remove("hidden"),this.onRestoreGameDataRejected.notify();break;case"confirm-continue__accept":this.playersOverlay.classList.remove("fade-in-animation"),this.onRestoreGameData.notify()}}},{key:"renderDragCardStart",value:function(e){g(i.audio.cardGrab),e!==this.cardInHandField&&(setTimeout((function(){return e.classList.add("invisible")}),0),this.cardsPlayField.classList.add("pulse-animation"))}},{key:"renderDragCardEnd",value:function(e){g(i.audio.cardRelease),e!==this.cardInHandField&&e.classList.remove("invisible"),this.removeDropFieldAnimation()}},{key:"renderDragCardEnterDrop",value:function(e){e.preventDefault(),this.cardsPlayField.classList.add("pulse-animation-enter")}},{key:"removeDropFieldAnimation",value:function(){this.cardsPlayField.classList.remove("pulse-animation-enter"),this.cardsPlayField.classList.remove("pulse-animation")}},{key:"renderPlayerCardCollection",value:function(e){(e.classList.contains("player-1__pile-of-card")||e.classList.contains("player-2__pile-of-card"))&&(this.playersOverlay.classList.remove("hidden"),this.playersOverlay.classList.add("fade-in-pile-animation"),g(i.audio.overlayOpen)),e.classList.contains("players-overlay__close")&&(this.playersOverlay.classList.remove("fade-in-pile-animation"),this.playersOverlay.classList.add("hidden"),g(i.audio.overlayClose))}},{key:"renderRestoreError",value:function(){this.deckWrapper.textContent="Game restoration failed, please reload page or go back to choose menu and start new Game"}},{key:"renderSaveGameResult",value:function(e){var a=this,t=document.createElement("i");e?(t.className="fas fa-check save-progress-success",setTimeout((function(){return a.renderBattleMenu()}),800)):(t.className="fas fa-times save-progress-failed",l(".save-progress")),this.boardSelector.querySelector(".save-progress").appendChild(t),setTimeout((function(){return a.boardSelector.querySelector(".save-progress").removeChild(t)}),1500)}},{key:"doConcede",value:function(){this.gameModel.playerOneTurn?this.onConcede.notify("player1"):this.onConcede.notify("player2")}}])&&_(a.prototype,n),e}();function V(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var H=function(){function e(a,t){var n=this;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameModel=a,this.boardView=t,this.boardView.hasOwnProperty("onDefineCards")&&this.boardView.onDefineCards.attach((function(){return n.doDefineCards()})),this.boardView.hasOwnProperty("onCheckChosenCards")&&this.boardView.onCheckChosenCards.attach((function(){return n.doCardCheckChoose()})),this.boardView.hasOwnProperty("onGrabCardStart")&&this.boardView.onGrabCardStart.attach((function(e){return n.doInitActionCard(e)})),this.boardView.hasOwnProperty("onTouchCardStart")&&this.boardView.onTouchCardStart.attach((function(e){return n.doInitActionCard(e)})),this.boardView.hasOwnProperty("onEndTurn")&&this.boardView.onEndTurn.attach((function(){return n.doEndTurn()})),this.boardView.hasOwnProperty("onSaveGameProgress")&&this.boardView.onSaveGameProgress.attach((function(){return n.doSaveGameData()})),this.boardView.hasOwnProperty("onRestoreGameData")&&this.boardView.onRestoreGameData.attach((function(){return n.doStartRestoreData()})),this.boardView.hasOwnProperty("onRestoreGameDataRejected")&&this.boardView.onRestoreGameDataRejected.attach((function(){return n.doStartGame()}))}var a,t;return a=e,(t=[{key:"doDefineCards",value:function(){this.gameModel.definePlayersCardSet()}},{key:"doCardCheckChoose",value:function(){this.gameModel.checkCardsSelectionEnd()}},{key:"doInitActionCard",value:function(e){this.gameModel.initActionCard(e)}},{key:"doEndTurn",value:function(){this.gameModel.setTurnPriority(),this.gameModel.setTextTurnInfo()}},{key:"doSaveGameData",value:function(){this.gameModel.saveGameData()}},{key:"doStartRestoreData",value:function(){this.gameModel.doRestoreGameData()}},{key:"doStartGame",value:function(){this.gameModel.init()}}])&&V(a.prototype,t),e}();function q(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return G(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?G(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function N(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=function(){function e(a,n){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.healthPoints=100,this.staminaPoints=4,this.defendPoints=7,this.gameModel=a,this.boardModel=n,this.onPlayerViewUpdate=new t,this.onCardDraw=new t,this.onCardDiscard=new t,this.onCardActionAnimation=new t,this.initialHP=100,this.initialDP=7}var a,n;return a=e,(n=[{key:"endTurn",value:function(){this.gameModel.activePlayer.staminaPoints=4,this.gameModel.passivePlayer.staminaPoints=4,this.updateView()}},{key:"updateView",value:function(e){e?this.onPlayerViewUpdate.notify("concede"):this.onPlayerViewUpdate.notify()}},{key:"updateInitialValues",value:function(){this.initialHP=this.healthPoints,this.initialDP=this.defendPoints}},{key:"doAction",value:function(){if(this.gameModel.activePlayer.staminaPoints<this.gameModel.tempCard.cost)return g(i.audio.cardRelease),void(this.gameModel.playerOneTurn?v("player1"):v());switch(this.gameModel.tempCard.type){case"attack":this.standartAttack(this.gameModel.tempCard);break;case"attackDrawDiscard":this.attackDrawDiscard(this.gameModel.tempCard);break;case"attackAddEffect":this.sideEffectAttack(this.gameModel.tempCard);break;case"defend":this.standartDefend(this.gameModel.tempCard);break;case"defendAddEffect":this.sideEffectDefend(this.gameModel.tempCard);break;case"defendDrawDiscard":this.defendDrawDiscard(this.gameModel.tempCard);break;case"defendAndAttack":this.defendWithAttack(this.gameModel.tempCard)}}},{key:"randomCardDraw",value:function(){var e=Math.floor(Math.random()*this.gameModel.playerOnePullOfCards.length);this.gameModel.playerOneTurn?this.onCardDraw.notify(this.gameModel.playerOnePullOfCards[e]):this.onCardDraw.notify(this.gameModel.playerTwoPullOfCards[e]),c(".card-in-hand-field","single")}},{key:"massiveRandomDraw",value:function(e,a){for(var t=q(this.boardModel.cardInHand.children).map((function(e){return e.dataset.info})).map((function(e){return parseInt(e,10)})),n=q(this.gameModel.playerOnePullOfCards).map((function(e){return e.id})),r=[],i=0;i<e.effect-a;i++){var o=Math.floor(Math.random()*n.length);-1===t.indexOf(n[o])&&-1===r.indexOf(n[o])?r.push(n[o]):i--}if(this.gameModel.playerOneTurn){r=this.gameModel.checkOnSelectedCards(r,this.gameModel.playerOneClass);for(var s=0;s<r.length;s++)this.onCardDraw.notify(r[s])}else{r=this.gameModel.checkOnSelectedCards(r,this.gameModel.playerTwoClass);for(var d=0;d<r.length;d++)this.onCardDraw.notify(r[d])}c(".card-in-hand-field","single")}},{key:"randomCardDiscard",value:function(){var e=this,a=Math.floor(Math.random()*this.boardModel.cardInHand.children.length);this.boardModel.cardInHand.children.length>0&&(u(this.boardModel.cardInHand.children[a]),g(i.audio.discardCard),setTimeout((function(){return e.onCardDiscard.notify(e.boardModel.cardInHand.children[a])}),300))}},{key:"cardRemove",value:function(e){this.boardModel.cardInHand.children.length>0&&(u(e),g(i.audio.discardCard),this.onCardDiscard.notify(e))}},{key:"standartAttack",value:function(e){this.attackThroughDefendPoints(e),this.gameModel.activePlayer.staminaPoints-=e.cost,this.onCardActionAnimation.notify()}},{key:"sideEffectAttack",value:function(e){if("riddleWithHoles"==e.name)return this.gameModel.passivePlayer.healthPoints-=e.effect,this.gameModel.activePlayer.staminaPoints-=e.cost,void this.onCardActionAnimation.notify();if("judgment"==e.name){var a=e.sideEffect();return null==a||(this.gameModel.passivePlayer.healthPoints=a),void this.onCardActionAnimation.notify()}if(e.sideEffect){var t=e.sideEffect();if(this.gameModel.passivePlayer.defendPoints){var n=this.gameModel.passivePlayer.defendPoints-t;n<0?(this.gameModel.passivePlayer.defendPoints=0,n=Math.abs(n),this.gameModel.passivePlayer.healthPoints-=n):this.gameModel.passivePlayer.defendPoints=n}else this.gameModel.passivePlayer.healthPoints-=t||e.effect}this.gameModel.activePlayer.staminaPoints-=e.cost,this.onCardActionAnimation.notify()}},{key:"attackDrawDiscard",value:function(e){var a=this;if(this.attackThroughDefendPoints(e),"daggerThrow"==e.name&&(setTimeout((function(){return a.randomCardDiscard()}),300),setTimeout((function(){return a.randomCardDraw()}),800)),"quickSlash"==e.name&&this.randomCardDraw(),"cutThroughFate"==e.name){var t=e.sideEffect();this.gameModel.activePlayer.defendPoints+=t,setTimeout((function(){return a.randomCardDraw()}),600)}this.gameModel.activePlayer.staminaPoints-=e.cost,this.onCardActionAnimation.notify()}},{key:"standartDefend",value:function(e){this.gameModel.activePlayer.defendPoints+=e.effect,this.gameModel.activePlayer.staminaPoints-=e.cost,this.onCardActionAnimation.notify()}},{key:"sideEffectDefend",value:function(e){if("nirvana"==e.name){var a=e.sideEffect();return this.gameModel.activePlayer.defendPoints=a,this.gameModel.activePlayer.staminaPoints-=e.cost,void this.onCardActionAnimation.notify()}if("meditate"==e.name)return this.gameModel.activePlayer.staminaPoints-e.cost+e.effect>4?(this.gameModel.activePlayer.staminaPoints-=e.cost,this.gameModel.activePlayer.staminaPoints=4):(this.gameModel.activePlayer.staminaPoints-=e.cost,this.gameModel.activePlayer.staminaPoints+=e.effect),void this.onCardActionAnimation.notify();if(e.sideEffect){var t=e.sideEffect();this.gameModel.activePlayer.defendPoints+=t,this.gameModel.activePlayer.staminaPoints-=e.cost,this.onCardActionAnimation.notify()}}},{key:"defendWithAttack",value:function(e){this.attackThroughDefendPoints(e),this.gameModel.activePlayer.defendPoints+=e.effect,this.gameModel.activePlayer.staminaPoints-=e.cost,this.onCardActionAnimation.notify()}},{key:"defendDrawDiscard",value:function(e){var a=this;if("prepared"==e.name)return this.randomCardDiscard(),void setTimeout((function(){return a.randomCardDraw()}),300);if("warcry"==e.name)return this.randomCardDraw(),void this.onCardActionAnimation.notify();if("survivor"==e.name&&(setTimeout((function(){return a.randomCardDiscard()}),300),this.gameModel.activePlayer.defendPoints+=e.effect),"bloodletting"==e.name)return this.randomCardDraw(),this.gameModel.activePlayer.healthPoints-=e.effect,void this.onCardActionAnimation.notify();if("expertise"==e.name&&this.massiveRandomDraw(e,this.boardModel.cardInHand.children.length),"alpha"==e.name){for(var t=0;t<this.boardModel.cardInHand.children.length;t++)this.boardModel.cardInHand.children[t].classList.contains("cards")&&(this.cardRemove(this.boardModel.cardInHand.children[t]),t--);this.massiveRandomDraw(e,0)}if("backFlip"==e.name){var n=e.sideEffect();this.gameModel.activePlayer.defendPoints+=n,setTimeout((function(){return a.massiveRandomDraw(e,0)}),300)}"thirdEye"==e.name&&(this.gameModel.activePlayer.defendPoints+=e.effect,this.randomCardDraw()),this.gameModel.activePlayer.staminaPoints-=e.cost,this.onCardActionAnimation.notify()}},{key:"attackThroughDefendPoints",value:function(e){if(this.gameModel.passivePlayer.defendPoints){var a=this.gameModel.passivePlayer.defendPoints-e.effect;a<0?(this.gameModel.passivePlayer.defendPoints=0,a=Math.abs(a),this.gameModel.passivePlayer.healthPoints-=a):this.gameModel.passivePlayer.defendPoints=a}else this.gameModel.passivePlayer.healthPoints-=e.effect}},{key:"savePlayerData",value:function(){return{healthPoints:this.healthPoints,staminaPoints:this.staminaPoints,defendPoints:this.defendPoints,initialHP:this.initialHP,initialDP:this.initialDP}}},{key:"doRestorePlayerData",value:function(e,a){this.healthPoints=e[a].healthPoints,this.staminaPoints=e[a].staminaPoints,this.defendPoints=e[a].defendPoints,this.initialHP=e[a].initialHP,this.initialDP=e[a].initialDP}},{key:"concede",value:function(){this.healthPoints=0,this.updateView("concede")}}])&&N(a.prototype,n),e}();function U(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(a,n,r,i){var o=this;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerOneModel=a,this.playerTwoModel=n,this.gameModel=r,this.playerContainer=i,this.onUpdateInitialValue=new t,this.playerOneHPValue=this.playerContainer.querySelector(".player-1__hp-value"),this.playerOneDefenceValue=this.playerContainer.querySelector(".player-1__defence-value"),this.playerOneStaminaValue=this.playerContainer.querySelector(".player-1__stamina-value"),this.playerOneHP=this.playerContainer.querySelector(".player-1__hp-bar-inner"),this.playerTwoHPValue=this.playerContainer.querySelector(".player-2__hp-value"),this.playerTwoDefenceValue=this.playerContainer.querySelector(".player-2__defence-value"),this.playerTwoStaminaValue=this.playerContainer.querySelector(".player-2__stamina-value"),this.playerTwoHP=this.playerContainer.querySelector(".player-2__hp-bar-inner"),this.playerOneModel.onPlayerViewUpdate.attach((function(e){e?o.renderViewHP():o.renderViewStamina()})),this.playerTwoModel.onPlayerViewUpdate.attach((function(e){e?o.renderViewHP():o.renderViewStamina()})),this.playerOneModel.onCardActionAnimation.attach((function(){return o.renderAnimation()})),this.playerTwoModel.onCardActionAnimation.attach((function(){return o.renderAnimation()})),this.gameModel.onSelectionEnd.attach((function(){return o.renderWholeUI(!1)}))}var a,n;return a=e,(n=[{key:"renderViewHP",value:function(){this.playerOneHPValue.textContent=this.playerOneModel.healthPoints,this.playerOneHP.style.width=this.playerOneModel.healthPoints+"%",this.playerTwoHPValue.textContent=this.playerTwoModel.healthPoints,this.playerTwoHP.style.width=this.playerTwoModel.healthPoints+"%"}},{key:"renderViewDef",value:function(){var e=this;this.playerOneDefenceValue.textContent=this.playerOneModel.defendPoints,this.playerTwoDefenceValue.textContent=this.playerTwoModel.defendPoints,this.playerOneDefenceValue.classList.remove("defend-value-negative-animation"),this.playerOneDefenceValue.classList.remove("defend-value-positive-animation"),this.playerTwoDefenceValue.classList.remove("defend-value-negative-animation"),this.playerTwoDefenceValue.classList.remove("defend-value-positive-animation"),this.playerOneModel.initialDP>this.playerOneModel.defendPoints&&setTimeout((function(){return e.playerOneDefenceValue.className="player-1__defence-value defend-value-negative-animation"}),0),this.playerOneModel.initialDP<this.playerOneModel.defendPoints&&setTimeout((function(){return e.playerOneDefenceValue.className="player-1__defence-value defend-value-positive-animation"}),0),this.playerTwoModel.initialDP>this.playerTwoModel.defendPoints&&setTimeout((function(){return e.playerTwoDefenceValue.className="player-2__defence-value defend-value-negative-animation"}),0),this.playerTwoModel.initialDP<this.playerTwoModel.defendPoints&&setTimeout((function(){return e.playerTwoDefenceValue.className="player-2__defence-value defend-value-positive-animation"}),0)}},{key:"renderViewStamina",value:function(){this.playerOneStaminaValue.textContent=this.playerOneModel.staminaPoints,this.playerTwoStaminaValue.textContent=this.playerTwoModel.staminaPoints}},{key:"updateDamageNumbers",value:function(e){var a,t,n,r,i=this.gameModel.passivePlayer.initialDP-this.gameModel.passivePlayer.defendPoints;i<=0&&(i=0),a=e,t=this.gameModel.passivePlayer.initialHP-this.gameModel.passivePlayer.healthPoints+i,n=document.querySelector(a).parentElement,(r=document.createElement("div")).textContent=t,r.className="damage-number-animation",n.appendChild(r),setTimeout((function(){return n.removeChild(r)}),1500)}},{key:"renderWholeUI",value:function(e,a){this.renderViewHP(),this.renderViewDef(),this.renderViewStamina(),e&&this.updateDamageNumbers(a)}},{key:"renderAnimation",value:function(){var e,a,t,n=this,r=function(e){return new Promise((function(a,t){setTimeout((function(){return a()}),e)}))};switch(this.gameModel.playerOneTurn?(e=".player-1__model",a=".player-2__model",t="right"):(e=".player-2__model",a=".player-1__model",t="left"),this.gameModel.tempCard.name){case"strike_w":case"bash":case"strike_r":case"quickSlash":h(e,t),m(a,"attack-animation",i.animation.warriorAttack),r(200).then((function(){return l(a),g(i.audio.strikeAttack),"true"})).then((function(){n.renderWholeUI(!0,a),n.onUpdateInitialValue.notify()}));break;case"defend_w":case"armaments":case"entrench":case"deflect":case"backFlip":case"defend_m":case"nirvana":case"masterReality":case"thirdEye":case"survivor":f(e,"shield-animation",i.animation.defend),g(i.audio.defend),this.renderViewDef(),this.renderViewStamina(),this.onUpdateInitialValue.notify();break;case"bodySlam":h(e,t),m(a,"smash-attack-animation",i.animation.smash),r(200).then((function(){return l(a),g(i.audio.bashAttack),"true"})).then((function(){n.renderWholeUI(),n.updateDamageNumbers(a),n.onUpdateInitialValue.notify()}));break;case"slice":case"strike_m":h(e,t),m(a,"smash-attack-animation",i.animation.smash),g(i.audio.magePunch),l(a),this.renderWholeUI(!0,a),this.onUpdateInitialValue.notify();break;case"daggerThrow":r(200).then((function(){return h(e,t),m(a,"smash-attack-animation",i.animation.smash),l(a),g(i.audio.bashAttack),"true"})).then((function(){n.renderWholeUI(),n.updateDamageNumbers(a),n.onUpdateInitialValue.notify()}));break;case"anger":h(e,t),y(a,"anger-attack-animation",i.animation.anger),r(200).then((function(){return l(a),g(i.audio.anger),"true"})).then((function(){n.renderWholeUI(!0,a),n.onUpdateInitialValue.notify()}));break;case"reachHeaven":h(e,t),y(a,"anger-attack-animation",i.animation.reachHeaven),r(200).then((function(){return l(a),g(i.audio.mageStrong),"true"})).then((function(){n.renderWholeUI(!0,a),n.onUpdateInitialValue.notify()}));break;case"ironWave":case"dash":f(e,"shield-animation",i.animation.defend),g(i.audio.defend),r(400).then((function(){h(e,t),y(a,"anger-attack-animation",i.animation.anger),l(a),g(i.audio.bashAttack),n.renderWholeUI(!0,a),n.onUpdateInitialValue.notify()}));break;case"bloodletting":y(e,"shield-animation",i.animation.bloodletting),r(200).then((function(){return l(e),g(i.audio.bloodletting),"true"})).then((function(){n.renderViewHP(),n.onUpdateInitialValue.notify()}));break;case"warcry":l(e),g(i.audio.warcry),this.renderViewStamina();break;case"meditate":case"alpha":f(e,"refresh-skill-animation",i.animation.refreshStamina),g(i.audio.meditate),this.renderViewStamina();break;case"cutThroughFate":f(e,"shield-animation",i.animation.defend),g(i.audio.defend),this.renderViewDef(),this.renderViewStamina(),this.updateDamageNumbers(a),this.onUpdateInitialValue.notify(),r(400).then((function(){h(e,t),y(a,"anger-attack-animation",i.animation.mageEffect),l(a),g(i.audio.mageAttack),n.renderViewHP(),n.renderViewDef(),n.onUpdateInitialValue.notify()}));break;case"perfectedStrike":case"tantrum":case"flechettes":h(e,t),function(e,a,t,n){for(var r=document.querySelector(e).parentElement,o=t,s=function(e){setTimeout((function(){1===e?o.style.transform="rotate(30deg)":2===e&&(o.style.transform="rotate(315deg)"),o.className="attack-animation",r.appendChild(o),window.navigator.vibrate([200]),g(i.audio.strikeAttack)}),300*e)},d=0;d<3;d++)s(d);setTimeout((function(){return r.removeChild(o)}),1300)}(a,0,i.animation.warriorAttack),setTimeout((function(){return l(a)}),200),this.renderWholeUI(!0,a),this.onUpdateInitialValue.notify();break;case"expertise":f(e,"refresh-skill-animation",i.animation.serpentRing),this.renderViewStamina();break;case"bludgeon":h(e,t),g(i.audio.warcry),p(a,"warrior-ultimate-animation",i.animation.flash,i.audio.flash),this.renderWholeUI(!0,a),this.onUpdateInitialValue.notify();break;case"riddleWithHoles":h(e,t),p(a,"rogue-ultimate-animation",i.animation.daggersSvg,i.audio.backStab),this.renderWholeUI(!0,a),this.onUpdateInitialValue.notify();break;case"signatureMove":h(e,t),p(a,"mage-ultimate-animation",i.animation.mageAttack,i.audio.mageUltimate),this.renderWholeUI(!0,a),this.onUpdateInitialValue.notify();break;case"judgment":h(e,t),p(a,"rogue-ultimate-animation",i.animation.judgmentSvg,i.audio.judj),this.renderWholeUI(!0,a),this.onUpdateInitialValue.notify()}}}])&&U(a.prototype,n),e}();function F(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var x=function(){function e(a,t,n,r){var i=this;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerOneModel=a,this.playerTwoModel=t,this.boardView=n,this.playersView=r,this.boardView.hasOwnProperty("onDropCardAction")&&this.boardView.onDropCardAction.attach((function(e){return i.doPlayCardAction(e)})),this.boardView.hasOwnProperty("onEndTurn")&&this.boardView.onEndTurn.attach((function(){return i.doEndTurn()})),this.playersView.hasOwnProperty("onUpdateInitialValue")&&this.playersView.onUpdateInitialValue.attach((function(){return i.doUpdateInitialValue()})),this.boardView.hasOwnProperty("onSaveGameProgress")&&this.boardView.onSaveGameProgress.attach((function(){return i.doSavePlayerData()})),this.boardView.hasOwnProperty("onConcede")&&this.boardView.onConcede.attach((function(e){return i.doConcede(e)}))}var a,t;return a=e,(t=[{key:"doPlayCardAction",value:function(e){e?this.playerOneModel.doAction():this.playerTwoModel.doAction()}},{key:"doEndTurn",value:function(){this.playerOneModel.endTurn(),this.playerOneModel.updateInitialValues(),this.playerTwoModel.updateInitialValues()}},{key:"doUpdateInitialValue",value:function(){this.playerOneModel.updateInitialValues(),this.playerTwoModel.updateInitialValues()}},{key:"doSavePlayerData",value:function(){this.playerOneModel.savePlayerData(),this.playerTwoModel.savePlayerData()}},{key:"doConcede",value:function(e){"player1"===e?z.concede():J.concede()}}])&&F(a.prototype,t),e}();function W(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=function(){function e(a,t,n,r,i){var o=this;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameModel=a,this.boardModel=t,this.boardView=i,this.player1=n,this.player2=r,this.boardView.hasOwnProperty("onLoadCreate")&&this.boardView.onLoadCreate.attach((function(e,a){return o.doCreateCardsForChoose(e,a)})),this.gameModel.hasOwnProperty("onSelectionContinue")&&this.gameModel.onSelectionContinue.attach((function(){return o.doCreateCardsForChoose()})),this.gameModel.hasOwnProperty("onSelectionEnd")&&this.gameModel.onSelectionEnd.attach((function(e){return o.doCreateCardsInHand(e)})),this.boardView.hasOwnProperty("onDropCard")&&this.boardView.onDropCard.attach((function(){return o.doDeleteActionCard()})),this.boardView.hasOwnProperty("onEndTurn")&&this.boardView.onEndTurn.attach((function(){return o.doCreateCardsInHand()})),this.boardView.hasOwnProperty("onShowPlayerDeck")&&this.boardView.onShowPlayerDeck.attach((function(e){return o.doShowPlayersDeck(e)})),this.boardView.hasOwnProperty("onClosePileCards")&&this.boardView.onClosePileCards.attach((function(){return o.doDeleteOverlayCards()})),this.player1.hasOwnProperty("onCardDraw")&&this.player1.onCardDraw.attach((function(e){return o.doSkillCreateCardInHand(e)})),this.player2.hasOwnProperty("onCardDraw")&&this.player2.onCardDraw.attach((function(e){return o.doSkillCreateCardInHand(e)})),this.player1.hasOwnProperty("onCardDiscard")&&this.player1.onCardDiscard.attach((function(e){return o.doDeleteRandomCard(e)})),this.player2.hasOwnProperty("onCardDiscard")&&this.player2.onCardDiscard.attach((function(e){return o.doDeleteRandomCard(e)})),this.boardView.hasOwnProperty("onSoundSwitch")&&this.boardView.onSoundSwitch.attach((function(){return o.doTurnOnOfSound()}))}var a,t;return a=e,(t=[{key:"doCreateCardsForChoose",value:function(){this.boardModel.createCardsForChoose(this.gameModel)}},{key:"doCreateCardsInHand",value:function(e){var a=this;e?(e.forEach((function(e){return a.boardModel.createCards(e,"hand",!0)})),this.boardModel.onCreateCardAnimation.notify(".card-in-hand-field","multiple")):this.boardModel.pullRandomCardsInHand()}},{key:"doDeleteActionCard",value:function(){this.boardModel.deletePlayedCard("playedCard")}},{key:"doDeleteRandomCard",value:function(e){this.boardModel.deletePlayedCard("randomCard",e)}},{key:"doDeleteOverlayCards",value:function(){this.boardModel.removeExtraCards("overlay"),this.boardModel.restoreHand()}},{key:"doSkillCreateCardInHand",value:function(e){this.boardModel.createCards(e,"hand",!0)}},{key:"doShowPlayersDeck",value:function(e){this.boardModel.showCardsForPlayers(e)}},{key:"doTurnOnOfSound",value:function(){var e,a,t;a=decodeURIComponent(window.location.hash.substr(1)),t=document.querySelector(".sound-icon"),(e="battle-field"==a||"restoredGame"==a?document.querySelector(".background-music-battlefield"):document.querySelector(".background-music-main-menu")).paused?(e.play(),t.className="fas fa-volume-up sound-icon"):(e.pause(),t.className="fas fa-volume-mute sound-icon")}}])&&W(a.prototype,t),e}(),K=new b,Y=new T(K),X=new L(Y,K,document.querySelector(".wrapper-battle")),z=(new H(K,X),new R(K,Y)),J=new R(K,Y),$=new j(z,J,K,document.querySelector(".wrapper-battle")),Z=(new x(z,J,X,$),new B(K,Y,z,J,X),new MutationObserver((function(e){e[0].target.classList.contains("player-1__hp-value")&&e[0].target.childNodes[0].data<=0&&(X.playersTurnInfo.textContent="".concat(K.playersInfo.playerTwoName," is a winner"),X.playersTurnInfo.classList.add("win-info-animation"),M(),O(),D(),fetch("https://parseapi.back4app.com/classes/CardGameContainer/QCWoJhzpd2",{method:"PUT",headers:{"X-Parse-Application-Id":"uU4nbtVfuBneX95bxKyjBuyG82Wr3Wg1JrTjEYr7","X-Parse-REST-API-Key":"UAnSqROzrtRZuMkgY3MgoEkhsp0040aUBca0dWGm","Content-Type":"application/json"},body:JSON.stringify({gameSaved:{gameFinished:!0}})}).then((function(e){e.ok?console.log("OK, deleted"):console.log("Not OK, error")}))),e[0].target.classList.contains("player-2__hp-value")&&e[0].target.childNodes[0].data<=0&&(X.playersTurnInfo.textContent="".concat(K.playersInfo.playerOneName," is a winner"),X.playersTurnInfo.classList.add("win-info-animation"),M(),O(),D())}))),Q=new MutationObserver((function(){document.querySelector(".save-progress").removeEventListener("click",E),document.querySelector(".concede").removeEventListener("click",E),document.querySelector(".save-progress").classList.add("save-progress-allow"),document.querySelector(".concede").classList.add("concede-allow")}));K.start(),Z.observe($.playerOneHPValue,{childList:!0,subtree:!0,characterData:!0}),Z.observe($.playerTwoHPValue,{childList:!0,subtree:!0,characterData:!0}),Q.observe(X.battleField,{attributes:!0})}();
//# sourceMappingURL=main.bundle.js.map